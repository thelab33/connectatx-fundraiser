{# ==================== Hero Quote Overlay ==================== #}
<figure
  aria-labelledby="hero-overlay-quote"
  class="absolute bottom-24 md:bottom-28 left-1/2 -translate-x-1/2 z-10 w-[92%] max-w-2xl px-4 rounded-2xl bg-black opacity-80 border border-yellow-300 backdrop-blur-lg shadow-xl animate-fade-in animate-delay-700 transition-transform duration-500 hover:scale-105"
  id="hero-overlay-quote"
  itemscope
  itemtype="https://schema.org/Quotation"
  style="box-shadow: 0 8px 32px rgba(250, 204, 21, 0.14), 0 2px 12px rgba(0, 0, 0, 0.24);"
  tabindex="0"
>
  <!-- Blockquote -->
  <blockquote
    aria-live="polite"
    cite="{{ quote_cite if quote_cite else url_for('main.home', _external=True) }}"
    class="relative text-white text-lg sm:text-xl font-semibold italic leading-relaxed drop-shadow-[0_2px_12px_rgba(0,0,0,.32)] px-2 md:px-8 py-5"
    itemprop="text"
  >
    <!-- Decorative opening quote SVG -->
    <svg
      aria-hidden="true"
      class="absolute -left-2 -top-3 w-8 h-8 text-yellow-300 opacity-70 select-none"
      fill="currentColor"
      viewBox="0 0 32 32"
    >
      <path d="M12 20a8 8 0 0 1 8-8V6A14 14 0 0 0 6 20v2a4 4 0 0 0 4 4h2a4 4 0 0 0 4-4z"></path>
    </svg>

    <span class="block" style="text-shadow: 0 2px 12px rgba(0, 0, 0, 0.32)">
      “{{ hero_quote if hero_quote else 'The brotherhood and discipline we build here creates leaders for life.' }}”
    </span>

    <!-- Decorative closing quote SVG -->
    <svg
      aria-hidden="true"
      class="absolute -right-2 -bottom-3 w-8 h-8 text-yellow-300 opacity-70 rotate-180 select-none"
      fill="currentColor"
      viewBox="0 0 32 32"
    >
      <path d="M12 20a8 8 0 0 1 8-8V6A14 14 0 0 0 6 20v2a4 4 0 0 0 4 4h2a4 4 0 0 0 4-4z"></path>
    </svg>
  </blockquote>

  <!-- Author Attribution -->
  <figcaption
    aria-label="Coach attribution"
    class="mt-2 text-yellow-200 font-bold tracking-wide text-base flex items-center justify-center gap-1 animate-slide-up animate-delay-900"
    itemprop="author"
    itemscope
    itemtype="https://schema.org/Person"
  >
    <span class="text-yellow-300" itemprop="name">
      — {{ hero_quote_author if hero_quote_author else 'Coach Angel Rodriguez' }}
    </span>
    <svg
      aria-hidden="true"
      class="w-5 h-5 text-yellow-300 animate-bounce"
      fill="currentColor"
      viewBox="0 0 20 20"
    >
      <path d="M10 15l-5.5-5.5 1.4-1.4L10 12.2l4.1-4.1 1.4 1.4z"></path>
    </svg>
  </figcaption>

  <!-- Copy Quote Button -->
  <button
    aria-label="Copy this quote"
    class="mt-2 ml-2 text-xs text-yellow-300 hover:text-yellow-100 bg-yellow-300 opacity-10 rounded px-2 py-1 transition focus:outline-none focus:ring-2 focus:ring-yellow-400"
    onclick="navigator.clipboard.writeText('{{ hero_quote if hero_quote else 'The brotherhood and discipline we build here creates leaders for life.' }} — {{ hero_quote_author if hero_quote_author else 'Coach Angel Rodriguez' }}')"
    type="button"
  >
    Copy Quote
  </button>
</figure>

<script type="module">
  import confetti from "https://cdn.skypack.dev/canvas-confetti@1.6.0";

  window.openSponsorModal = function () {
    const modal = document.getElementById("become-sponsor-modal");
    modal.classList.add("show");
    modal.style.opacity = "1";
    modal.style.pointerEvents = "all";

    setTimeout(
      () =>
        confetti({
          particleCount: 90,
          spread: 70,
          origin: { y: 0.7 },
          colors: ["#facc15", "#fde68a", "#22d3ee", "#a21caf", "#be185d"],
        }),
      300
    );
  };

  // Open Modal when clicked
  document
    .querySelectorAll('#sponsor-confetti-btn, [onclick*="openSponsorModal"]')
    .forEach((btn) => btn.addEventListener("click", openSponsorModal));

  // Tracking sponsor impressions
  window.sponsorImpression = function (id, type = "view") {
    const img = new Image(1, 1);
    img.src = `/analytics/pixel?sponsor_id=${id}&event=${type}&ts=${Date.now()}`;
  };

  // Tracking sponsor clicks
  window.sponsorClick = function (id) {
    window.sponsorImpression(id, "click");
  };
</script>

