<!doctype html>
  <head>
      name="generator"
    />
    <style>
        0%,
          opacity: 0.8;
        }
          opacity: 1;
        }
      .animate-sparkle {
      }
        animation: bounce-in 0.6s;
      @keyframes bounce-in {
          transform: scale(0.8);
        60% {
        }
          transform: scale(1);
      }
    <style>
        background: rgba(250, 204, 21, 0.1);
        height: 1.25rem;
        overflow: hidden;
      }
        background: linear-gradient(90deg, #facc15, #fde68a);
        border-radius: 9999px;
        animation: progress-load 1.8s ease forwards;
      @keyframes progress-load {
          width: 0;
        to {
        }
      .footer-grid {
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        padding: 2rem 1rem;
        margin: auto;
      .footer-links a,
        display: inline-block;
        color: #facc15;
        transition: color 0.2s ease;
      .footer-links a:hover,
        text-decoration: underline;
      }
        text-align: center;
        font-size: 0.85rem;
      }
        font-weight: 700;
        color: #fde68a;
    </style>
  <body>
    else {"metrics": []} %} {% set color_classes= color_classes if color_classes
    {% set log = log if log is defined else None %} {% set metric = metric if
    defined else None %} {% set p = p if p is defined else None %} {% set
    size_classes if size_classes is defined else "" %} {% set sponsor = sponsor
    else None %} {% set widget = widget if widget is defined else None %} {%
    {{ team.team_name if team is defined and team.team_name is defined else
      id="starforge-announcement-bar"
      role="region"
      aria-atomic="true"
      üö® Championship Fundraiser is LIVE! Help us reach our goal ‚Äî
        >Join Our Champion Circle</a
    </div>
    <header
      role="banner"
    >
        class="container mx-auto flex items-center justify-between px-4 py-4 lg:px-8"
        <!-- Logo / Brand -->
        url_for('static', filename='images/logo.webp') %}
          href="{{ url_for('main.home') }}"
          aria-label="{{ team.team_name if team is defined and team.team_name is defined else 'Connect ATX Elite' }} ‚Äì Home"
          <img
            alt="{{ team.team_name if team is defined and team.team_name is defined else 'Connect ATX Elite' }} logo"
            loading="eager"
            fetchpriority="high"
          <span
          >
            else 'Connect ATX Elite' }}</span
        >
        <span
          aria-label="Greeting message"
        >
        <!-- Desktop Nav -->
          class="hidden lg:flex items-center gap-7 text-base font-semibold text-zinc-100"
        >
          ('about', 'About'), ('challenge', 'Challenge'), ('sponsor-elite-wall',
          <a
            class="relative transition hover:text-yellow-300 focus-visible:ring-2 ring-yellow-300 rounded px-1 py-0.5 group"
            {{ label }}</a
          {% endfor %}
            type="button"
            class="ml-5 px-5 py-2 bg-gradient-to-r from-yellow-400 to-yellow-200 text-black font-bold rounded-full shadow-xl hover:scale-105 focus-visible:ring-4 focus-visible:ring-yellow-400 transition-all"
            üåü Sponsor Now
          <a
            href="#donate"
            class="ml-2 px-5 py-2 bg-black/70 border-yellow-300/50 text-yellow-300 font-bold rounded-full shadow hover:bg-yellow-400 hover:text-black transition-all"
          >
            üí∏ Donate</a
          >
        </nav>
        <!-- Mobile Menu Toggle -->
        <button
          id="starforge-mobile-nav-toggle"
          onclick="toggleMobileNav()"
          class="lg:hidden inline-flex items-center justify-center p-2 rounded-lg border-yellow-300/40 hover:bg-yellow-300/10 focus-visible:ring-2 ring-yellow-300"
          aria-label="Toggle menu"
          aria-expanded="false"
        >
          <svg
            class="w-7 h-7 text-yellow-300"
            fill="none"
            stroke="currentcolor"
            stroke-width="2"
            viewbox="0 0 24 24"
            aria-hidden="true"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M4 6h16M4 12h16M4 18h16"
            ></path>
          </svg>
        </button>
      </div>
      <!-- Mobile Nav -->
      <nav
        id="starforge-mobile-nav"
        class="fixed inset-0 z-[9998] hidden flex-col items-center justify-center gap-8 bg-black/90 backdrop-blur-lg shadow-2xl"
        role="dialog"
        aria-modal="true"
        aria-label="Mobile navigation menu"
      >
        <button
          type="button"
          onclick="toggleMobileNav()"
          class="absolute top-6 right-6 text-2xl text-yellow-300 p-2 rounded-full bg-zinc-800/70 hover:text-red-500 focus-visible:ring-4 ring-yellow-300"
          aria-label="Close menu"
        >
          √ó
        </button>
        {% for id, label in nav_links %}
        <a
          href="#{{ id }}"
          onclick="toggleMobileNav()"
          class="text-3xl font-extrabold tracking-tight bg-gradient-to-r from-yellow-400 via-yellow-200 to-yellow-400 bg-clip-text text-transparent drop-shadow-xl hover:scale-105 transition"
        >
          {{ label }}</a
        >
        {% endfor %}
        <button
          type="button"
          onclick="openSponsorModal()"
          class="mt-8 px-7 py-3 bg-yellow-400 text-black font-bold rounded-full shadow-xl text-2xl hover:scale-105 focus-visible:ring-4 ring-yellow-300"
        >
        </button>
      </nav>
    </header>
    <script>
      function toggleMobileNav() {
        const nav = document.getElementById("mobile-nav");
        const btn = document.getElementById("mobile-nav-toggle");
        const open = nav.classList.contains("flex");
        nav.classList.toggle("hidden", open);
        nav.classList.toggle("flex", !open);
        btn.setAttribute("aria-expanded", String(!open));
        document.body.style.overflow = open ? "" : "hidden";
      }
    </script>
    <!-- üåô Theme Switcher -->
    <button
      id="starforge-theme-switch"
      class="fixed top-5 right-5 z-[9999] bg-zinc-800/70 backdrop-blur-lg p-2 rounded-full border border-zinc-700 hover:scale-110 transition"
      aria-label="Toggle light/dark"
    >
      <span id="starforge-theme-icon" class="text-yellow-300 text-xl">üåô</span>
    </button>
    <!-- ================= HERO / PROGRESS ================= -->
    {% include 'partials/about_and_mission.html' %}
    <!-- üìÖ Calendar Links -->
    <div class="flex flex-wrap gap-3 justify-center starforge-my-6">
      <a
        href="{{ url_for('main.calendar_ics') }}"
        class="bg-yellow-400 text-black font-bold px-4 py-2 rounded shadow hover:bg-yellow-300 transition"
        download="ConnectATXElite.ics"
        >üì• Download iCal (Apple/Outlook)</a
      >
      <a
        href="https://calendar.google.com/calendar/r?cid={{ request.url_root ~ 'calendar.ics' | urlencode }}"
        target="_blank"
        rel="noopener"
        class="bg-blue-500 text-white font-bold px-4 py-2 rounded shadow hover:bg-blue-600 transition"
      >
        üìÖ Add to Google Calendar</a
      >
      <a
        href="{{ url_for('main.calendar_ics') }}"
        class="bg-gray-800 text-yellow-300 font-bold px-4 py-2 rounded shadow hover:bg-yellow-500 hover:text-black transition"
        download="ConnectATXElite.ics"
        >üçè Add to Apple Calendar</a
      >
    </div>
    <!-- ========== ABOUT, MISSION & CHALLENGE (Unified Elite Block) ========== -->
    {% include 'partials/about_and_mission.html' %} {% include
    'partials/about_and_mission.html' %}
    <script>
      // Animate all counters and the funding bar on DOM ready
      document.addEventListener("DOMContentLoaded", () => {
        function animateCounter(el, target, duration = 1200) {
          let start = 0,
            startTime = performance.now();
          function update(now) {
            let progress = Math.min((now - startTime) / duration, 1);
            el.textContent = Math.floor(progress * target);
            if (progress < 1) requestAnimationFrame(update);
            else el.textContent = target;
          }
          requestAnimationFrame(update);
        }

        document.querySelectorAll(".counter").forEach((el, i) => {
          const target = parseInt(el.dataset.target, 10) || 0;
          setTimeout(() => animateCounter(el, target), i * 150);
        });

        // Funding bar animation
        const funded =
          parseFloat(document.getElementById("gym-funded").textContent) || 0;
        const bar = document.getElementById("funding-bar").querySelector("div");
        setTimeout(() => {
          bar.style.width = `${funded}%`;
        }, 300);
      });

      // Toggle testimonial popover
      function toggleTestimonialPop() {
        const btn = document.getElementById("testimonial-more-btn");
        const pop = document.getElementById("testimonial-pop");
        const expanded = btn.getAttribute("aria-expanded") === "true";
        btn.setAttribute("aria-expanded", !expanded);
        pop.classList.toggle("hidden", expanded);
        pop.setAttribute("aria-hidden", expanded);
        if (!expanded) pop.focus();
      }
    </script>
    <!-- =========== TIERS BLOCK (Starforge Elite Polish) =========== -->
    {% include 'partials/about_and_mission.html' %}
    <!-- =========== TESTIMONIALS (Starforge Animated Carousel) =========== -->
    {% include 'partials/about_and_mission.html' %}
    <!-- =========== SPONSOR SPOTLIGHT WALL (Starforge Elite) =========== -->
    {% include 'partials/about_and_mission.html' %}
    <!-- =========== DIGITAL HUB (AI + Admin Widgets, Starforge Edition) =========== -->
    {% include 'partials/about_and_mission.html' %} {% include
    'partials/about_and_mission.html' %}
    <p class="mt-4 text-xs text-yellow-400/80 text-starforge-center">
      <b>Pro Tip:</b> Export analytics for board/sponsor reports ‚Äî or
      <span
        class="underline cursor-pointer hover:text-starforge-yellow-300"
        onclick="trackWidgetClick('export_analytics')"
        >download now</span
      >.
    </p>
    <button
      class="mt-6 w-full py-3 rounded-full bg-yellow-400 text-black font-bold shadow hover:bg-yellow-300 transition focus-visible:ring-2 focus-visible:ring-yellow-300"
      onclick="alert('Widget marketplace coming soon! Want a custom dashboard? Contact us!')"
    >
      ‚ûï Add Widget or Request Feature
    </button>
    {% endif %}
    <script>
      // Starforge sparkle for AI button
      function sparkleAIBtn(btn) {
        const icon = document.getElementById("ai-sparkle");
        if (icon) {
          icon.classList.remove("hidden");
          setTimeout(() => icon.classList.add("hidden"), 900);
        }
      }
      // Widget pulse on click
      function pulseWidget(widget) {
        const count = widget.querySelector(".widget-count");
        if (count) {
          count.classList.add("pulse");
          setTimeout(() => count.classList.remove("pulse"), 700);
        }
      }
      // Event tracking for widgets (robust for SaaS)
      function trackWidgetClick(name) {
        if (window.gtag) {
          window.gtag("event", "widget_click", {
            event_category: "Dashboard",
            event_label: name,
          });
        } else {
          console.log("Widget click:", name);
        }
      }
    </script>
    <!-- =========== PROGRAM STATS (Animated, Elite, Starforge Edition) =========== -->
    {% include 'partials/about_and_mission.html' %}
    <!-- ========== GAME & EVENT CALENDAR (Elite, Interactive, PRO) ========== -->
    {% include 'partials/about_and_mission.html' %}
    <!-- =========== WATCH OUR STORY MODAL (STARFORGE ELITE, ANIMATED, ACCESSIBLE) =========== -->
    <div class="text-center starforge-my-16">
      <button
        id="starforge-storyBtn"
        type="button"
        class="inline-flex items-center gap-3 bg-gradient-to-r from-yellow-300 via-yellow-400 to-yellow-300 text-black font-black px-10 py-4 rounded-full shadow-lg hover:scale-105 hover:shadow-yellow-400/50 focus:ring-4 ring-yellow-300 transition-all text-lg md:text-xl animate-pulse"
        aria-haspopup="dialog"
        aria-controls="storyModal"
        aria-expanded="false"
      >
        ‚ñ∂Ô∏è <span class="hidden sm:starforge-inline">Watch Our Story</span>
      </button>
    </div>
    <dialog
      id="starforge-storyModal"
      class="p-0 rounded-3xl overflow-hidden shadow-2xl bg-black/95 backdrop-blur-lg max-w-3xl w-full mx-auto border-4 border-yellow-400/70 transition-all scale-95 opacity-0"
      role="dialog"
      aria-modal="true"
      aria-labelledby="story-modal-title"
      aria-hidden="true"
    >
      <button
        type="button"
        onclick="closeStoryModal()"
        class="absolute top-4 right-4 text-white text-4xl hover:text-yellow-300 focus:ring-2 ring-yellow-300 z-50"
        aria-label="Close video modal"
      >
        √ó
      </button>
      <div class="flex flex-col items-center p-0 md:p-6 animate-fade-in-down">
        <h2
          id="starforge-story-modal-title"
          class="text-2xl md:text-3xl font-extrabold bg-gradient-to-r from-yellow-300 via-yellow-400 to-yellow-300 bg-clip-text text-transparent mb-3 mt-5 md:mt-0 text-center drop-shadow-xl animate-shine"
        >
          Our Story: On & Off The Court
        </h2>
        <!-- Video Tabs -->
        <div
          class="flex gap-3 md:gap-5 mb-5 flex-wrap justify-center"
          role="tablist"
        >
          <button
            id="starforge-tab-myvideo"
            role="tab"
            aria-controls="story-video-myvideo"
            aria-selected="true"
            class="py-2 px-5 rounded-full font-semibold shadow bg-yellow-400 text-black hover:scale-105 transition"
          >
            üé• Team Video
          </button>
          <button
            id="starforge-tab-kvue"
            role="tab"
            aria-controls="story-video-kvue"
            aria-selected="false"
            class="py-2 px-5 rounded-full font-semibold shadow bg-zinc-800 text-yellow-300 hover:bg-yellow-900 hover:scale-105 transition"
          >
            üì∫ KVUE News
          </button>
          <button
            id="starforge-tab-youtube"
            role="tab"
            aria-controls="story-video-youtube"
            aria-selected="false"
            class="py-2 px-5 rounded-full font-semibold shadow bg-zinc-800 text-yellow-300 hover:bg-yellow-900 hover:scale-105 transition"
          >
            üèÄ YouTube
          </button>
        </div>
        <!-- Video Panels -->
        <div
          id="starforge-story-video-myvideo"
          role="tabpanel"
          aria-labelledby="tab-myvideo"
          class="w-full max-w-2xl aspect-video mx-auto block"
        >
          <video
            controls=""
            poster="{{ url_for('static', filename='images/connect-atx-team.jpg') }}"
            class="rounded-xl border-4 border-yellow-300 shadow-lg w-full h-auto bg-black"
          >
            <source
              src="{{ url_for('static', filename='connect-atx-story.mp4') }}"
              type="video/mp4"
            />
            Sorry, your browser doesn‚Äôt support embedded videos.
          </video>
        </div>
        <div
          id="starforge-story-video-kvue"
          role="tabpanel"
          aria-labelledby="tab-kvue"
          class="w-full max-w-2xl aspect-video mx-auto hidden"
        >
          <iframe
            src="https://www.kvue.com/embeds/video/responsive/269-beeecfc1-eb68-4cca-8ec5-417b66d8cbfa/iframe"
            width="100%"
            height="360"
            class="border-2 border-yellow-300 rounded-xl"
            allowfullscreen
          ></iframe>
        </div>
        <div
          id="starforge-story-video-youtube"
          role="tabpanel"
          aria-labelledby="tab-youtube"
          class="w-full max-w-2xl aspect-video mx-auto hidden"
        >
          <iframe
            src="https://www.youtube.com/embed/dQw4w9WgXcQ"
            width="100%"
            height="360"
            class="border-2 border-yellow-300 rounded-xl"
            allowfullscreen
          ></iframe>
        </div>
        <div class="mt-5 text-xs text-zinc-300 text-starforge-center">
          <strong class="text-starforge-yellow-300">Connect ATX Elite</strong>
          | Family-run. Community-powered. Champions rising.
        </div>
      </div>
    </dialog>
    <script>
      (() => {
        const storyBtn = document.getElementById("storyBtn");
        const modal = document.getElementById("storyModal");
        const tabs = modal.querySelectorAll('[role="tab"]');
        const panels = modal.querySelectorAll('[role="tabpanel"]');
        let lastFocusedEl;

        function openModal() {
          lastFocusedEl = document.activeElement;
          modal.showModal();
          modal.classList.remove("scale-95", "opacity-0");
          modal.classList.add("scale-100", "opacity-100");
          modal.setAttribute("aria-hidden", "false");
          storyBtn.setAttribute("aria-expanded", "true");
          tabs[0].focus();
        }

        function closeModal() {
          modal.classList.add("scale-95", "opacity-0");
          setTimeout(() => {
            modal.close();
            modal.setAttribute("aria-hidden", "true");
            storyBtn.setAttribute("aria-expanded", "false");
            lastFocusedEl?.focus();
          }, 200);
        }

        storyBtn.addEventListener("click", openModal);
        modal
          .querySelector('[aria-label="Close video modal"]')
          .addEventListener("click", closeModal);

        tabs.forEach((tab) => {
          tab.addEventListener("click", () => activateTab(tab));
        });

        function activateTab(selectedTab) {
          tabs.forEach((tab) => {
            tab.setAttribute("aria-selected", "false");
            tab.classList.replace("bg-yellow-400", "bg-zinc-800");
            tab.classList.replace("text-black", "text-yellow-300");
          });
          panels.forEach((panel) => panel.classList.add("hidden"));
          selectedTab.setAttribute("aria-selected", "true");
          selectedTab.classList.replace("bg-zinc-800", "bg-yellow-400");
          selectedTab.classList.replace("text-yellow-300", "text-black");
          document
            .getElementById(selectedTab.getAttribute("aria-controls"))
            .classList.remove("hidden");
        }
      })();
    </script>
    <!-- =========== ELITE SITE FOOTER (STARFORGE ENHANCED) =========== -->
    <footer
      id="starforge-site-footer"
      class="connect-footer bg-black text-yellow-300 shadow-inner"
      role="contentinfo"
    >
      <div class="footer-starforge-grid">
        <!-- Column 1: Brand -->
        {% include 'partials/about_and_mission.html' %}
        <!-- Column 2: Progress + Links -->
        {% include 'partials/about_and_mission.html' %}
        <!-- Column 3: Contact + Countdown -->
        {% include 'partials/about_and_mission.html' %}
      </div>
      <div class="starforge-starforge-supporters">
        <b>Recent Supporters:</b> Acme Corp ‚Ä¢ Jane D. ‚Ä¢ Smith & Co ‚Ä¢ Austin
        Hoops
      </div>
      <script>
        // Countdown timer for next event
        (function () {
          const target = new Date("2025-07-01T10:00:00Z");
          const el = document.getElementById("countdown-timer");
          function update() {
            const now = new Date(),
              diff = target - now;
            if (diff <= 0) {
              el.textContent = "Tournament is live!";
              return;
            }
            const d = Math.floor(diff / 86400000),
              h = Math.floor((diff % 86400000) / 3600000),
              m = Math.floor((diff % 3600000) / 60000),
              s = Math.floor((diff % 60000) / 1000);
            el.textContent = `${d}d ${h}h ${m}m ${s}s`;
          }
          update();
          setInterval(update, 1000);
        })();
      </script>
    </footer>
    {% endblock %}
  </body>
</html>
