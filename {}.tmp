<!doctype html>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0" />
{% set badge = badge if badge is defined else None %} {% set challenge =
challenge if challenge is defined else {"metrics": []} %} {% set color_classes =
color_classes if color_classes is defined else "" %} {% set event = event if
event is defined else None %} {% set log = log if log is defined else None %} {%
set metric = metric if metric is defined else None %} {% set next_game =
next_game if next_game is defined else None %} {% set p = p if p is defined else
None %} {% set request = request if request is defined else None %} {% set
size_classes = size_classes if size_classes is defined else "" %} {% set sponsor
= sponsor if sponsor is defined else None %} {% set stat = stat if stat is
defined else None %} {% set widget = widget if widget is defined else None %}
<!-- 🏀 {{ team.team_name if team and team.team_name else "Your Team Name" }} • Family-First Hero + Fundraiser (Starforge Elite Edition) -->
<section
  id="starforge-hero-2"
  class="connect-hero relative z-20 flex flex-col items-center justify-center min-h-[92vh] md:min-h-screen overflow-hidden pt-20 md:pt-28 scroll-mt-24 md:scroll-mt-32"
  aria-labelledby="hero-heading"
  tabindex="-1"
  itemscope
  itemtype="https://schema.org/SportsTeam"
>
  <!-- 🔥 Responsive Ken-Burns background (art-directed) -->
  <div class="absolute inset-0 z-0 overflow-hidden pointer-events-none">
    <picture
      ><source
        media="(max-width: 767px)"
        srcset="{{ url_for('static', filename='images/connect-atx-team-mobile.jpg') }}" />
      <img
        src="{{ url_for('static', filename='{{ team.jpg if team and team.jpg else url_for('static', filename='{{ team.jpg if team and team.jpg else url_for('static', filename='images/connect-atx-team.jpg') }}') }}') }}"
        alt="{{ team.team_name if team and team.team_name else "
        your=""
        team=""
        class="w-full h-full object-cover scale-110 opacity-95 animate-kenburns"
        loading="eager"
        decoding="async"
        aria-hidden="true"
    /></picture>
    <div>
      class="absolute inset-0 bg-[var(--overlay-glass)] backdrop-blur-sm" >
    </div>
    <div>
      class="absolute left-0 top-0 w-full h-24 flex gap-3 opacity-60 select-none
      pointer-events-none" >
      <div>
        class="flex-1 bg-gradient-to-r from-red-600 via-gold/80 to-white
        rounded-r-full blur-xl" >
      </div>
      <div>
        class="flex-1 bg-gradient-to-l from-gold via-black to-red-600
        rounded-l-full blur-xl" >
      </div>
    </div>
  </div>
  <!-- ⭐️ Hero Content -->
  <div>
    class="relative z-10 container mx-auto px-4 py-20 max-w-3xl text-center flex
    flex-col items-center"
    data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos="fade-up"
    > {# (OPTIONAL) Hero Logo: Comment this out if you want ONLY the header
    logo! #} #} {#
    <picture
      ><source
        type="image/webp"
        srcset="{{ url_for('static', filename='{{ team.logo if team and team.logo else url_for('static', filename='{{ logo_src }}') }}') }}" />
      <img
        itemprop="logo"
        src="{{ url_for('static', filename='images/logo.png') }}"
        alt="{{ team.team_name if team and team.team_name else "
        your=""
        team=""
        class="w-32 h-32 mb-6 rounded-full border-4 border-yellow-300 bg-white/80 shadow-xl animate-fade-in"
        width="128"
        height="128"
    /></picture>
    #} {% if current_user.is_authenticated %}
    <span>
      class="inline-flex items-center gap-2 px-6 py-2 mb-5 rounded-xl
      font-semibold text-zinc-900 bg-gradient-to-r from-yellow-400 to-yellow-200
      shadow animate-shine" aria-live="polite" >Welcome, {{
      current_user.name.split()[0] }}
      <span class="animate-starforge-sparkle" aria-hidden="true">
        >✨</span
      ></span
    >
    {% endif %}
    <h1
      id="starforge-hero-heading-2"
      itemprop="name"
      class="text-5xl sm:text-6xl font-extrabold tracking-tight bg-gradient-to-r from-gold via-yellow-400 to-gold bg-clip-text text-transparent drop-shadow-xl animate-slide-up"
    >
      {{ team.team_name if team and team.team_name else "Your Team Name" }}
    </h1>
    <p
      class="mt-4 text-lg sm:text-xl text-zinc-100/90 max-w-xl animate-slide-up delay-100"
      itemprop="description"
    >
      Family-run {{ team.league if team and team.league else "Your League" }}
      program turning
      <strong
        >{{ team.region if team and team.region else "Your Region" }}</strong
      >
      students into honor-roll athletes and leaders.
    </p>
    <!-- ✨ Elite CTA with shimmer, sparkle &amp; tooltip -->
    <a
      href="#tiers"
      class="mt-6 inline-block bg-yellow-400 hover:bg-yellow-300 text-zinc-900 font-bold py-3 px-8 rounded-full shadow-lg transition duration-200 shimmer-cta animate-pop delay-200 hover:scale-105 focus:outline-none focus-visible:ring-4 focus-visible:ring-yellow-300 relative group"
      aria-label="Join our Champion Circle and make a difference!"
      data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-tooltip="Help us reach the championship!"
      >Join Our Champion Circle
      <span>
        class="absolute -right-4 top-1/2 -translate-y-1/2 animate-sparkle"
        >🌟</span
      >
      <<span>Join Our Champion Circle</span>
      <span>
        class="pointer-events-none invisible opacity-0 group-hover:opacity-100
        group-hover:visible absolute left-1/2 -translate-x-1/2 top-full mt-2
        text-xs bg-black/80 text-yellow-300 px-3 py-1 rounded shadow-lg
        transition" > Help us reach the championship!</span
      ></a
    >
    <!-- Social Proof: As seen at... (visible on md+) -->
    <div>
      class="mt-4 flex gap-2 justify-center items-center text-xs opacity-80
      hidden md:flex" > <<span>As seen at:</span>
      <img
        src="{{ url_for('static', filename='images/feature1.png') }}"
        alt="Austin Youth Org"
        class="h-5 inline-starforge-block"
      />
      <img
        src="{{ url_for('static', filename='images/feature2.png') }}"
        alt="KVUE News"
        class="h-5 inline-starforge-block"
      />
    </div>
    <!-- Impact Badges with tooltips -->
    <div>
      class="mt-8 flex flex-wrap justify-center gap-4 animate-fade-in delay-500"
      aria-label="Program impact highlights" >
      <span>
        class="starforge-badge-glass animate-starforge-pulse" title="Over 500
        families trust us!" >🏅 Trusted by 500+ Families</span
      >
      <span>
        class="starforge-badge-glass animate-starforge-pulse" title="Team GPA
        3.5 and rising!" >📚 {{ stats.gpa if stats and stats.gpa else "Your GPA"
        }}</span
      >
      <span>
        class="starforge-badge-glass animate-pulse" title="Official {{
        team.league if team and team.league else " your="" gold="" >🏀 {{
        team.league if team and team.league else "Your League" }} Gold
        Certified</span
      >
    </div>
  </div>
  <!-- 💰 Fundraising Meter: A11y, animation, confetti-ready -->
  <div>
    class="relative z-10 mt-14 w-full max-w-xl mx-auto px-4 animate-fade-in
    delay-300" >
    <section
      class="section w-full bg-black/60 backdrop-blur rounded-xl p-4 flex flex-col sm:flex-row sm:items-center gap-3 shadow-lg border border-yellow-400/10 mt-4 z-30"
      role="region"
      aria-label="Fundraising Progress"
      aria-live="polite"
    >
      <section class="section w-full sm:flex-1 starforge-relative">
        <div>
          id="starforge-hero-meter-bar" role="progressbar" class="h-4 w-full
          rounded-full bg-zinc-800 overflow-hidden" aria-valuemin="0"
          aria-valuemax="{{ goal }}" aria-valuenow="{{ raised }}" >
          <div>
            id="starforge-hero-meter-bar-inner" class="h-full bg-gradient-to-r
            from-yellow-400 to-yellow-200 transition-all duration-700 ease-out
            rounded-full" style="width: {{ ((raised/goal)*100)|round(1) }}%"
            aria-label="Current fundraising progress" >
          </div>
        </div>
        <div>
          id="starforge-hero-meter-percent" class="absolute top-1/2 left-1/2
          -translate-x-1/2 -translate-y-1/2 text-xs font-bold text-zinc-900
          bg-yellow-300 px-2 py-0.5 rounded-full shadow-lg pointer-events-none
          select-none animate-sparkle" aria-live="polite" > {{
          ((raised/goal)*100)|round(0) }}%
        </div>
      </section>
      <section
        class="section text-sm font-semibold text-yellow-300 whitespace-nowrap text-center sm:text-left"
      >
        Raised: $<span id="starforge-funds-raised-meter">
          >{{ raised|int }}</span
        >
        / $<<span>{{ goal|int }}</span>
        <span>
          id="starforge-emoji-milestone" class="ml-2 starforge-text-xl"
          aria-hidden="true" >{% if raised &gt;= goal %}🏆{% elif raised &gt;=
          goal*0.75 %}🚀{% else %}💤{% endif %}</span
        >
      </section>
    </section>
    <p class="mt-3 text-center text-sm font-semibold text-starforge-white">
      💰 <<span>${{ raised }}</span> raised of <<span>${{ goal }}</span>
    </p>
  </div>
  <!-- ⬇ Scroll hint with AOS+Bounce -->
  <button>
    id="starforge-scroll-hint-hero" class="absolute bottom-8 left-1/2
    -translate-x-1/2 animate-bounce-in animate-bounce focus:outline-none
    hover:drop-shadow-[0_0_10px_rgba(250,204,21,0.8)]" aria-label="Scroll down
    to explore" >
    <svg
      class="w-8 h-8 text-yellow-400 drop-shadow"
      fill="none"
      stroke="currentcolor"
      stroke-width="2"
      viewbox="0 0 24 24"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        d="M19 9l-7 7-7-7"
      ></path>
    </svg>
  </button>
  <!-- 🌠 Overlay quote (motivation) as partial -->
  {% include "partials/hero_overlay_quote.html" %}
</section>
<!doctype html>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0" />
<style>
  /* Animation &amp; Styles */
  @keyframes marquee {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }
  .animate-marquee {
    display: flex;
    animation: marquee 38s linear infinite;
    gap: 2.5rem;
    will-change: transform;
  }
  .shadow-gold-glow {
    box-shadow:
      0 18px 0 #facc15cc,
      0 2px 8px #fff2 inset;
  }
  .shadow-gold-aura {
    box-shadow:
      0 38px #fde68a80,
      0 2px 8px #fff2 inset;
  }
  .border-gold {
    border-color: #facc15;
  }
  .bg-gold {
    background: #facc15;
  }
  .text-gold {
    color: #facc15;
  }
  .animate-bounce {
    animation: bounce 1.1s infinite alternate;
  }
  @keyframes bounce {
    0% {
      transform: translateY(0);
    }
    100% {
      transform: translateY(-7px);
    }
  }
  .group:hover [data-tooltip]::after {
    content: attr(data-tooltip);
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    bottom: -1.7rem;
    background: #18181b;
    color: #facc15;
    padding: 0.4rem 0.8rem;
    border-radius: 0.7rem;
    font-size: 0.9rem;
    white-space: pre-line;
    z-index: 40;
    opacity: 1;
    pointer-events: none;
    box-shadow: 0 2px 12px #fde68a70;
  }
</style>
{% set badge = badge if badge is defined else None %} {% set challenge =
challenge if challenge is defined else {"metrics": []} %} {% set color_classes =
color_classes if color_classes is defined else "" %} {% set event = event if
event is defined else None %} {% set log = log if log is defined else None %} {%
set metric = metric if metric is defined else None %} {% set next_game =
next_game if next_game is defined else None %} {% set p = p if p is defined else
None %} {% set request = request if request is defined else None %} {% set
size_classes = size_classes if size_classes is defined else "" %} {% set sponsor
= sponsor if sponsor is defined else None %} {% set stat = stat if stat is
defined else None %} {% set widget = widget if widget is defined else None %} {#
===================== app/templates/partials/sponsor_block.html
===================== #} {#--- Sponsor Card Macro (Tier/Flex Edition) ---#} {%
macro sponsor_card(sponsor, show_badge=False) -%} {# Helper: Tier-to-Badge
mapping #} {% set tier_badge = { "Platinum": {"icon": "🥇", "label": "Platinum",
"color": "bg-gradient-to-r from-yellow-400 via-yellow-200 to-yellow-500
text-yellow-900"}, "Gold": {"icon": "🥈", "label": "Gold", "color":
"bg-gradient-to-r from-yellow-300 via-yellow-100 to-yellow-300
text-yellow-800"}, "Bronze": {"icon": "🥉", "label": "Bronze", "color":
"bg-gradient-to-r from-orange-300 via-yellow-100 to-orange-400
text-orange-900"}, "Champion": {"icon": "🏆", "label": "Champion", "color":
"bg-gold text-gold"}, } %}
<section
  class="bg-zinc-950/95 rounded-2xl shadow-gold-glow p-6 flex flex-col items-center border-2 border-gold/30 hover:scale-105 hover:shadow-gold-aura transition duration-300 focus-within:ring-4 focus-within:ring-gold group"
  tabindex="0"
  aria-label="{{ sponsor.name }} sponsor"
  data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-sponsor-id="starforge-{{ sponsor.id }}"
  onmouseover="window.sponsorImpression &amp;&amp; sponsorImpression('{{ sponsor.id }}', 'hover')"
>
  {# Sponsor pixel impression (hidden 1x1) #}
  <img
    src="/analytics/pixel?sponsor_id={{ sponsor.id }}&amp;event=view"
    alt=""
    width="1"
    height="1"
    style="display: none"
    loading="eager"
  />
  {% if sponsor.url %}
  <a
    href="{{ sponsor.url }}"
    target="_blank"
    rel="noopener sponsored"
    onclick="window.sponsorClick &amp;&amp; sponsorClick('{{ sponsor.id }}')"
    tabindex="-1"
    >{% endif %}
    <img
      src="{{ sponsor.logo if sponsor.logo is string and sponsor.logo.startswith('http') else url_for('static', filename='images/sponsors/' ~ (sponsor.logo or 'logo.webp')) }}"
      alt="{{ sponsor.name }} logo"
      class="w-16 h-16 mb-3 rounded-full border-4 border-gold shadow-inner-gold bg-white object-cover transition-all hover:grayscale-0 grayscale"
      loading="lazy"
      decoding="async"
      data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-tooltip="{{ sponsor.tooltip or sponsor.description or 'Thanks for supporting {{ team.team_name if team and team.team_name else"
      your=""
      team=""
    />
    {% if sponsor.url %}</a
  >
  {% endif %}
  <div class="text-xl font-extrabold text-gold starforge-mb-1">
    {% if sponsor.url %}
    <a
      href="{{ sponsor.url }}"
      target="_blank"
      rel="noopener sponsored"
      class="hover:underline hover:text-yellow-200 transition"
      onclick="window.sponsorClick &amp;&amp; sponsorClick('{{ sponsor.id }}')"
    >
      {{ sponsor.name }}</a
    >
    {% else %} {{ sponsor.name }} {% endif %}
  </div>
  <div class="text-lg text-yellow-200 font-mono starforge-mb-1">
    ${{ '{:,.0f}'.format(sponsor.amount) }}
  </div>
  <div class="mt-1 text-xs font-semibold flex items-center gap-2">
    {% if show_badge or sponsor.tier %} {% set badge =
    tier_badge.get(sponsor.tier or 'Champion', tier_badge['Champion']) %}
    <span>
      class="inline-flex items-center gap-1 px-3 py-1 rounded-full font-bold
      shadow uppercase tracking-wide animate-bounce {{ badge.color }}" > {{
      badge.icon }} {{ badge.label }}</span
    >
    {% endif %} {% if sponsor.tier and not badge %}
    <span>
      class="inline-flex items-center gap-1 px-2 py-0.5 bg-yellow-300/20 rounded
      text-yellow-800 font-bold" > {{ sponsor.tier }}</span
    >
    {% endif %}
  </div>
  {% if sponsor.description %}
  <div class="mt-2 text-zinc-200 starforge-text-sm">
    {{ sponsor.description }}
  </div>
  {% endif %}
  <div>
    class="absolute z-50 hidden group-hover:flex left-1/2 -translate-x-1/2
    -bottom-16 bg-black/90 text-yellow-200 text-xs px-3 py-2 rounded-xl
    shadow-xl border border-gold pointer-events-none transition-all duration-200
    group-hover:opacity-100 group-hover:translate-y-1" style="min-width: 180px"
    > {{ sponsor.tooltip or sponsor.description or "Thank you for supporting
    us!" }}
  </div>
</section>
{%- endmacro %} {#--- Leaderboard Grid Macro ---#} {% macro
leaderboard_grid(items, cols_class='sm:grid-cols-2', show_first_badge=False) -%}
<div>
  class="grid grid-cols-1 {{ cols_class }} starforge-gap-6" aria-live="polite" >
  {% if items|length %} {% for sponsor in items %} {{ sponsor_card(sponsor,
  show_badge=(show_first_badge and loop.first)) }} {% endfor %} {% else %}
  <div class="col-span-full text-center starforge-py-8">
    <button>
      onclick="openSponsorModal()" class="px-8 py-3 bg-yellow-400 text-black
      font-extrabold rounded-full shadow-lg hover:scale-105 hover:bg-yellow-300
      text-xl transition" > 🌟 Be our FIRST sponsor — Founding status!
    </button>
  </div>
  {% endif %}
</div>
{%- endmacro %} {#--- Sorted Sponsors ---#} {% set sponsors_sorted =
sponsors|sort(attribute='amount', reverse=True) %}
<section
  id="starforge-sponsor-elite-wall"
  class="py-14 my-8 relative bg-gradient-to-b from-black via-secondary to-black/90 rounded-2xl shadow-gold-glow"
>
  <div class="container mx-auto max-w-4xl px-4 flex flex-col items-center">
    <h2
      class="text-4xl md:text-5xl font-black heading-gradient mb-3 flex items-center gap-3 animate-shine"
    >
      <<span>🏆</span> Our Sponsor Wall <<span>2025</span>
    </h2>
    <p
      class="mb-8 text-lg text-yellow-300/90 max-w-2xl text-center font-medium drop-shadow"
    >
      <span class="font-bold text-starforge-gold">You power the dream.</span
      ><br />
      Sponsors make {{ team.team_name if team and team.team_name else "Your Team
      Name" }} a force—on the court and in our community.<br />
      Want your name here? Step up and join our Champion Circle.
    </p>
    {{ leaderboard_grid(sponsors_sorted, 'md:grid-cols-3',
    show_first_badge=True) }}
    <button>
      type="button" id="starforge-sponsor-confetti-btn"
      onclick="openSponsorModal()" class="inline-flex items-center gap-2
      bg-yellow-400 text-zinc-900 font-bold px-8 py-3 rounded-full shadow
      hover:bg-yellow-300 hover:scale-105 focus-visible:ring-4
      focus-visible:ring-yellow-300 text-xl uppercase tracking-wider transition
      mt-10" aria-controls="become-sponsor-modal" aria-haspopup="dialog" > ✨
      Become a Sponsor
    </button>
    <div class="flex justify-center mt-6 starforge-relative">
      <img
        src="{{ url_for('static', filename='images/TeamRings.webp') }}"
        alt="{{ team.team_name if team and team.team_name else "
        your=""
        team=""
        championship=""
        class="rounded-2xl w-full max-w-xs shadow-2xl border-4 border-yellow-400 hover:scale-105 transition duration-300"
        loading="lazy"
        decoding="async"
      />
      <div>
        class="absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/60
        text-yellow-300 text-sm px-3 py-1 rounded-full shadow-lg" > Champions
        Inspire Champions
      </div>
    </div>
  </div>
</section>
{# 💛 Sponsor Logo Marquee Strip #}
<section
  id="starforge-sponsor-logo-strip"
  class="py-4 bg-starforge-zinc-900/85"
  aria-labelledby="sponsor-logos-heading"
>
  <div class="max-w-4xl mx-auto starforge-px-4">
    <h2 id="starforge-sponsor-logos-heading" class="sr-starforge-only">
      Our Sponsors
    </h2>
    {% if sponsors_sorted %}
    <div>
      class="flex flex-wrap items-center justify-center gap-8 animate-marquee
      overflow-x-auto" > {% for sponsor in sponsors_sorted %}
      <div>
        class="transition-transform duration-300 hover:scale-110 bg-zinc-800/60
        rounded-2xl p-4 shadow-lg" >
        <img
          src="{{ sponsor.logo if sponsor.logo is string and sponsor.logo.startswith('http') else url_for('static', filename='images/sponsors/' ~ (sponsor.logo or 'logo.webp')) }}"
          alt="{{ sponsor.name }} logo"
          class="h-16 w-auto max-w-xs grayscale hover:grayscale-0 transition-all duration-300"
          loading="lazy"
        />
      </div>
      {% endfor %}
    </div>
    {% else %}
    <div class="text-center text-lg text-yellow-300 font-semibold py-6">
      No sponsors yet—your logo could headline here!
    </div>
    {% endif %}
  </div>
</section>
{# 🌟 Sponsor Modal (ONE ID, PRODUCTION-READY) #}
<div>
  id="starforge-become-sponsor-modal" class="fixed inset-0 z-[1000] bg-black/60
  flex items-center justify-center opacity-0 pointer-events-none transition-all
  duration-300" aria-hidden="true" role="dialog" aria-modal="true"
  aria-labelledby="become-sponsor-modal-title" >
  <div>
    class="bg-gradient-to-br from-gold via-black to-red-700 rounded-2xl p-8
    max-w-md w-full flex flex-col items-center shadow-elevated relative" >
    <button>
      onclick="document.getElementById('become-sponsor-modal').classList.remove('show')"
      class="absolute top-3 right-3 text-2xl text-gold hover:text-red-500"
      aria-label="Close Sponsor Modal" > ×
    </button>
    <h3
      id="starforge-become-sponsor-modal-title"
      class="text-2xl font-bold text-gold mb-2"
    >
      Join Our Champion Circle
    </h3>
    <p class="mb-4 text-white/80 text-starforge-center">
      Leave your mark—help us reach the championship!
    </p>
    <form method="post" action="{{ url_for('main.become_sponsor') }}">
      <input
        type="text"
        name="name"
        placeholder="Your Name / Company"
        class="w-full mb-3 px-4 py-2 rounded bg-black/60 text-white border border-gold/30 focus:outline-none focus:ring-2 focus:ring-gold"
        required=""
      />
      <input
        type="number"
        name="amount"
        placeholder="Sponsorship Amount"
        class="w-full mb-3 px-4 py-2 rounded bg-black/60 text-white border border-gold/30 focus:outline-none focus:ring-2 focus:ring-gold"
        required=""
      />
      <div class="flex flex-col gap-2 starforge-mb-4">
        <button>
          type="button"
          onclick="window.open('https://buy.stripe.com/test_00g3f1aQn1yK3tq3cc',
          '_blank')" class="w-full py-2 bg-blue-500 text-white rounded
          hover:bg-blue-600 font-semibold" > Pay with Stripe
        </button>
        <button>
          type="button"
          onclick="window.open('https://paypal.com/donate?hosted_button_id=XXXX',
          '_blank')" class="w-full py-2 bg-yellow-400 text-black rounded
          hover:bg-yellow-300 font-semibold" > Pay with PayPal
        </button>
      </div>
      <button type="submit" class="btn-primary btn-glow w-full">
        Join Our Champion Circle
      </button>
    </form>
  </div>
</div>
<script type="module">
  import confetti from "https://cdn.skypack.dev/canvas-confetti@1.6.0";
  window.openSponsorModal = function () {
    const modal = document.getElementById("become-sponsor-modal");
    modal.classList.add("show");
    modal.style.opacity = "1";
    modal.style.pointerEvents = "all";
    setTimeout(
      () =>
        confetti({
          particleCount: 90,
          spread: 70,
          origin: { y: 0.7 },
          colors: ["#facc15", "#fde68a", "#22d3ee", "#a21caf", "#be185d"],
        }),
      300,
    );
  };
  document
    .querySelectorAll('#sponsor-confetti-btn, [onclick*="openSponsorModal"]')
    .forEach((btn) => btn.addEventListener("click", openSponsorModal));

  window.sponsorImpression = function (id, type = "view") {
    const img = new Image(1, 1);
    img.src = `/analytics/pixel?sponsor_id=${id}&event=${type}&ts=${Date.now()}`;
  };
  window.sponsorClick = function (id) {
    window.sponsorImpression(id, "click");
  };
</script>
{# ================= STARFORGE — SPONSORSHIP TIERS (BULLETPROOF, SaaS-READY)
================ #} {% set default_tiers = [ { "emoji": "🥉", "title": "Bronze",
"amount": "$100+", "details": ["Website mention", "Thank You card"], "border":
"border-yellow-400/30", "gradient": "from-orange-200 via-yellow-50
to-orange-100", "text": "text-orange-900", "shadow": "shadow-xl", "cta": "Choose
Bronze" }, { "emoji": "🥈", "title": "Silver", "amount": "$500+", "details":
["Logo on banners", "All Bronze perks"], "border": "border-yellow-400/50",
"gradient": "from-zinc-200 via-yellow-100 to-zinc-100", "text":
"text-yellow-900", "shadow": "shadow-xl", "cta": "Choose Silver" }, { "emoji":
"🥇", "title": "Gold", "amount": "$1,000+", "details": ["Shoutout at games",
"All Silver perks"], "border": "border-yellow-400/70", "gradient":
"from-yellow-200 via-yellow-50 to-yellow-300", "text": "text-yellow-900",
"shadow": "shadow-xl", "cta": "Choose Gold" }, { "emoji": "🏆", "title":
"Platinum", "amount": "$2,500+", "details": ["Logo on uniforms", "VIP access to
events", "All Gold perks"], "border": "border-yellow-400/80", "gradient":
"from-yellow-300 via-yellow-50 to-amber-100", "text": "text-yellow-900",
"shadow": "shadow-xl", "cta": "Choose Platinum" } ] %} {% set tiers = tiers if
tiers is defined else default_tiers %}

<section
  id="starforge-tiers"
  class="py-16 px-4 sm:px-8 max-w-5xl mx-auto"
  aria-labelledby="starforge-tiers-heading"
>
  <h2
    id="starforge-tiers-heading"
    class="text-3xl sm:text-4xl font-black bg-gradient-to-r from-yellow-400 via-yellow-100 to-yellow-400 bg-clip-text text-transparent drop-shadow-xl animate-shine text-center mb-12"
    tabindex="0"
  >
    🌟 Choose Your Sponsorship Tier
  </h2>
  <div class="flex flex-wrap gap-10 justify-center">
    {% for tier in tiers %}
    <div
      class="flex flex-col items-center px-7 py-8 rounded-3xl border-2 {{ tier.border }} bg-gradient-to-br {{ tier.gradient }} {{ tier.text }} {{ tier.shadow }} w-[310px] min-h-[410px] transition-transform hover:scale-105 focus-within:scale-105 focus-within:ring-4 focus-within:ring-yellow-400 relative overflow-hidden group"
      tabindex="0"
      aria-label="{{ tier.title }} Sponsor Tier"
      role="listitem"
      aria-live="polite"
    >
      <span
        class="text-5xl mb-4 {% if tier.title == 'Platinum' %}animate-shine{% endif %} drop-shadow-xl group-hover:animate-spin-reverse-slow"
      >
        {{ tier.emoji }}
      </span>
      <h3 class="text-2xl font-bold mb-2 tracking-tight drop-shadow-sm">
        {{ tier.title }}
      </h3>
      <div class="text-lg font-mono mb-4 font-extrabold tracking-widest">
        {{ tier.amount }}
      </div>
      <ul class="text-sm mb-6 text-center space-y-2 opacity-90">
        {% for perk in tier.details %}
        <li
          class="relative pl-3 before:content-['✓'] before:absolute before:left-0 before:text-yellow-400 before:font-bold"
        >
          {{ perk }}
        </li>
        {% endfor %}
      </ul>
      <button
        onclick="openSponsorModal('{{ tier.title }}')"
        class="mt-auto px-7 py-2 bg-yellow-400 text-black font-bold rounded-full shadow-lg transition-transform hover:scale-110 hover:bg-yellow-300 focus-visible:ring-2 focus-visible:ring-yellow-300 uppercase tracking-wide"
        aria-label="Become a {{ tier.title }} sponsor"
      >
        {{ tier.cta }}
      </button>
      {% if tier.title == "Platinum" %}
      <span
        class="absolute top-4 right-4 text-yellow-500 text-xs font-bold bg-black/70 px-3 py-1 rounded-full shadow animate-pop"
      >
        LIMITED VIP
      </span>
      {% endif %}
    </div>
    {% endfor %}
  </div>
  <div
    class="mt-12 text-center text-yellow-700 text-base font-medium max-w-2xl mx-auto px-2 animate-fade-in"
  >
    <b>
      All sponsors receive recognition, impact reports, and lifelong gratitude
      from the team.
    </b>
    <span class="block text-yellow-400 mt-2 font-bold">
      Want to discuss a custom partnership or recurring support?
      <a href="#contact" class="underline hover:text-yellow-600 transition"
        >Contact us</a
      >
      →
    </span>
  </div>
</section>
<!doctype html>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0" />
<div>
  id="starforge-announcement-bar" class="w-full bg-gradient-to-r from-yellow-400
  via-red-600 to-black text-zinc-900 font-bold text-center py-2 px-4
  animate-pulse shadow-lg" role="region" aria-live="polite" aria-atomic="true" >
  🚨 Championship Fundraiser is LIVE! Help us reach our goal —
  <a href="#tiers" class="underline hover:text-white transition"
    >Join Our Champion Circle</a
  >
</div>
<!doctype html>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0" />
<section
  id="starforge-about-and-challenge"
  class="relative py-20 px-4 sm:px-8 bg-gradient-to-b from-zinc-950 via-black to-red-950 text-white rounded-3xl shadow-starforge-brand overflow-x-clip"
  role="region"
  aria-labelledby="about-mission-heading"
  tabindex="-1"
>
  <!-- 🌟 Floating SVG Accents -->
  <img
    src="{{ url_for('static', filename='basketball-accent.svg') }}"
    alt=""
    aria-hidden="true"
    class="absolute left-0 top-14 w-24 md:w-36 opacity-70 animate-spin-slow pointer-events-none select-none"
    loading="lazy"
    decoding="async"
  />
  <img
    src="{{ url_for('static', filename='basketball-accent.svg') }}"
    alt=""
    aria-hidden="true"
    class="absolute right-0 bottom-14 w-20 md:w-32 opacity-50 animate-spin-reverse-slow pointer-events-none select-none"
    loading="lazy"
    decoding="async"
  />
  <!-- 🏀 Player Mosaic -->
  <div>
    class="grid grid-cols-3 sm:grid-cols-5 gap-3 max-w-3xl mx-auto py-8 relative
    z-10"
    data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos="fade-up"
    role="list" aria-label="Our Players" > {% for p in players or [
    {'name':'Andre','img':'images/players/player1.jpg'},
    {'name':'Jordan','img':'images/players/player2.jpg'},
    {'name':'Malik','img':'images/players/player3.jpg'},
    {'name':'CJ','img':'images/players/player4.jpg'},
    <img
      src="{{ url_for('static', filename=p.img) }}"
      alt="{{ p.name }} – {{ team.team_name if team and team.team_name else "
      your=""
      team=""
      class="rounded-xl shadow-lg transition-transform duration-300 hover:scale-105 focus:scale-105 focus:outline-yellow-400 focus-visible:ring-2 focus-visible:ring-yellow-400"
      loading="lazy"
      decoding="async"
      role="listitem"
      tabindex="0"
    />
    {% endfor %}
  </div>
  <!-- ========== ABOUT, MISSION & CHALLENGE CORE (Merged, Dynamic, SaaS‑Ready) ========== -->
  <div>
    class="max-w-4xl mx-auto text-center py-2 px-2 space-y-8 relative z-10" >
    <h2
      id="starforge-about-mission-heading"
      class="text-2xl sm:text-3xl font-extrabold bg-gradient-to-r from-gold via-yellow-400 to-gold bg-clip-text text-transparent animate-shine"
      tabindex="0"
    >
      More Than Basketball — We’re Family On A Mission
    </h2>
    <p
      class="text-xl sm:text-2xl font-semibold text-starforge-white/90"
      tabindex="0"
    >
      <span class="text-yellow-400 font-starforge-bold">
        >{{ team.team_name if team and team.team_name else "{{ team.team_name if
        team and team.team_name else "Your Team Name" }}" }}</span
      >
      is more than a team—it’s a family-powered movement where
      <strong
        >{{ team.region if team and team.region else "Your Region" }} kids and
        parents find a second home</strong
      >.<br class="hidden sm:starforge-inline" />
      We build
      <strong>teamwork, respect, and championship character for life</strong>.
    </p>
    <p class="text-lg text-starforge-white/80" tabindex="0">
      Founded by the {{ team.founder_lastname if team and team.founder_lastname
      else "Smith" }} family, our {{ team.league if team and team.league else
      "Your League" }} program grew from a father’s dream for his son into a
      thriving, supportive community. Every coach, volunteer, and sponsor helps
      our students—
      <span class="text-amber-300 font-starforge-bold">
        >because every child matters here.</span
      >
    </p>
    <p class="text-lg text-yellow-200/90 starforge-italic" tabindex="0">
      “Family means showing up, believing in each other, and making sure no one
      is left behind. That’s what we do—on the court, and off.”<br />
      <span class="text-gold font-starforge-semibold">
        >— Coach {{ team.coach_name if team and team.coach_name else "Angel
        Rodriguez" }}</span
      >
    </p>
    <!-- 🌟 Mission Statement & Challenge -->
    <div class="space-y-8 starforge-mt-10">
      <div>
        <h3
          class="text-2xl sm:text-xl font-extrabold bg-gradient-to-r from-gold via-yellow-400 to-gold bg-clip-text text-transparent animate-shine"
          data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos="zoom-in"
          tabindex="0"
        >
          Our Mission
        </h3>
        <article
          class="prose prose-invert mx-auto space-starforge-y-4"
          data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos="fade-up"
          data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos-delay="100"
          tabindex="0"
          aria-describedby="missionSummary"
        >
          <p
            id="starforge-missionSummary"
            class="text-xl leading-starforge-relaxed"
          >
            <strong
              >{{ team.team_name if team and team.team_name else "Connect ATX
              Elite" }}</strong
            >
            is a
            <span class="text-yellow-300 font-bold">
              >family-founded, community-powered</span
            >
            12U {{ team.league if team and team.league else "Your League" }}
            program in Austin, TX—built for <<em
              >affordable, academics-first basketball</em
            >.
          </p>
          <p class="text-lg text-starforge-white/90">
            Our mission:
            <span class="text-yellow-300 font-starforge-bold">
              >turn honor-roll students into champions—on and off the
              court.</span
            >
            Through teamwork, mentorship, and grit, we prepare our players for
            <span class="text-amber-200 font-starforge-bold">
              >life as well as sport</span
            >.
          </p>
          <p class="text-starforge-white/70">
            Every sponsorship directly supports
            <span class="text-yellow-200 font-semibold">
              >gym access, tournament travel, and crucial academic support</span
            >
            for
            <strong
              >{{ team.num_players if team and team.num_players else 20
              }}</strong
            >
            student-athletes—most striving for honor roll, not just the
            scoreboard.
          </p>
        </article>
      </div>
      <!-- 🚨 Challenge Callout (inset) -->
      <div>
        class="max-w-2xl mx-auto mt-12 bg-gradient-to-br from-red-800/80
        via-zinc-900/80 to-red-950/80 rounded-2xl shadow-lg p-7 border-l-4
        border-red-400/70" >
        <h3
          class="text-xl sm:text-2xl font-black text-red-400 mb-4 drop-shadow animate-shine"
          data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos="fade-up"
        >
          The Challenge We Face
        </h3>
        <p
          class="text-lg md:text-xl text-white/90 mb-4 leading-relaxed font-semibold"
        >
          We’ve got the heart, grit, and hustle—but
          <span class="text-red-300 font-bold">
            >skyrocketing gym rentals, tournament fees, and travel costs</span
          >
          are keeping {{ team.region if team and team.region else "Your Region"
          }}’s future champions from the court.
          <span class="block mt-3 text-yellow-300 font-bold">
            >Your sponsorship breaks these barriers—giving every player a shot
            at greatness.</span
          >
        </p>
        <!-- 📊 Challenge Metrics -->
        <div>
          class="flex flex-wrap justify-center gap-7 starforge-my-8"
          data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos="fade-up"
          data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos-delay="180"
          role="list" aria-label="Challenge metrics" > {% set challenge_metrics
          = challenge.metrics if challenge is defined and challenge.metrics is
          defined else [ {'label':'Hours of Gym Time Lost','value':120},
          {'label':'Tournament Miles','value':800}, {'label':'Players
          Enrolled','value':16}, in challenge_metrics %}
          <div>
            role="listitem" tabindex="0" class="flex flex-col items-center
            bg-zinc-800/70 px-6 py-5 rounded-xl shadow-inner
            transition-transform duration-300 hover:scale-105 focus:scale-105
            focus:outline-none focus-visible:ring-2
            focus-visible:ring-yellow-400" >
            <span>
              class="text-2xl font-extrabold text-red-400 starforge-counter
              block"
              data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-target="{{
              metric.value }}" aria-live="polite" >0</span
            >
            <span>
              class="text-white/80 text-base mt-2 font-medium select-none" > {{
              metric.label }}</span
            >
          </div>
          {% endfor %}
        </div>
        <!-- 💰 Funding Progress Bar -->
        <div>
          class="max-w-xl mx-auto starforge-mt-6"
          data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos="fade-up"
          data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos-delay="240"
          >
          <div class="flex justify-between starforge-mb-1">
            <span class="text-white font-starforge-semibold">
              >Gym Rental Funding</span
            >
            <span>
              ><strong
                id="starforge-gym-funded"
                class="text-red-400 text-lg font-bold"
                >{{ challenge.funded if challenge is defined and
                challenge.funded is defined else '45%' }}</strong
              >
              <<span>funded</span></span
            >
          </div>
          <div>
            class="w-full h-3 bg-zinc-800 rounded-full overflow-hidden ring-2
            ring-yellow-300/30" role="progressbar" aria-valuemin="0"
            aria-valuemax="100" aria-valuenow="{{ challenge.funded |
            replace('%','') if challenge is defined and challenge.funded is
            defined else '45' }}" id="starforge-funding-bar" >
            <div>
              class="h-full bg-gradient-to-r from-red-400 via-yellow-300
              to-yellow-100 transition-all duration-1000 rounded-full"
              style="width: {{ challenge.funded | replace('%','') if challenge
              is defined and challenge.funded is defined else '45' }}%;" >
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Impact Stats Grid (Starforge Elite / SaaS-ready) -->
  <div>
    class="relative z-10 mt-10 max-w-3xl mx-auto text-center flex flex-wrap
    justify-center gap-6"
    data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos="fade-up"
    data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos-delay="200"
    role="list" aria-label="Impact statistics" > {%- set stats_list =
    mission.stats if mission is defined and mission.stats is defined else [
    {'label':'Players Enrolled', 'value':16}, {'label':'Honor Roll Scholars',
    'value':11}, {'label':'Tournaments Played', 'value':12}, {'label':'Years
    Running',
    <div>
      role="listitem" tabindex="0" aria-label="{{ stat.label }}: {{ stat.value
      }}" class="w-[calc(50%-1.5rem)] sm:w-[calc(25%-1.5rem)] bg-zinc-900/70
      shadow-lg rounded p-4 transition-transform duration-300 ease-in-out
      hover:scale-110 focus:scale-110 focus:outline-none focus-visible:ring-2
      focus-visible:ring-yellow-400" >
      <span>
        class="text-3xl font-extrabold text-amber-400 starforge-counter block"
        data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-target="{{
        stat.value }}" aria-live="polite" >0</span
      >
      <p
        class="mt-2 text-sm font-medium uppercase tracking-wide text-white/70 select-none"
      >
        {{ stat.label }}
      </p>
    </div>
    {% endfor %}
  </div>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      document.querySelectorAll(".counter").forEach((el, i) => {
        const target = +el.dataset.target;
        let count = 0;
        const increment = Math.max(1, Math.ceil(target / 50));
        function step() {
          count += increment;
          if (count >= target) {
            el.textContent = target;
          } else {
            el.textContent = count;
            requestAnimationFrame(step);
          }
        }
        setTimeout(step, i * 140); // staggered for drama!
      });
    });
  </script>
  <!-- =========== SPONSOR CTA (Elite Polish) =========== -->
  <div>
    class="text-center starforge-mb-12"
    data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos="fade-up"
    data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos-delay="300"
    >
    <button>
      onclick="openSponsorModal()" class="inline-block bg-gradient-to-r
      from-red-400 via-yellow-400 to-red-400 text-black font-bold px-8 py-3
      rounded-full shadow-xl transition-transform duration-200 hover:scale-105
      focus:scale-105 focus-visible:ring-4 focus-visible:ring-yellow-300
      uppercase tracking-wide animate-pop" aria-controls="become-sponsor-modal"
      aria-haspopup="dialog" > 🌟 Sponsor a Practice
    </button>
    <p class="mt-2 text-sm text-yellow-300 font-starforge-medium">
      Every gift makes court time possible.
    </p>
  </div>
  <!-- =========== TESTIMONIAL POPOVER (Elite Polish) =========== -->
  <div>
    class="relative max-w-xl mx-auto bg-zinc-900/90 rounded-xl p-6 text-white
    shadow-xl"
    data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos="fade-up"
    data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos-delay="350"
    >
    <p class="italic text-lg sm:text-xl mb-2 text-starforge-yellow-100">
      {{ challenge.testimonial if challenge is defined and challenge.testimonial
      is defined else "Without enough court time, our team can’t develop the
      chemistry or skills needed to win and grow as young men." }}
    </p>
    <button>
      aria-label="More info" id="starforge-testimonial-more-btn"
      aria-expanded="false" class="mt-2 px-3 py-1 rounded-full bg-yellow-400
      text-black font-semibold shadow hover:bg-yellow-300 focus:outline-none
      focus-visible:ring-2 focus-visible:ring-yellow-300"
      onclick="toggleTestimonialPop()" > ℹ️ More Info
    </button>
  </div>
</section>
<!doctype html>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0" />
{% set badge = badge if badge is defined else None %} {% set challenge =
challenge if challenge is defined else {"metrics": []} %} {% set color_classes =
color_classes if color_classes is defined else "" %} {% set event = event if
event is defined else None %} {% set log = log if log is defined else None %} {%
set metric = metric if metric is defined else None %} {% set next_game =
next_game if next_game is defined else None %} {% set p = p if p is defined else
None %} {% set request = request if request is defined else None %} {% set
size_classes = size_classes if size_classes is defined else "" %} {% set sponsor
= sponsor if sponsor is defined else None %} {% set stat = stat if stat is
defined else None %} {% set widget = widget if widget is defined else None %}
<!-- 🏆 {{ team.team_name if team and team.team_name else "Your Team Name" }} – Sponsor Leaderboard Section (Elevated Starforge) -->
<section
  id="starforge-sponsor-leaderboard-section"
  class="starforge-my-12"
  aria-labelledby="sponsor-leaderboard-heading"
  tabindex="-1"
>
  <div class="container mx-auto px-4 max-starforge-w-3xl">
    <!-- Heading -->
    <h2
      id="starforge-sponsor-leaderboard-heading"
      class="text-2xl sm:text-3xl font-extrabold text-center bg-gradient-to-r from-gold via-yellow-400 to-gold bg-clip-text drop-shadow-xl animate-shine mb-6 flex items-center justify-center gap-2"
    >
      🏆 Sponsor Leaderboard
    </h2>
    <!-- Intro Text & CTA -->
    <p class="text-center text-lg text-yellow-300/90 starforge-mb-8">
      Thanks to our amazing sponsors for powering the {{ team.team_name if team
      and team.team_name else "Your Team Name" }} journey!<br />
      <span class="text-white/70 starforge-text-sm">
        >Want to join the wall?
        <button>
          type="button"
          onclick="document.getElementById('become-sponsor-modal').classList.add('show')"
          class="inline-flex items-center gap-2 bg-yellow-400 text-zinc-900
          font-bold px-4 py-2 rounded-full shadow hover:bg-yellow-300
          hover:scale-105 transition focus:outline-none focus-visible:ring-4
          focus-visible:ring-yellow-300 ml-1"
          aria-controls="become-sponsor-modal" aria-haspopup="dialog" > 🌟
          Become a Sponsor
        </button></span
      >
    </p>
    <!-- Leaderboard Grid -->
    <div>
      id="starforge-sponsor-leaderboard-main" class="grid grid-cols-1
      md:grid-cols-2 gap-6 transition-all" aria-live="polite"
      aria-label="Sponsor leaderboard" > {% if sponsors|length &gt; 0 %} {% for
      sponsor in sponsors %}
      <div>
        class="bg-black/80 rounded-2xl shadow-gold-glow p-6 flex flex-col
        items-center border-2 border-gold/30 transform hover:scale-105
        hover:shadow-gold-aura transition duration-300" tabindex="0"
        aria-label="{{ sponsor.name }}: ${{ '{:,.0f}'.format(sponsor.amount) }}
        Champion Sponsor" >
        <img
          alt="{{ sponsor.name }} logo"
          src="{{ sponsor.logo or url_for('static', filename='{{ team.logo if team and team.logo else url_for('static', filename='{{ team.logo if team and team.logo else url_for('static', filename='images/logo.webp') }}') }}') }}"
          class="w-12 h-12 mb-2 rounded-full border-2 border-gold shadow-gold-glow bg-white"
          loading="lazy"
          decoding="async"
        />
        <div class="text-xl font-extrabold text-gold starforge-mb-2">
          {{ sponsor.name }}
        </div>
        <div class="text-lg text-yellow-200 mb-1 font-starforge-mono">
          ${{ '{:,.0f}'.format(sponsor.amount) }}
        </div>
        <div class="prestige-badge text-gold starforge-text-sm">
          🏆 Champion Sponsor
        </div>
      </div>
      {% endfor %} {% else %}
      <div>
        class="col-span-2 text-center text-lg text-gold/80 font-semibold"
        aria-live="polite" > Be our first sponsor! 🏅
      </div>
      {% endif %}
    </div>
    <!-- Team Rings Image -->
    <div class="flex justify-center mt-4 starforge-relative">
      <img
        alt="{{ team.team_name if team and team.team_name else "
        your=""
        team=""
        showing=""
        off=""
        championship=""
        src="{{ url_for('static', filename='images/TeamRings.webp') }}"
        class="rounded-2xl w-full max-w-xs shadow-2xl border-4 border-yellow-400 transform hover:scale-105 transition duration-300"
        loading="lazy"
        decoding="async"
      />
      <div>
        class="absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/60
        text-yellow-300 text-sm px-3 py-1 rounded-full shadow-lg" > Champions
        Inspire Champions
      </div>
    </div>
  </div>
</section>
{# =================== STARFORGE NEWSLETTER MODAL POPUP (SaaS-Ready)
=================== #}
<style>
  /* ...keep your styles exactly as you had them... */
  /* (For brevity, left unchanged here) */
</style>

<div
  id="starforge-newsletter-popup"
  role="dialog"
  aria-modal="true"
  tabindex="-1"
>
  <div id="starforge-newsletter-content" tabindex="0">
    <button id="starforge-newsletter-close" aria-label="Close newsletter popup">
      ×
    </button>
    <h2
      id="starforge-newsletter-title"
      class="text-2xl font-extrabold mb-2 text-yellow-300"
    >
      {{ org_newsletter_heading if org_newsletter_heading is defined else "Stay
      in the Loop!" }}
    </h2>
    <p class="mb-3 text-base text-yellow-100/90">
      {% if org_newsletter_body is defined %} {{ org_newsletter_body|safe }} {%
      else %} Get exclusive updates, game invites, and ways to help
      <b>{{ team.team_name if team and team.team_name else "Our Team" }}</b>
      shine.<br />
      <span class="font-semibold text-yellow-200"
        >One email a month, no spam ever.</span
      >
      {% endif %}
    </p>
    <form id="starforge-newsletter-form" novalidate name="newsletter-form">
      <input
        id="starforge-newsletter-email"
        name="email"
        type="email"
        placeholder="Your email address"
        autocomplete="email"
        aria-describedby="starforge-email-error"
        required
      />
      <div id="starforge-email-error"></div>
      <button type="submit">
        {{ org_newsletter_button if org_newsletter_button is defined else
        "Subscribe" }}
      </button>
      <div id="starforge-newsletter-thankyou"></div>
      <p class="text-xs text-amber-200 mt-1">
        Privacy: We’ll never sell or share your email.
      </p>
    </form>
  </div>
</div>

<script type="module">
  import confetti from "https://cdn.skypack.dev/canvas-confetti@1.6.0";
  document.addEventListener("DOMContentLoaded", () => {
    const popup = document.getElementById("starforge-newsletter-popup");
    const closeBt = document.getElementById("starforge-newsletter-close");
    const form = document.getElementById("starforge-newsletter-form");
    const emailIn = document.getElementById("starforge-newsletter-email");
    const errorEl = document.getElementById("starforge-email-error");
    const thanks = document.getElementById("starforge-newsletter-thankyou");
    const KEY = "starforge_newsletter_popup";
    if (localStorage.getItem(KEY) !== "dismissed") {
      setTimeout(() => {
        popup.classList.add("visible");
        popup.focus();
      }, 4200);
    }
    function closePopup() {
      popup.classList.remove("visible");
      errorEl.classList.remove("show");
      errorEl.textContent = "";
      thanks.style.display = "none";
      emailIn.value = "";
      localStorage.setItem(KEY, "dismissed");
    }
    closeBt.addEventListener("click", closePopup);
    popup.addEventListener("click", (e) => {
      if (e.target === popup) closePopup();
    });
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && popup.classList.contains("visible"))
        closePopup();
    });
    const emailRx = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      errorEl.classList.remove("show");
      thanks.style.display = "none";
      if (!emailRx.test(emailIn.value.trim())) {
        errorEl.textContent = "Please enter a valid email.";
        errorEl.classList.add("show");
        return;
      }
      // TODO: post to backend → await fetch('/api/subscribe', {…});
      thanks.textContent = "🎉 Thanks for subscribing! Check your inbox.";
      thanks.style.display = "block";
      confetti({
        particleCount: 60,
        spread: 66,
        origin: { y: 0.75 },
        colors: ["#facc15", "#fde68a", "#16a34a"],
      });
      setTimeout(closePopup, 2000);
    });
  });
</script>
<!doctype html>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0" />
<section aria-label="Fundraising progress and links">
  <div>
    class="progress-starforge-bar-bg" role="progressbar" aria-valuemin="0"
    aria-valuemax="{{ stats.goal|int|default({{ stats.goal if stats and
    stats.goal else 10000 }}) }}" aria-valuenow="{{
    stats.raised|int|default(7850) }}" aria-label="Fundraising progress: ${{
    stats.raised|int|default(7850) }} of ${{ stats.goal|int|default({{
    stats.goal if stats and stats.goal else 10000 }}) }} raised" >
    <div>
      class="progress-starforge-bar" style="--progress-width: {{ ((stats.raised
      / stats.goal) * 100)|round(1) if stats and stats.goal else 78 }}%;" >
    </div>
  </div>
  <div class="progress-text mt-2 font-starforge-semibold">
    ${{ stats.raised|int|default(7850) }} of ${{ stats.goal|int|default({{
    stats.goal if stats and stats.goal else 10000 }}) }} raised
  </div>
  <nav class="starforge-footer-links starforge-mt-4" aria-label="Footer links">
    <<a>📧 Email</a>
    <a href="https://www.connectatxelite.com" target="_blank" rel="noopener"
      >🌐 Website</a
    >
    <a
      href="https://www.paypal.com/donate/your-link"
      target="_blank"
      rel="noopener"
      >💸 Donate</a
    >
  </nav>
</section>
<!doctype html>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0" />
{% set badge = badge if badge is defined else None %} {% set challenge =
challenge if challenge is defined else {"metrics": []} %} {% set color_classes =
color_classes if color_classes is defined else "" %} {% set event = event if
event is defined else None %} {% set log = log if log is defined else None %} {%
set metric = metric if metric is defined else None %} {% set next_game =
next_game if next_game is defined else None %} {% set p = p if p is defined else
None %} {% set request = request if request is defined else None %} {% set
size_classes = size_classes if size_classes is defined else "" %} {% set sponsor
= sponsor if sponsor is defined else None %} {% set stat = stat if stat is
defined else None %} {% set widget = widget if widget is defined else None %}
<!-- 💰 Fundraising Meter with Percentage &amp; Milestones -->
<div>
  class="w-full bg-black/60 backdrop-blur rounded-xl p-4 flex flex-col
  sm:flex-row sm:items-center gap-3 shadow-lg border border-yellow-400/10"
  role="region" aria-label="Fundraising Progress" >
  <!-- 📊 Progress Bar -->
  <div class="w-full sm:flex-1 starforge-relative">
    <div>
      id="starforge-hero-meter-bar-2" role="progressbar" class="h-4 w-full
      rounded-full bg-zinc-800 overflow-hidden" aria-valuemin="0"
      aria-valuemax="{{ goal }}" aria-valuenow="{{ raised }}" >
      <div>
        class="h-full bg-gradient-to-r from-yellow-400 to-yellow-200
        transition-all duration-700 ease-out rounded-full" style="width: 0%"
        aria-label="Current fundraising progress" >
      </div>
    </div>
    <!-- 🌟 Percentage Label -->
    <div>
      id="starforge-hero-meter-percent-2" class="absolute top-1/2 left-1/2
      -translate-x-1/2 -translate-y-1/2 text-xs font-bold text-zinc-900
      bg-yellow-300 px-2 py-0.5 rounded-full shadow-lg" > 0%
    </div>
  </div>
  <!-- 📈 Label with Milestone Emoji -->
  <div>
    class="text-sm font-semibold text-yellow-300 whitespace-nowrap text-center
    sm:text-left" > Raised: $<<span>{{ raised }}</span> / $<<span
      >{{ goal }}</span
    >
    <span>
      id="starforge-emoji-milestone-2" class="ml-2 starforge-text-xl"
      aria-hidden="true" >💤</span
    >
  </div>
</div>
<!-- Hidden spans for JS (no duplicate IDs on visible elements) -->
<<span></span> <<span></span>
<!doctype html>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0" />
<style>
  /* Animation &amp; Styles */
  @keyframes marquee {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }
  .animate-marquee {
    display: flex;
    animation: marquee 38s linear infinite;
    gap: 2.5rem;
    will-change: transform;
  }
  .shadow-gold-glow {
    box-shadow:
      0 18px 0 #facc15cc,
      0 2px 8px #fff2 inset;
  }
  .shadow-gold-aura {
    box-shadow:
      0 38px #fde68a80,
      0 2px 8px #fff2 inset;
  }
  .border-gold {
    border-color: #facc15;
  }
  .bg-gold {
    background: #facc15;
  }
  .text-gold {
    color: #facc15;
  }
  .animate-bounce {
    animation: bounce 1.1s infinite alternate;
  }
  @keyframes bounce {
    0% {
      transform: translateY(0);
    }
    100% {
      transform: translateY(-7px);
    }
  }
  .group:hover [data-tooltip]::after {
    content: attr(data-tooltip);
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    bottom: -1.7rem;
    background: #18181b;
    color: #facc15;
    padding: 0.4rem 0.8rem;
    border-radius: 0.7rem;
    font-size: 0.9rem;
    white-space: pre-line;
    z-index: 40;
    opacity: 1;
    pointer-events: none;
    box-shadow: 0 2px 12px #fde68a70;
  }
</style>
{% set badge = badge if badge is defined else None %} {% set challenge =
challenge if challenge is defined else {"metrics": []} %} {% set color_classes =
color_classes if color_classes is defined else "" %} {% set event = event if
event is defined else None %} {% set log = log if log is defined else None %} {%
set metric = metric if metric is defined else None %} {% set next_game =
next_game if next_game is defined else None %} {% set p = p if p is defined else
None %} {% set request = request if request is defined else None %} {% set
size_classes = size_classes if size_classes is defined else "" %} {% set sponsor
= sponsor if sponsor is defined else None %} {% set stat = stat if stat is
defined else None %} {% set widget = widget if widget is defined else None %} {#
===================== app/templates/partials/sponsor_block.html
===================== #} {#--- Sponsor Card Macro (Tier/Flex Edition) ---#} {%
macro sponsor_card(sponsor, show_badge=False) -%} {# Helper: Tier-to-Badge
mapping #} {% set tier_badge = { "Platinum": {"icon": "🥇", "label": "Platinum",
"color": "bg-gradient-to-r from-yellow-400 via-yellow-200 to-yellow-500
text-yellow-900"}, "Gold": {"icon": "🥈", "label": "Gold", "color":
"bg-gradient-to-r from-yellow-300 via-yellow-100 to-yellow-300
text-yellow-800"}, "Bronze": {"icon": "🥉", "label": "Bronze", "color":
"bg-gradient-to-r from-orange-300 via-yellow-100 to-orange-400
text-orange-900"}, "Champion": {"icon": "🏆", "label": "Champion", "color":
"bg-gold text-gold"}, } %}
<section
  class="bg-zinc-950/95 rounded-2xl shadow-gold-glow p-6 flex flex-col items-center border-2 border-gold/30 hover:scale-105 hover:shadow-gold-aura transition duration-300 focus-within:ring-4 focus-within:ring-gold group"
  tabindex="0"
  aria-label="{{ sponsor.name }} sponsor"
  data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-sponsor-id="starforge-{{ sponsor.id }}"
  onmouseover="window.sponsorImpression &amp;&amp; sponsorImpression('{{ sponsor.id }}', 'hover')"
>
  {# Sponsor pixel impression (hidden 1x1) #}
  <img
    src="/analytics/pixel?sponsor_id={{ sponsor.id }}&amp;event=view"
    alt=""
    width="1"
    height="1"
    style="display: none"
    loading="eager"
  />
  {% if sponsor.url %}
  <a
    href="{{ sponsor.url }}"
    target="_blank"
    rel="noopener sponsored"
    onclick="window.sponsorClick &amp;&amp; sponsorClick('{{ sponsor.id }}')"
    tabindex="-1"
    >{% endif %}
    <img
      src="{{ sponsor.logo if sponsor.logo is string and sponsor.logo.startswith('http') else url_for('static', filename='images/sponsors/' ~ (sponsor.logo or 'logo.webp')) }}"
      alt="{{ sponsor.name }} logo"
      class="w-16 h-16 mb-3 rounded-full border-4 border-gold shadow-inner-gold bg-white object-cover transition-all hover:grayscale-0 grayscale"
      loading="lazy"
      decoding="async"
      data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-tooltip="{{ sponsor.tooltip or sponsor.description or 'Thanks for supporting {{ team.team_name if team and team.team_name else"
      your=""
      team=""
    />
    {% if sponsor.url %}</a
  >
  {% endif %}
  <div class="text-xl font-extrabold text-gold starforge-mb-1">
    {% if sponsor.url %}
    <a
      href="{{ sponsor.url }}"
      target="_blank"
      rel="noopener sponsored"
      class="hover:underline hover:text-yellow-200 transition"
      onclick="window.sponsorClick &amp;&amp; sponsorClick('{{ sponsor.id }}')"
    >
      {{ sponsor.name }}</a
    >
    {% else %} {{ sponsor.name }} {% endif %}
  </div>
  <div class="text-lg text-yellow-200 font-mono starforge-mb-1">
    ${{ '{:,.0f}'.format(sponsor.amount) }}
  </div>
  <div class="mt-1 text-xs font-semibold flex items-center gap-2">
    {% if show_badge or sponsor.tier %} {% set badge =
    tier_badge.get(sponsor.tier or 'Champion', tier_badge['Champion']) %}
    <span>
      class="inline-flex items-center gap-1 px-3 py-1 rounded-full font-bold
      shadow uppercase tracking-wide animate-bounce {{ badge.color }}" > {{
      badge.icon }} {{ badge.label }}</span
    >
    {% endif %} {% if sponsor.tier and not badge %}
    <span>
      class="inline-flex items-center gap-1 px-2 py-0.5 bg-yellow-300/20 rounded
      text-yellow-800 font-bold" > {{ sponsor.tier }}</span
    >
    {% endif %}
  </div>
  {% if sponsor.description %}
  <div class="mt-2 text-zinc-200 starforge-text-sm">
    {{ sponsor.description }}
  </div>
  {% endif %}
  <div>
    class="absolute z-50 hidden group-hover:flex left-1/2 -translate-x-1/2
    -bottom-16 bg-black/90 text-yellow-200 text-xs px-3 py-2 rounded-xl
    shadow-xl border border-gold pointer-events-none transition-all duration-200
    group-hover:opacity-100 group-hover:translate-y-1" style="min-width: 180px"
    > {{ sponsor.tooltip or sponsor.description or "Thank you for supporting
    us!" }}
  </div>
</section>
{%- endmacro %} {#--- Leaderboard Grid Macro ---#} {% macro
leaderboard_grid(items, cols_class='sm:grid-cols-2', show_first_badge=False) -%}
<div>
  class="grid grid-cols-1 {{ cols_class }} starforge-gap-6" aria-live="polite" >
  {% if items|length %} {% for sponsor in items %} {{ sponsor_card(sponsor,
  show_badge=(show_first_badge and loop.first)) }} {% endfor %} {% else %}
  <div class="col-span-full text-center starforge-py-8">
    <button>
      onclick="openSponsorModal()" class="px-8 py-3 bg-yellow-400 text-black
      font-extrabold rounded-full shadow-lg hover:scale-105 hover:bg-yellow-300
      text-xl transition" > 🌟 Be our FIRST sponsor — Founding status!
    </button>
  </div>
  {% endif %}
</div>
{%- endmacro %} {#--- Sorted Sponsors ---#} {% set sponsors_sorted =
sponsors|sort(attribute='amount', reverse=True) %}
<section
  id="starforge-sponsor-elite-wall"
  class="py-14 my-8 relative bg-gradient-to-b from-black via-secondary to-black/90 rounded-2xl shadow-gold-glow"
>
  <div class="container mx-auto max-w-4xl px-4 flex flex-col items-center">
    <h2
      class="text-4xl md:text-5xl font-black heading-gradient mb-3 flex items-center gap-3 animate-shine"
    >
      <<span>🏆</span> Our Sponsor Wall <<span>2025</span>
    </h2>
    <p
      class="mb-8 text-lg text-yellow-300/90 max-w-2xl text-center font-medium drop-shadow"
    >
      <span class="font-bold text-starforge-gold">You power the dream.</span
      ><br />
      Sponsors make {{ team.team_name if team and team.team_name else "Your Team
      Name" }} a force—on the court and in our community.<br />
      Want your name here? Step up and join our Champion Circle.
    </p>
    {{ leaderboard_grid(sponsors_sorted, 'md:grid-cols-3',
    show_first_badge=True) }}
    <button>
      type="button" id="starforge-sponsor-confetti-btn"
      onclick="openSponsorModal()" class="inline-flex items-center gap-2
      bg-yellow-400 text-zinc-900 font-bold px-8 py-3 rounded-full shadow
      hover:bg-yellow-300 hover:scale-105 focus-visible:ring-4
      focus-visible:ring-yellow-300 text-xl uppercase tracking-wider transition
      mt-10" aria-controls="become-sponsor-modal" aria-haspopup="dialog" > ✨
      Become a Sponsor
    </button>
    <div class="flex justify-center mt-6 starforge-relative">
      <img
        src="{{ url_for('static', filename='images/TeamRings.webp') }}"
        alt="{{ team.team_name if team and team.team_name else "
        your=""
        team=""
        championship=""
        class="rounded-2xl w-full max-w-xs shadow-2xl border-4 border-yellow-400 hover:scale-105 transition duration-300"
        loading="lazy"
        decoding="async"
      />
      <div>
        class="absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/60
        text-yellow-300 text-sm px-3 py-1 rounded-full shadow-lg" > Champions
        Inspire Champions
      </div>
    </div>
  </div>
</section>
{# 💛 Sponsor Logo Marquee Strip #}
<section
  id="starforge-sponsor-logo-strip"
  class="py-4 bg-starforge-zinc-900/85"
  aria-labelledby="sponsor-logos-heading"
>
  <div class="max-w-4xl mx-auto starforge-px-4">
    <h2 id="starforge-sponsor-logos-heading" class="sr-starforge-only">
      Our Sponsors
    </h2>
    {% if sponsors_sorted %}
    <div>
      class="flex flex-wrap items-center justify-center gap-8 animate-marquee
      overflow-x-auto" > {% for sponsor in sponsors_sorted %}
      <div>
        class="transition-transform duration-300 hover:scale-110 bg-zinc-800/60
        rounded-2xl p-4 shadow-lg" >
        <img
          src="{{ sponsor.logo if sponsor.logo is string and sponsor.logo.startswith('http') else url_for('static', filename='images/sponsors/' ~ (sponsor.logo or 'logo.webp')) }}"
          alt="{{ sponsor.name }} logo"
          class="h-16 w-auto max-w-xs grayscale hover:grayscale-0 transition-all duration-300"
          loading="lazy"
        />
      </div>
      {% endfor %}
    </div>
    {% else %}
    <div class="text-center text-lg text-yellow-300 font-semibold py-6">
      No sponsors yet—your logo could headline here!
    </div>
    {% endif %}
  </div>
</section>
{# 🌟 Sponsor Modal (ONE ID, PRODUCTION-READY) #}
<div>
  id="starforge-become-sponsor-modal" class="fixed inset-0 z-[1000] bg-black/60
  flex items-center justify-center opacity-0 pointer-events-none transition-all
  duration-300" aria-hidden="true" role="dialog" aria-modal="true"
  aria-labelledby="become-sponsor-modal-title" >
  <div>
    class="bg-gradient-to-br from-gold via-black to-red-700 rounded-2xl p-8
    max-w-md w-full flex flex-col items-center shadow-elevated relative" >
    <button>
      onclick="document.getElementById('become-sponsor-modal').classList.remove('show')"
      class="absolute top-3 right-3 text-2xl text-gold hover:text-red-500"
      aria-label="Close Sponsor Modal" > ×
    </button>
    <h3
      id="starforge-become-sponsor-modal-title"
      class="text-2xl font-bold text-gold mb-2"
    >
      Join Our Champion Circle
    </h3>
    <p class="mb-4 text-white/80 text-starforge-center">
      Leave your mark—help us reach the championship!
    </p>
    <form method="post" action="{{ url_for('main.become_sponsor') }}">
      <input
        type="text"
        name="name"
        placeholder="Your Name / Company"
        class="w-full mb-3 px-4 py-2 rounded bg-black/60 text-white border border-gold/30 focus:outline-none focus:ring-2 focus:ring-gold"
        required=""
      />
      <input
        type="number"
        name="amount"
        placeholder="Sponsorship Amount"
        class="w-full mb-3 px-4 py-2 rounded bg-black/60 text-white border border-gold/30 focus:outline-none focus:ring-2 focus:ring-gold"
        required=""
      />
      <div class="flex flex-col gap-2 starforge-mb-4">
        <button>
          type="button"
          onclick="window.open('https://buy.stripe.com/test_00g3f1aQn1yK3tq3cc',
          '_blank')" class="w-full py-2 bg-blue-500 text-white rounded
          hover:bg-blue-600 font-semibold" > Pay with Stripe
        </button>
        <button>
          type="button"
          onclick="window.open('https://paypal.com/donate?hosted_button_id=XXXX',
          '_blank')" class="w-full py-2 bg-yellow-400 text-black rounded
          hover:bg-yellow-300 font-semibold" > Pay with PayPal
        </button>
      </div>
      <button type="submit" class="btn-primary btn-glow w-full">
        Join Our Champion Circle
      </button>
    </form>
  </div>
</div>
<script type="module">
  import confetti from "https://cdn.skypack.dev/canvas-confetti@1.6.0";
  window.openSponsorModal = function () {
    const modal = document.getElementById("become-sponsor-modal");
    modal.classList.add("show");
    modal.style.opacity = "1";
    modal.style.pointerEvents = "all";
    setTimeout(
      () =>
        confetti({
          particleCount: 90,
          spread: 70,
          origin: { y: 0.7 },
          colors: ["#facc15", "#fde68a", "#22d3ee", "#a21caf", "#be185d"],
        }),
      300,
    );
  };
  document
    .querySelectorAll('#sponsor-confetti-btn, [onclick*="openSponsorModal"]')
    .forEach((btn) => btn.addEventListener("click", openSponsorModal));

  window.sponsorImpression = function (id, type = "view") {
    const img = new Image(1, 1);
    img.src = `/analytics/pixel?sponsor_id=${id}&event=${type}&ts=${Date.now()}`;
  };
  window.sponsorClick = function (id) {
    window.sponsorImpression(id, "click");
  };
</script>
<!doctype html>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0" />
<section class="contact-starforge-block" aria-label="Contact and countdown">
  <div><<strong>Contact:</strong> <<a>arodgps@gmail.com</a></div>
  <div><<strong>Phone:</strong> <<a>(512) 820-0475</a></div>
  <div>
    id="starforge-next-game-countdown" class="starforge-starforge-countdown"
    aria-live="polite" > Next Tournament: <<span>Loading…</span>
  </div>
</section>
<div class="container mx-auto px-4">
  <section
    aria-labelledby="tiers-heading"
    class="py-16 px-4 sm:px-8 max-w-5xl mx-auto"
    id="starforge-tiers"
  >
    <h2
      class="text-3xl sm:text-4xl font-black bg-gradient-to-r from-yellow-400 via-yellow-100 to-yellow-400 bg-clip-text text-transparent drop-shadow-xl animate-shine text-center mb-12"
      id="starforge-tiers-heading"
      tabindex="0"
    >
      🌟 Choose Your Sponsorship Tier
    </h2>
    <div class="flex flex-wrap gap-10 justify-center">
      {% for tier in tiers %}
      <div
        aria-label="{{ tier.title }} Sponsor Tier"
        class="flex flex-col items-center px-7 py-8 rounded-3xl border-2 {{ tier.border }} bg-gradient-to-br {{ tier.gradient }} {{ tier.text }} {{ tier.shadow }} w-[310px] min-h-[410px] transition-transform hover:scale-105 focus-within:scale-105 focus-within:ring-4 focus-within:ring-yellow-400 relative overflow-hidden group"
        role="listitem"
        tabindex="0"
      >
        <span
          class="text-5xl mb-4 {% if tier.title == 'Platinum' %}animate-shine{% endif %} drop-shadow-xl group-hover:animate-spin-reverse-slow"
        >
          {{ tier.emoji }}
        </span>
        <h3 class="text-2xl font-bold mb-2 tracking-tight drop-shadow-sm">
          {{ tier.title }}
        </h3>
        <div class="text-lg font-mono mb-4 font-extrabold tracking-widest">
          {{ tier.amount }}
        </div>
        <ul class="text-sm mb-6 text-center space-y-2 opacity-90">
          {% for perk in tier.details %}
          <li
            class="relative pl-3 before:content-['✓'] before:absolute before:left-0 before:text-yellow-400 before:font-bold"
          >
            {{ perk }}
          </li>
          {% endfor %}
        </ul>
        <button
          aria-label="Become a {{ tier.title }} sponsor"
          class="mt-auto px-7 py-2 bg-yellow-400 text-black font-bold rounded-full shadow-lg transition-transform hover:scale-110 hover:bg-yellow-300 focus-visible:ring-2 focus-visible:ring-yellow-300 uppercase tracking-wide"
          onclick="openSponsorModal('{{ tier.title }}')"
        >
          {{ tier.cta }}
        </button>
        {% if tier.title == "Platinum" %}
        <span
          class="absolute top-4 right-4 text-yellow-500 text-xs font-bold bg-black/70 px-3 py-1 rounded-full shadow animate-pop"
        >
          LIMITED VIP
        </span>
        {% endif %}
      </div>
      {% endfor %}
    </div>
    <div
      class="mt-12 text-center text-yellow-700 text-base font-medium max-w-2xl mx-auto px-2 animate-fade-in"
    >
      <b>
        All sponsors receive recognition, impact reports, and lifelong gratitude
        from the team.
      </b>
      <span class="block text-yellow-400 mt-2 font-bold">
        Want to discuss a custom partnership or recurring support?
        <a class="underline hover:text-yellow-600 transition" href="#contact">
          Contact us
        </a>
        →
      </span>
    </div>
  </section>
</div>
{# =========== ELITE SITE FOOTER (STARFORGE ENHANCED, SaaS-Ready) =========== #}
<footer
  id="starforge-site-footer"
  role="contentinfo"
  class="bg-black text-yellow-300 shadow-inner py-8"
>
  <div class="container mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-8">
    <!-- Column 1: Brand -->
    <section aria-label="Brand and location" class="space-y-2">
      <div
        class="text-xl font-black bg-gradient-to-r from-yellow-400 via-yellow-200 to-yellow-400 bg-clip-text text-transparent animate-shine"
      >
        {{ team.team_name if team and team.team_name else "Connect ATX Elite" }}
      </div>
      <div>
        {{ team.division if team and team.division else "AAU 12U" }} | {{
        team.location if team and team.location else "Austin, TX" }}
      </div>
      <div>© {{ now().year }}</div>
      <div class="space-x-4">
        {% if team and team.instagram %}
        <a href="{{ team.instagram }}" target="_blank" rel="noopener"
          >📸 Instagram</a
        >
        {% endif %} {% if team and team.facebook %}
        <a href="{{ team.facebook }}" target="_blank" rel="noopener"
          >📘 Facebook</a
        >
        {% endif %} {% if team and team.twitter %}
        <a href="{{ team.twitter }}" target="_blank" rel="noopener"
          >🐦 Twitter/X</a
        >
        {% endif %}
      </div>
    </section>

    <!-- Column 2: Progress + Links -->
    <section aria-label="Fundraising progress and links" class="space-y-3">
      {% set raised = stats.raised if stats is defined and stats.raised is
      defined else 0 %} {% set goal = stats.goal if stats is defined and
      stats.goal is defined else 10000 %}
      <div
        role="progressbar"
        aria-label="Fundraising progress: ${{ raised }} of ${{ goal }} raised"
        aria-valuemin="0"
        aria-valuemax="{{ goal }}"
        aria-valuenow="{{ raised }}"
        class="bg-zinc-800 rounded-full overflow-hidden h-5 shadow-inner border border-yellow-300/30"
      >
        <div
          class="h-full bg-gradient-to-r from-yellow-400 to-amber-300 transition-all"
          style="width: {{ ((raised / goal) * 100) | round(1) if goal else 0 }}%;"
        ></div>
      </div>
      <div class="font-semibold">${{ raised }} of ${{ goal }} raised</div>
      <nav aria-label="Footer links" class="space-x-4">
        <a
          href="mailto:{{ team.email if team and team.email else 'arodgps@gmail.com' }}"
          >📧 Email</a
        >
        <a
          href="{{ team.website if team and team.website else 'https://www.connectatxelite.com' }}"
          target="_blank"
          rel="noopener"
          >🌐 Website</a
        >
        <a
          href="{{ team.paypal if team and team.paypal else 'https://www.paypal.com/donate/your-link' }}"
          target="_blank"
          rel="noopener"
          >💸 Donate</a
        >
      </nav>
    </section>

    <!-- Column 3: Contact + Countdown -->
    <section aria-label="Contact and countdown" class="space-y-2">
      <div>
        <strong>Contact:</strong>
        <a
          href="mailto:{{ team.email if team and team.email else 'arodgps@gmail.com' }}"
        >
          {{ team.email if team and team.email else 'arodgps@gmail.com' }}
        </a>
      </div>
      <div>
        <strong>Phone:</strong>
        <a
          href="tel:{{ team.phone if team and team.phone else '(512) 820-0475' }}"
        >
          {{ team.phone if team and team.phone else '(512) 820-0475' }}
        </a>
      </div>
      <div id="starforge-next-game-countdown" aria-live="polite">
        Next Tournament: <span id="starforge-next-tournament">Loading…</span>
      </div>
    </section>
  </div>
  <div class="mt-6 text-center text-sm">
    <b>Recent Supporters:</b>
    {% if recent_supporters is defined and recent_supporters %} {% for supporter
    in recent_supporters %} {{ supporter }}{% if not loop.last %} • {% endif %}
    {% endfor %} {% else %} Acme Corp • Jane D. • Smith & Co • Austin Hoops {%
    endif %}
  </div>
</footer>

<script>
  // === Next Tournament Countdown ===
  document.addEventListener("DOMContentLoaded", () => {
    {% if next_event is defined and next_event and next_event.date %}
      const targetDate = new Date("{{ next_event.date }}T00:00:00");
      const label = "{{ next_event.label if next_event.label else 'Tournament' }}";
      const el = document.getElementById("starforge-next-tournament");
      function updateCountdown() {
        const now = new Date();
        const diff = targetDate - now;
        if (diff > 0) {
          const days = Math.floor(diff / (1000 * 60 * 60 * 24));
          el.textContent = days === 0 ? "Today!" : `In ${days} day${days !== 1 ? 's' : ''}`;
        } else {
          el.textContent = "Happening now!";
        }
      }
      updateCountdown();
      setInterval(updateCountdown, 3600000);
    {% else %}
      document.getElementById("starforge-next-tournament").textContent = "See calendar for next event!";
    {% endif %}
  });
</script>
<!doctype html>
      name="generator"
    />
    {% set badge = badge if badge is defined else None %} {% set challenge =
    color_classes = color_classes if color_classes is defined else "" %} {% set
    defined else None %} {% set metric = metric if metric is defined else None
    p = p if p is defined else None %} {% set request = request if request is
    defined else "" %} {% set sponsor = sponsor if sponsor is defined else None
    if widget is defined else None %}
      class="sticky top-0 z-40 w-full backdrop-blur bg-black/85 border-b border-yellow-300/15 shadow-lg transition-all"
      x-data="{ open: false, offCanvasOpen: false }"
      <div>
      >
        <a
          class="flex items-center gap-3 focus-visible:ring-4 focus-visible:ring-yellow-400 rounded-lg group"
          your=""
          tabindex="0"
            ><img
              alt="{{ team.team_name if team and team.team_name else "
              team=""
              fetchpriority="high"
              decoding="async" />
            <svg
              viewbox="0 40"
              focusable="false"
              <circle
                cy="20"
                fill="none"
                stroke-width="2"
              ></circle>
                <filter
                  x="-50%"
                  width="200%"
                >
                    stddeviation="2.5"
                  ></fegaussianblur>
                    <<femergenode></femergenode>
                  </femerge>
              </defs></svg
          <span>
          >
            }}</span
        >
        <span>
          tabindex="0"
          role="text"
        >
        <!-- Desktop Navigation -->
          class="hidden lg:flex items-center gap-7 text-base font-semibold text-zinc-100"
          role="navigation"
          {% set nav_links = team.nav_links if team is defined and
          <a
            class="relative transition hover:text-yellow-300 focus-visible:ring-2 ring-yellow-300 rounded px-1 py-0.5 group"
            ><<span>{{ label }}</span></a
          {% endfor %}
            type="button"
            class="ml-5 px-5 py-2 bg-gradient-to-r from-yellow-400 to-gold text-black font-bold rounded-full shadow-xl hover:scale-105 hover:bg-yellow-200 hover:shadow-yellow-300/60 focus-visible:ring-4 focus-visible:ring-yellow-400 transition-all"
            tabindex="0"
          >
          </button>
            href="#donate"
            tabindex="0"
            your=""
            >💸 Donate</a
        </nav>
        <button>
          aria-controls="mobile-nav"
          type="button"
        >
            class="w-7 h-7 text-yellow-300 transition-transform"
            stroke="currentcolor"
            viewbox="0 24"
            focusable="false"
            <path
              stroke-linejoin="round"
            ></path>
        </button>
      <!-- Off-canvas Mobile Navigation -->
        id="starforge-mobile-nav-2"
        x-transition:enter="transition ease-out duration-250"
        x-transition:enter-end="opacity-100 scale-100 translate-x-0"
        x-transition:leave-start="opacity-100 scale-100 translate-x-0"
        class="fixed inset-0 z-[9998] flex flex-col items-center justify-center gap-8 bg-black/90 backdrop-blur-lg shadow-2xl"
        role="dialog"
        aria-hidden="true"
        style="display: none"
        <button>
          type="button"
          aria-label="Close menu"
          × <<span>Close menu</span>
        {% for id, label in nav_links %}
          href="#{{ id }}"
          tabindex="0"
        >
        <button>
          onclick="openSponsorModal()"
          aria-controls="become-sponsor-modal"
          tabindex="0"
          🌟 Sponsor Now
      </nav>
    </header>
<!doctype html>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0" />
<section aria-label="Brand and location">
  <div>
    class="starforge-brand text-xl font-black bg-gradient-to-r from-yellow-400
    via-yellow-200 to-yellow-400 bg-clip-text text-transparent animate-shine" >
    {{ team.team_name if team and team.team_name else "Your Team Name" }}
  </div>
  <div class="text-sm starforge-mt-1">
    {{ team.league if team and team.league else "Your League" }} 12U | Austin,
    TX
  </div>
  <
  <div>© {{ now().year }}</div>
  <div class="starforge-footer-links starforge-mt-2">
    <a
      href="https://instagram.com/connectatxelite"
      target="_blank"
      rel="noopener"
      >📸 Instagram</a
    >
    <a
      href="https://facebook.com/connectatxelite"
      target="_blank"
      rel="noopener"
      >📘 Facebook</a
    >
  </div>
</section>
{# ========== DIGITAL HUB: AI Concierge + Admin Dashboard (Starforge SaaS,
Multi-Tenant Safe) ========== #}
<div class="container mx-auto px-4">
  <section
    aria-labelledby="digital-hub-heading"
    class="my-20 px-4 sm:px-8 max-w-5xl mx-auto"
    id="starforge-digital-hub-section"
    tabindex="-1"
  >
    <h2
      class="text-3xl sm:text-4xl font-black bg-gradient-to-r from-yellow-400 via-yellow-100 to-yellow-400 bg-clip-text text-transparent drop-shadow-xl animate-shine text-center mb-10"
      id="starforge-digital-hub-heading"
      tabindex="0"
    >
      🤖 Digital Hub
      <span
        class="block text-base font-semibold text-yellow-300/90 mt-2 animate-fade-in"
      >
        Where AI and Real Champions Connect
      </span>
    </h2>
    <div
      class="flex flex-col md:flex-row gap-12 md:gap-8 items-start justify-center"
    >
      <!-- === AI Concierge Widget === -->
      <div class="flex-1 min-w-[320px]">
        <div
          aria-label="AI Concierge assistant status and chat"
          class="bg-zinc-900/90 rounded-2xl shadow-yellow-400/40 p-8 hover:shadow-yellow-400/60 transition-all duration-300 focus-within:shadow-yellow-400/60 ring-1 ring-yellow-300/20"
          data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos="fade-up"
          tabindex="0"
        >
          <h3
            class="text-3xl font-bold text-yellow-400 mb-4 flex items-center gap-2 select-none"
          >
            🤖 AI Concierge
            <span
              aria-atomic="true"
              aria-live="polite"
              class="relative flex items-center justify-center ml-2"
              title="AI online"
            >
              <span id="starforge-ai-status">AI is online</span>
            </span>
          </h3>
          <p class="text-yellow-200 text-base mb-6 select-text">
            Got a question? Ask our friendly AI about your team — schedules,
            events, fundraising, or how to help!
            <span class="block text-yellow-300 font-semibold text-sm mt-2">
              Instant, 24/7 support for parents, sponsors, and admins.
            </span>
          </p>
          <button
            aria-controls="ai-concierge-modal"
            aria-haspopup="dialog"
            class="inline-flex items-center gap-2 bg-yellow-400 text-black font-bold py-3 px-8 rounded-full shadow-lg hover:bg-yellow-300 hover:scale-105 focus:outline-none focus-visible:ring-4 focus-visible:ring-yellow-300 text-lg transition"
            id="starforge-ai-concierge-btn"
            onclick="showAIModal(); trackWidgetClick('ai_concierge_open'); sparkleAIBtn(this);"
            tabindex="0"
            type="button"
          >
            <span
              class="hidden animate-starforge-sparkle"
              id="starforge-ai-sparkle"
              >✨</span
            >
            💬 Chat with our AI Concierge
          </button>
        </div>
      </div>

      <!-- === Admin Dashboard Widgets (Only if admin) === -->
      {% if current_user and current_user.is_admin %}
      <div class="flex-1 min-w-[320px]">
        <div
          aria-label="Admin dashboard overview widgets"
          class="bg-zinc-900/90 rounded-2xl shadow-yellow-400/40 p-8 hover:shadow-yellow-400/60 transition-all duration-300 focus-within:shadow-yellow-400/60 ring-1 ring-yellow-300/20"
          data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos="fade-up"
          data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos-delay="150"
          tabindex="0"
        >
          <h3
            class="text-3xl font-bold text-yellow-400 mb-6 text-center select-none"
          >
            📊 Admin Dashboard
          </h3>
          <section
            aria-label="Dashboard overview widgets"
            class="grid grid-cols-1 sm:grid-cols-2 gap-6"
            role="list"
          >
            {% set admin_widgets = [ { 'label': "Sponsors This Week", 'value':
            admin_stats.sponsors_this_week if admin_stats is defined and
            admin_stats.sponsors_this_week is defined else 0, 'analytics':
            "sponsors_this_week" }, { 'label': "Upcoming Events", 'value':
            admin_stats.upcoming_events if admin_stats is defined and
            admin_stats.upcoming_events is defined else 0, 'analytics':
            "upcoming_events" }, { 'label': "Active Members", 'value':
            admin_stats.active_members if admin_stats is defined and
            admin_stats.active_members is defined else 0, 'analytics':
            "active_members" }, { 'label': "New Signups", 'value':
            admin_stats.new_signups if admin_stats is defined and
            admin_stats.new_signups is defined else 0, 'analytics':
            "new_signups" } ] %} {% for widget in admin_widgets %}
            <div
              aria-label="{{ widget.label }}: {{ widget.value }}"
              class="bg-black/70 rounded-xl shadow-lg border-yellow-400/30 p-6 flex flex-col items-center text-center cursor-pointer hover:scale-105 hover:shadow-yellow-400/40 transition duration-300 group focus-within:ring-4 focus-within:ring-yellow-300 relative"
              onclick="trackWidgetClick('{{ widget.analytics }}'); pulseWidget(this);"
              onkeydown="if(event.key==='Enter'){this.click();}"
              role="listitem"
              tabindex="0"
            >
              <span
                class="text-yellow-300 text-3xl font-black drop-shadow animate-shine flex items-center gap-2 widget-count"
              >
                {{ widget.value }}
              </span>
              <span
                class="text-yellow-200 text-sm mt-2 font-semibold group-hover:text-yellow-300 transition"
              >
                {{ widget.label }}
              </span>
              <span
                class="absolute top-2 right-2 opacity-40 text-lg group-hover:opacity-90 transition pointer-events-none"
              >
                <svg
                  class="inline h-5 w-5"
                  fill="none"
                  stroke="currentcolor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M12 4v16m8-8H4"
                    stroke-linecap="round"
                    stroke-width="2"
                  ></path>
                </svg>
              </span>
            </div>
            {% endfor %}
          </section>
          <p class="mt-4 text-xs text-yellow-400/80 text-center">
            <b>Pro Tip:</b> Export analytics for board/sponsor reports —
            <span
              class="underline cursor-pointer hover:text-yellow-300"
              onclick="trackWidgetClick('export_analytics')"
            >
              download now </span
            >.
          </p>
          <button
            class="mt-6 w-full py-3 rounded-full bg-yellow-400 text-black font-bold shadow hover:bg-yellow-300 transition focus-visible:ring-2 focus-visible:ring-yellow-300"
            onclick="alert('Widget marketplace coming soon! Want a custom dashboard? Contact us!')"
          >
            ➕ Add Widget or Request Feature
          </button>
        </div>
      </div>
      {% endif %}
    </div>
  </section>
</div>

<script>
  // Starforge sparkle for AI button
  function sparkleAIBtn(btn) {
    const icon = document.getElementById("starforge-ai-sparkle");
    if (icon) {
      icon.classList.remove("hidden");
      setTimeout(() => icon.classList.add("hidden"), 900);
    }
  }
  // Widget pulse on click
  function pulseWidget(widget) {
    const count = widget.querySelector(".widget-count");
    if (count) {
      count.classList.add("pulse");
      setTimeout(() => count.classList.remove("pulse"), 700);
    }
  }
  // Event tracking for widgets (robust for SaaS)
  function trackWidgetClick(name) {
    if (window.gtag) {
      window.gtag("event", "widget_click", {
        event_category: "Dashboard",
        event_label: name,
      });
    } else {
      console.log("Widget click:", name);
    }
  }
</script>
<!doctype html>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0" />
<style>
  .shimmer {
    background: linear-gradient(
      110deg,
      #fde68a 30%,
      #facc15 55%,
      #fffbe6 65%,
      #fde68a 80%
    );
    background-size: 200% 100%;
    animation: shimmerMove 3.7s linear infinite;
  }
  @keyframes shimmerMove {
    0% {
      background-position: 100% 0;
    }
    100% {
      background-position: 0 0;
    }
  }
  .gold-glow {
    box-shadow:
      0 0 16px #facc15bb,
      0 0 1px #fde68a;
  }
  .silver-glow {
    box-shadow:
      0 0 10px #e5e7ebaa,
      0 0 2px #fde68a;
  }
  .bronze-glow {
    box-shadow:
      0 0 10px #fbbf24aa,
      0 0 1px #fde68a;
  }
  .animate-fade-in {
    animation: fadeInUp 1.3s both;
  }
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(25px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
<section
  id="starforge-sponsor-spotlight-wall"
  class="my-20 px-4 sm:px-8 max-w-5xl mx-auto"
  aria-labelledby="sponsor-spotlight-heading"
  tabindex="-1"
>
  <h2
    id="starforge-sponsor-spotlight-heading"
    class="text-3xl sm:text-4xl font-black bg-gradient-to-r from-yellow-400 via-amber-200 to-yellow-400 bg-clip-text text-transparent drop-shadow-xl animate-shine text-center mb-10"
    tabindex="0"
  >
    🏆 Sponsor Spotlight Wall
    <span>
      class="block text-base font-semibold text-yellow-300/80 mt-2
      animate-fade-in" > {{ sponsors_sorted|length }} Champions | ${{
      sponsors_total|int|default(0) }} raised</span
    >
  </h2>
  <!-- Ribbon of Fame (tiny avatars/logos) -->
  <div class="flex flex-wrap justify-center gap-2 starforge-mb-8">
    <img
      src="{{ s.logo if s.logo.startswith('http') else url_for('static', filename='images/sponsors/' ~ (s.logo or 'logo.webp')) }}"
      alt="{{ s.name }} logo"
      class="w-9 h-9 rounded-full border-2 border-yellow-300 shadow-inner bg-white object-cover grayscale hover:grayscale-0 transition"
      loading="lazy"
      decoding="async"
      title="{{ s.name }}"
    />
    {% endfor %} {% if sponsors_sorted|length &lt; 12 %}
    <span>
      class="inline-flex items-center px-3 py-1 rounded-full bg-zinc-800
      text-yellow-200 text-xs font-bold shadow border
      border-starforge-yellow-400/40" > + Your Brand Here</span
    >
    {% endif %}
  </div>
  <div class="flex flex-wrap justify-center starforge-gap-10">
    <div>
      class="relative flex flex-col items-center px-6 py-7 rounded-3xl border-2
      {{ 'border-yellow-400/50 bg-gradient-to-tr from-yellow-400 via-amber-200
      to-yellow-400 text-yellow-900 shadow-[0_0_24px_#fde68a99] shimmer' if
      sponsor.tier == 'Platinum' else 'border-yellow-400/40 bg-gradient-to-tr
      from-yellow-300 via-amber-100 to-yellow-200 text-yellow-900
      shadow-[0_0_12px_#facc15cc] gold-glow' if sponsor.tier == 'Gold' else
      'border-yellow-400/30 bg-gradient-to-tr from-zinc-200 via-yellow-200
      to-zinc-100 text-yellow-800 shadow-lg silver-glow' if sponsor.tier ==
      'Silver' else 'border-yellow-400/20 bg-gradient-to-tr from-orange-200
      via-yellow-100 to-orange-300 text-orange-900 shadow-md bronze-glow' if
      sponsor.tier == 'Bronze' else 'border-zinc-700 bg-gradient-to-tr
      from-indigo-900 via-zinc-800 to-black text-blue-100 shadow-inner' }} group
      hover:scale-105 transition duration-300 focus-within:ring-4
      focus-within:ring-yellow-400 min-w-[210px] max-w-xs outline-none"
      tabindex="0" aria-label="Sponsor: {{ sponsor.name }}"
      onfocus="showTooltip(this)" onblur="hideTooltip(this)"
      onmouseenter="showTooltip(this)" onmouseleave="hideTooltip(this)" > {% if
      sponsor.tier == 'Platinum' %}
      <span>
        class="absolute top-2 right-2 shimmer animate-pulse pointer-events-none"
        aria-hidden="true" ><svg width="32" height="32">
          <circle
            cx="16"
            cy="16"
            r="13"
            fill="#fde68a"
            opacity="0.7"
          ></circle></svg
      ></span>
      {% endif %} {% if sponsor.url %}
      <a
        href="{{ sponsor.url }}"
        target="_blank"
        rel="noopener sponsored"
        tabindex="-1"
        aria-label="Visit {{ sponsor.name }}"
        >{% endif %}
        <img
          src="{{ sponsor.logo if sponsor.logo.startswith('http') else url_for('static', filename='images/sponsors/' ~ (sponsor.logo or 'logo.webp')) }}"
          alt="{{ sponsor.name }} logo"
          class="w-20 h-20 mb-3 rounded-full border-4 border-yellow-400 shadow-inner bg-white object-cover transition-all hover:grayscale-0 grayscale group-hover:scale-110"
          loading="lazy"
          decoding="async"
        />
        {% if sponsor.url %}</a
      >{% endif %}
      <div class="flex flex-col items-starforge-center">
        <span>
          class="text-xl font-extrabold text-yellow-900/90
          group-hover:text-yellow-600 transition text-center" > {{ sponsor.name
          }} {% if sponsor.is_new %}
          <span>
            class="ml-2 px-2 py-0.5 rounded-full text-[11px] bg-emerald-400/80
            text-emerald-900 font-bold animate-pulse align-middle" > New!</span
          >
          {% elif sponsor.is_returning %}
          <span>
            class="ml-2 px-2 py-0.5 rounded-full text-[11px] bg-blue-300/80
            text-blue-900 font-bold animate-bounce align-middle" >
            Returning</span
          >
          {% endif %}</span
        >
        <span class="text-lg text-yellow-900/80 font-mono">
          >${{ '{:,.0f}'.format(sponsor.amount) }}</span
        >
        <span class="mt-2 flex gap-2 items-center">
          ><span>
            class="px-3 py-1 rounded-full text-xs font-bold uppercase
            tracking-wide {{ 'bg-yellow-300 text-yellow-900' if sponsor.tier ==
            'Platinum' else 'bg-yellow-200 text-yellow-800' if sponsor.tier ==
            'Gold' else 'bg-yellow-100 text-yellow-700' if sponsor.tier ==
            'Silver' else 'bg-orange-200 text-orange-900' if sponsor.tier ==
            'Bronze' else 'bg-zinc-700 text-zinc-200' }}" > {% if sponsor.tier
            == 'Platinum' %}🥇 Platinum {% elif sponsor.tier == 'Gold' %}🥈 Gold
            {% elif sponsor.tier == 'Silver' %}🥉 Silver {% elif sponsor.tier ==
            'Bronze' %}🏅 Bronze {% else %}🏆 Champion {% endif %}</span
          ></span
        >
        {% if sponsor.description %}
        <span class="mt-2 text-sm text-zinc-700 text-center max-w-xs">
          >{{ sponsor.description }}</span
        >
        {% endif %}
      </div>
      <div>
        class="absolute left-1/2 -translate-x-1/2 bottom-[-2.3rem] bg-black/90
        text-yellow-200 text-xs px-3 py-1 rounded-xl shadow pointer-events-none
        opacity-0 group-hover:opacity-100 focus-within:opacity-100
        transition-all duration-200 sponsor-tooltip" > {{ sponsor.tooltip or
        sponsor.description or "Thanks for supporting {{ team.team_name if team
        and team.team_name else "Your Team Name" }}!" }}
      </div>
    </div>
    {% endfor %} {% if sponsors_sorted|length &lt; 9 %} {% for _ in range(9 -
    sponsors_sorted|length) %}
    <div>
      class="flex flex-col items-center justify-center px-6 py-8 rounded-3xl
      border-2 border-dashed border-yellow-400/40 bg-zinc-900/60 shadow-inner
      text-yellow-300/80 min-w-[200px] h-[255px]" > <<span>✨</span>
      <span class="mt-4 font-bold text-center">
        >This spot is waiting for you!</span
      >
      <button>
        onclick="openSponsorModal()" class="mt-4 px-6 py-2 bg-yellow-400
        text-black font-extrabold rounded-full shadow-lg hover:scale-105
        transition" > 🌟 Become a Sponsor
      </button>
    </div>
    {% endfor %} {% endif %} {% else %}
    <div>
      class="flex flex-col items-center justify-center px-6 py-8 rounded-3xl
      border-2 border-dashed border-yellow-400/40 bg-zinc-900/60 shadow-inner
      text-yellow-300/80 min-w-[200px] h-[255px]" > <<span>✨</span>
      <span class="mt-4 font-bold text-center">
        >Your logo could headline here!</span
      >
      <button>
        onclick="openSponsorModal()" class="mt-4 px-6 py-2 bg-yellow-400
        text-black font-extrabold rounded-full shadow-lg hover:scale-105
        transition" > 🌟 Be the First Sponsor
      </button>
    </div>
    {% endif %}
  </div>
  <!-- Subtle shimmer and badge key styles -->
  <script>
    // Tooltip on focus/hover (for a11y)
    function showTooltip(card) {
      const tooltip = card.querySelector(".sponsor-tooltip");
      if (tooltip) tooltip.style.opacity = 1;
    }
    function hideTooltip(card) {
      const tooltip = card.querySelector(".sponsor-tooltip");
      if (tooltip) tooltip.style.opacity = 0;
    }
  </script>
</section>
{# ================= STARFORGE ELITE — DRY SaaS Vars, Announcements, Header
Polished & Multi-tenant-safe for ALL orgs, always loads! #} {# ---- Defensive,
DRY, multi-tenant-safe variable setup — never error on undefined! ---- #} {% set
badge = badge if badge is defined else None %} {% set challenge = challenge if
challenge is defined else {"metrics": []} %} {% set color_classes =
color_classes if color_classes is defined else "" %} {% set event = event if
event is defined else None %} {% set log = log if log is defined else None %} {%
set metric = metric if metric is defined else None %} {% set next_game =
next_game if next_game is defined else None %} {% set p = p if p is defined else
None %} {% set request = request if request is defined else None %} {% set
size_classes = size_classes if size_classes is defined else "" %} {% set sponsor
= sponsor if sponsor is defined else None %} {% set stat = stat if stat is
defined else None %} {% set widget = widget if widget is defined else None %} {%
set team = team if team is defined else {"team_name": "Connect ATX Elite"} %} {#
---- Dynamic, SaaS-ready nav links (always defined, supports onboarding) ---- #}
{% set nav_links = team.nav_links if team and team.nav_links is defined else [
('about', 'About'), ('challenge', 'Challenge'), ('sponsor-elite-wall',
'Sponsors'), ('testimonials', 'Testimonials'), ('contact', 'Contact') ] %} {#
---- Logo: Defensive, SaaS-onboard, fallback ---- #} {% set logo_src = team.logo
if team is defined and team.logo else 'images/logo.webp' %} {# ---- HTML
Boilerplate Extension ---- #} {% extends base if base is defined else
"base.html" %} {% block title %} Home · {{ team.team_name if team is defined and
team.team_name else 'Connect ATX Elite' }} {% endblock %} {% block content %}

<!-- 🚨 Announcement Bar -->
<div
  id="starforge-announcement-bar"
  class="w-full bg-gradient-to-r from-yellow-400 via-red-600 to-black text-zinc-900 font-bold text-center py-2 px-4 animate-pulse shadow-lg"
  role="region"
  aria-live="polite"
  aria-atomic="true"
>
  {% if team.announcement is defined and team.announcement %} {{
  team.announcement|safe }} {% else %} 🚨 Championship Fundraiser is LIVE! Help
  us reach our goal —
  <a href="#tiers" class="underline hover:text-white transition"
    >Join Our Champion Circle</a
  >
  {% endif %}
</div>

<!-- ================= HEADER ================= -->
<header
  class="sticky top-0 z-40 w-full backdrop-blur bg-black/85 border-b border-yellow-300/15 shadow-lg transition-all"
  role="banner"
  aria-label="Site header"
>
  <div
    class="container mx-auto flex items-center justify-between px-4 py-4 lg:px-8"
  >
    <!-- Logo / Brand (flawless fallback) -->
    <a
      href="{{ url_for('main.home') }}"
      class="flex items-center gap-3 focus-visible:ring-4 focus-visible:ring-yellow-400 rounded-lg group"
      aria-label="{{ team.team_name if team.team_name else 'Connect ATX Elite' }} – Home"
    >
      <img
        src="{{ url_for('static', filename=logo_src) }}"
        alt="{{ team.team_name if team.team_name else 'Connect ATX Elite' }} logo"
        class="h-12 w-12 rounded-full ring-2 ring-yellow-300 shadow-md transition-transform duration-200 group-hover:scale-110"
        loading="eager"
        decoding="async"
        fetchpriority="high"
      />
      <span
        class="text-2xl font-extrabold bg-gradient-to-r from-yellow-300 via-yellow-200 to-yellow-50 bg-clip-text text-transparent drop-shadow-sm select-none"
      >
        {{ team.team_name if team.team_name else 'Connect ATX Elite' }}
      </span>
    </a>

    {% if current_user and current_user.is_authenticated %}
    <span
      class="hidden md:inline ml-4 px-3 py-1 rounded-full bg-yellow-100 text-zinc-900 font-semibold shadow select-none"
      aria-label="Greeting message"
    >
      Hi, {{ current_user.name.split()[0] if current_user.name }}
    </span>
    {% endif %}

    <!-- Desktop Nav -->
    <nav
      class="hidden lg:flex items-center gap-7 text-base font-semibold text-zinc-100"
      aria-label="Primary navigation"
    >
      {% for id, label in nav_links %}
      <a
        href="#{{ id }}"
        class="relative transition hover:text-yellow-300 focus-visible:ring-2 ring-yellow-300 rounded px-1 py-0.5 group"
      >
        {{ label }}
        <span
          class="absolute left-0 bottom-0 w-full h-0.5 bg-yellow-300 scale-x-0 group-hover:scale-x-100 transition-transform origin-left"
        ></span>
      </a>
      {% endfor %}
      <button
        type="button"
        onclick="openSponsorModal()"
        class="ml-5 px-5 py-2 bg-gradient-to-r from-yellow-400 to-yellow-200 text-black font-bold rounded-full shadow-xl hover:scale-105 focus-visible:ring-4 focus-visible:ring-yellow-400 transition-all"
      >
        🌟 Sponsor Now
      </button>
      <a
        href="#donate"
        class="ml-2 px-5 py-2 bg-black/70 border-yellow-300/50 text-yellow-300 font-bold rounded-full shadow hover:bg-yellow-400 hover:text-black transition-all"
      >
        💸 Donate
      </a>
    </nav>

    <!-- Mobile Menu Toggle -->
    <button
      id="starforge-mobile-nav-toggle"
      onclick="toggleMobileNav()"
      class="lg:hidden inline-flex items-center justify-center p-2 rounded-lg border-yellow-300/40 hover:bg-yellow-300/10 focus-visible:ring-2 ring-yellow-300"
      aria-label="Toggle menu"
      aria-expanded="false"
    >
      <svg
        class="w-7 h-7 text-yellow-300"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        viewBox="0 0 24 24"
        aria-hidden="true"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M4 6h16M4 12h16M4 18h16"
        />
      </svg>
    </button>
  </div>

  <!-- Mobile Nav -->
  <nav
    id="starforge-mobile-nav"
    class="fixed inset-0 z-[9998] hidden flex-col items-center justify-center gap-8 bg-black/90 backdrop-blur-lg shadow-2xl"
    role="dialog"
    aria-modal="true"
    aria-label="Mobile navigation menu"
  >
    <button
      type="button"
      onclick="toggleMobileNav()"
      class="absolute top-6 right-6 text-2xl text-yellow-300 p-2 rounded-full bg-zinc-800/70 hover:text-red-500 focus-visible:ring-4 ring-yellow-300"
      aria-label="Close menu"
    >
      &times;
    </button>
    {% for id, label in nav_links %}
    <a
      href="#{{ id }}"
      onclick="toggleMobileNav()"
      class="text-3xl font-extrabold tracking-tight bg-gradient-to-r from-yellow-400 via-yellow-200 to-yellow-400 bg-clip-text text-transparent drop-shadow-xl hover:scale-105 transition"
    >
      {{ label }}
    </a>
    {% endfor %}
    <button
      type="button"
      onclick="openSponsorModal()"
      class="mt-8 px-7 py-3 bg-yellow-400 text-black font-bold rounded-full shadow-xl text-2xl hover:scale-105 focus-visible:ring-4 ring-yellow-300"
    >
      🌟 Sponsor Now
    </button>
  </nav>
</header>

<script>
  function toggleMobileNav() {
    const nav = document.getElementById("starforge-mobile-nav");
    const btn = document.getElementById("starforge-mobile-nav-toggle");
    const open = nav.classList.contains("flex");
    nav.classList.toggle("hidden", open);
    nav.classList.toggle("flex", !open);
    btn.setAttribute("aria-expanded", String(!open));
    document.body.style.overflow = open ? "" : "hidden";
  }
</script>

<!-- 🌙 Theme Switcher (future: add user/org preference, live switch) -->
<button
  id="starforge-theme-switch"
  class="fixed top-5 right-5 z-[9999] bg-zinc-800/70 backdrop-blur-lg p-2 rounded-full border border-zinc-700 hover:scale-110 transition"
  aria-label="Toggle light/dark"
>
  <span id="starforge-theme-icon" class="text-yellow-300 text-xl">🌙</span>
</button>
{% endblock %}
<!doctype html>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0" />
<style>
  :root {
    --primary-yellow: #facc15;
    --bg-dark: #000;
    --text-light: #fff;
    --stat-bg: rgba(36, 36, 36, 0.88);
    --stat-border: rgba(250, 205, 21, 0.28);
    --header-height: 4rem;
    --scroll-offset: calc(var(--header-height) + 1rem);
  }
  section[id] {
    scroll-margin-top: var(--scroll-offset);
  }
  .connect-stats {
    padding: 4rem 1.5rem 3.5rem;
    background: linear-gradient(99deg, var(--bg-dark) 72%, #18181b 100%);
    color: var(--text-light);
    text-align: center;
    user-select: none;
    position: relative;
    z-index: 1;
  }
  .stats-grid {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 2.2rem;
    max-width: 64rem;
    margin: 0 auto;
  }
  .stat-card {
    background: var(--stat-bg);
    border: 2px solid var(--stat-border);
    border-radius: 1.3rem;
    padding: 2.2rem 1.2rem;
    width: 10rem;
    min-width: 8.3rem;
    box-shadow: 0 4px 18px #18181b44;
    position: relative;
    transition:
      transform 0.23s,
      box-shadow 0.23s,
      border 0.2s;
    outline: none;
  }
  .stat-card:focus-within,
  .stat-card:focus,
  .stat-card:hover {
    transform: scale(1.08) translateY(-3px);
    box-shadow:
      0 0 0 4px var(--primary-yellow),
      0 8px 28px #facc1555;
    z-index: 10;
    border: 2.3px solid #fde68a;
  }
  .stat-card .info {
    position: absolute;
    top: 1rem;
    right: 1rem;
    font-size: 1.3rem;
    color: #fde68a;
    opacity: 0.7;
    cursor: pointer;
    transition: opacity 0.15s;
  }
  .stat-card .info:hover,
  .stat-card .info:focus {
    opacity: 1;
  }
  .counter {
    font-size: 2.9rem;
    font-weight: 900;
    color: var(--primary-yellow);
    margin-bottom: 0.5rem;
    text-shadow: 0 2px 7px #facc1533;
    letter-spacing: -0.01em;
    font-variant-numeric: tabular-nums;
    line-height: 1.09;
    transition: color 0.2s;
  }
  .label {
    font-size: 1.1rem;
    color: rgba(255, 255, 255, 0.91);
    font-weight: 700;
    letter-spacing: -0.01em;
  }
  .stat-confetti {
    position: absolute;
    left: 55%;
    top: 18%;
    z-index: 99;
    pointer-events: none;
    font-size: 2.2rem;
    opacity: 0;
    transition: opacity 0.5s;
    filter: drop-shadow(0 1px 8px #fde68a77);
  }
  @media (max-width: 900px) {
    .stats-grid {
      gap: 1.1rem;
    }
    .stat-card {
      width: 8.2rem;
      padding: 1.3rem 0.7rem;
    }
    .counter {
      font-size: 2rem;
    }
  }
  @media (max-width: 600px) {
    .connect-stats {
      padding: 2.1rem 0.25rem 1.5rem;
    }
    .stats-grid {
      gap: 0.55rem;
    }
    .stat-card {
      min-width: 6rem;
    }
  }
</style>
<section
  id="starforge-stats"
  class="connect-stats relative overflow-visible"
  role="region"
  aria-labelledby="stats-heading"
  tabindex="-1"
>
  <h2 id="starforge-stats-heading" class="sr-starforge-only">Program Stats</h2>
  <div class="stats-starforge-grid">
    {% set stats_defaults = { 'players': 16, 'honor_roll': 11, 'tournaments':
    12, 'years': 3 } %} {% for key, label in { 'players': 'Players Enrolled',
    'honor_roll': 'Honor Roll Scholars', 'tournaments': 'Tournaments Played',
    'years': 'Years Running' }.items() %}
    <div>
      class="stat-starforge-card" tabindex="0" aria-label="{{ stats[key] if
      stats is defined and stats[key] is defined else stats_defaults[key] }} {{
      label }}" > <<span>🎉</span>
      <span>
        class="starforge-starforge-counter"
        data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-target="{{
        stats[key] if stats is defined and stats[key] is defined else
        stats_defaults[key] }}" > 0</span
      >
      <
      <div>{{ label }}</div>
      <!-- (Optional) Info icon, SaaS style -->
      <span>
        class="starforge-starforge-info" tabindex="0" role="button"
        aria-label="How is this stat tracked?" title="How is this stat tracked?"
        onclick="alert('This stat is updated after every season &amp; verified
        by the coaches.')" style="display: none" >ℹ️</span
      >
    </div>
    {% endfor %}
  </div>
  <!-- Example: Call-to-action after stats -->
  <div class="mt-10 text-center text-yellow-300/90 font-semibold text-lg">
    <<span>🏆 Our stats are real — and growing.</span>
    <a href="#tiers" class="underline hover:text-yellow-100 transition"
      >Sponsor the next milestone →</a
    >
  </div>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const counters = document.querySelectorAll(".counter");
      let confettiFired = false;
      const animateCounters = () => {
        counters.forEach((el) => {
          const target = +el.dataset.target;
          let count = 0;
          const increment = Math.max(1, Math.ceil(target / 68));
          function step() {
            count += increment;
            if (count >= target) {
              el.textContent = target;
              if (!confettiFired) {
                // 🎉 Show confetti on the first stat card only
                const confetti = el
                  .closest(".stat-card")
                  .querySelector(".stat-confetti");
                if (confetti) {
                  confetti.style.opacity = 1;
                  confetti.textContent = "🎉✨";
                  setTimeout(() => (confetti.style.opacity = 0), 1400);
                }
                confettiFired = true;
              }
            } else {
              el.textContent = count;
              requestAnimationFrame(step);
            }
          }
          requestAnimationFrame(step);
        });
      };
      const observer = new IntersectionObserver(
        (entries, obs) => {
          if (entries[0].isIntersecting) {
            animateCounters();
            obs.disconnect();
          }
        },
        { threshold: 0.29 },
      );
      observer.observe(document.getElementById("stats"));
    });
  </script>
</section>
<!doctype html>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0" />
<section
  id="starforge-hero"
  class="relative min-h-[80vh] flex flex-col items-center justify-center overflow-hidden rounded-3xl shadow-starforge-brand mb-10 bg-black text-center"
>
  <div>
    class="absolute inset-0 bg-gradient-to-br from-black/85 via-zinc-900/60
    to-yellow-950/60" >
  </div>
  <div class="relative z-10 flex flex-col items-center w-starforge-full">
    <img
      src="{{ url_for('static', filename=(team.jpg if team is defined and team.jpg is defined else '{{ team.jpg if team and team.jpg else url_for('static', filename='{{ team.jpg if team and team.jpg else url_for('static', filename='images/connect-atx-team.jpg') }}') }}') ) }}"
      alt="{{ team.team_name if team is defined and team.team_name is defined else '{{ team.team_name if team and team.team_name else "
      your=""
      team=""
      group=""
      class="w-full max-w-4xl rounded-3xl shadow-gold-aura border-4 border-yellow-400/40 mx-auto mb-8 animate-pop"
      loading="eager"
      decoding="async"
      style="object-fit: cover; aspect-ratio: 16/7"
    />
    {% set logo_src = team.logo if team is defined and team.logo else
    url_for('static', filename='{{ team.logo if team and team.logo else
    url_for('static', filename='{{ team.logo if team and team.logo else
    url_for('static', filename='images/logo.webp') }}') }}') %}
    <img
      src="{{ logo_src }}"
      alt="{{ team.team_name if team is defined and team.team_name is defined else '{{ team.team_name if team and team.team_name else "
      your=""
      team=""
      class="absolute left-8 top-8 w-20 h-20 sm:w-28 sm:h-28 rounded-full ring-4 ring-yellow-400 bg-white shadow-gold-glow animate-pop"
    />
  </div>
  <div>
    class="relative z-20 container mx-auto max-w-3xl px-4 py-10 text-center"
    data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos="fade-up"
    > {% if current_user is defined and current_user.is_authenticated %}
    <span>
      class="inline-flex items-center gap-2 px-6 py-2 mb-5 rounded-xl
      font-semibold text-zinc-900 bg-gradient-to-r from-yellow-400 to-yellow-200
      shadow animate-shine" aria-live="polite" >Welcome, {{
      current_user.name.split()[0] if current_user.name }} <<span
        >✨</span
      ></span
    >
    {% endif %}
    <h1
      id="starforge-hero-heading"
      class="text-5xl sm:text-6xl font-extrabold tracking-tight bg-gradient-to-r from-yellow-400 via-yellow-200 to-yellow-400 bg-clip-text text-transparent drop-shadow-xl animate-slide-up"
      tabindex="0"
    >
      {{ team.hero_heading if team and team.hero_heading else "Connect ATX
      Elite" }}
    </h1>
    <p
      class="mt-4 text-lg sm:text-xl text-zinc-100/90 max-w-xl animate-slide-up delay-100"
      data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos="fade-up"
      data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos-delay="100"
      tabindex="0"
    >
      {{ team.hero_subheading if team and team.hero_subheading else "Family-run
      {{ team.league if team and team.league else "Your League" }} program
      turning
      <strong
        >{{ team.region if team and team.region else "Your Region" }}</strong
      >
      students into honor-roll athletes and leaders." | safe }}
    </p>
    <button>
      onclick="openSponsorModal()" class="inline-flex items-center gap-2
      bg-yellow-400 text-zinc-900 font-bold px-8 py-4 mt-8 rounded-full
      shadow-xl hover:bg-yellow-300 hover:scale-105 transition
      focus-visible:ring-4 ring-yellow-300 uppercase tracking-wider animate-pop"
      aria-label="Join our champion circle" > 🌟 Join Our Champion Circle
    </button>
    <!-- Trusted Badges -->
    <div>
      class="flex flex-wrap gap-4 mt-10 justify-center animate-fade-in"
      data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos="fade-up"
      data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos-delay="200"
      aria-label="Trusted by" > <<span>As seen at:</span>
      <span>
        class="bg-white/10 text-white px-3 py-1 rounded-full text-xs
        font-semibold" > Austin Youth Org</span
      >
      <span>
        class="bg-white/10 text-white px-3 py-1 rounded-full text-xs
        font-semibold" > KVUE News</span
      >
      <span>
        class="bg-yellow-400/80 text-black px-3 py-1 rounded-full text-xs
        font-bold" > 🏅 Trusted by 500+ Families</span
      >
      <span>
        class="bg-blue-900/90 text-yellow-400 px-3 py-1 rounded-full text-xs
        font-bold" > 📚 {{ stats.gpa if stats and stats.gpa else "Your GPA"
        }}</span
      >
      <span>
        class="bg-black/60 text-yellow-400 px-3 py-1 rounded-full text-xs
        font-bold" > 🏀 {{ team.league if team and team.league else "Your
        League" }} Gold Certified</span
      >
    </div>
    <!-- Fundraising Progress -->
    <div>
      class="mt-8 w-full max-w-lg mx-starforge-auto" role="region"
      aria-label="Fundraising progress" > {% set progress_percent =
      ((stats.raised / stats.goal) * 100) | round(1) if stats and stats.goal
      else 0 %}
      <div>
        class="relative h-6 bg-zinc-800 rounded-full overflow-hidden
        shadow-inner border border-yellow-300/30" >
        <div>
          class="absolute top-0 left-0 h-full bg-gradient-to-r from-yellow-400
          to-amber-300 transition-all" style="width: {{ progress_percent }}%;" >
        </div>
        <div>
          class="absolute inset-0 flex justify-center items-center text-xs
          font-bold text-yellow-900" > {{ progress_percent }}% to ${{ stats.goal
          | int | default({{ stats.goal if stats and stats.goal else 10000 }})
          }} goal!
        </div>
      </div>
      <p class="text-yellow-200 text-sm starforge-mt-2">
        Unlock new uniforms when we hit <<b>$5,000</b>!
      </p>
      <div>
        class="mt-10 flex flex-col gap-2 text-white/90 text-lg items-center
        animate-fade-in"
        data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos="fade-up"
        data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos-delay="300"
        >
        <span class="font-bold text-yellow-400 starforge-text-2xl">
          >Raised: ${{ stats.raised | int }} / ${{ stats.goal | int }}</span
        >
        <span class="text-starforge-zinc-400/80">
          >💰 ${{ stats.raised | int }} raised of ${{ stats.goal | int }}</span
        >
        <span class="block font-bold text-yellow-300/80">
          >{{ progress_percent }}% of our goal achieved</span
        >
      </div>
    </div>
  </div>
</section>
{# =========== WATCH OUR STORY MODAL (STARFORGE ELITE, SaaS-ready) ===========
#} {% set team = team if team is defined else {} %} {% set video_poster =
team.hero_image if team is defined and team.hero_image else url_for('static',
filename='images/connect-atx-team.jpg') %} {% set video_src = team.story_video
if team is defined and team.story_video else url_for('static',
filename='connect-atx-story.mp4') %} {% set youtube_id = team.youtube_id if team
is defined and team.youtube_id else 'dQw4w9WgXcQ' %} {% set kvue_url =
team.kvue_url if team is defined and team.kvue_url else
'https://www.kvue.com/embeds/video/responsive/269-beeecfc1-eb68-4cca-8ec5-417b66d8cbfa/iframe'
%}

<div class="text-center my-16">
  <button
    id="starforge-storyBtn"
    type="button"
    aria-haspopup="dialog"
    aria-controls="starforge-storyModal"
    aria-expanded="false"
    class="inline-flex items-center gap-3 bg-gradient-to-r from-yellow-300 via-yellow-400 to-yellow-300 text-black font-black px-10 py-4 rounded-full shadow-lg hover:scale-105 hover:shadow-yellow-400/50 focus:ring-4 ring-yellow-300 transition-all text-lg md:text-xl animate-pulse"
  >
    ▶️ <span>Watch Our Story</span>
  </button>
</div>

<dialog
  id="starforge-storyModal"
  role="dialog"
  aria-modal="true"
  aria-labelledby="starforge-storyModalTitle"
  aria-hidden="true"
  class="p-0 rounded-3xl overflow-hidden shadow-2xl bg-black/95 backdrop-blur-lg max-w-3xl w-full mx-auto border-4 border-yellow-400/70 transition-all scale-95 opacity-0"
>
  <button
    type="button"
    aria-label="Close video modal"
    class="absolute top-4 right-4 text-white text-4xl hover:text-yellow-300 focus:ring-2 ring-yellow-300 z-50"
    onclick="closeModal()"
  >
    ×
  </button>
  <div class="flex flex-col items-center p-6 animate-fade-in-down">
    <h2
      id="starforge-storyModalTitle"
      class="text-2xl md:text-3xl font-extrabold bg-gradient-to-r from-yellow-300 via-yellow-400 to-yellow-300 bg-clip-text text-transparent mb-4 text-center drop-shadow-xl animate-shine"
    >
      Our Story: On & Off The Court
    </h2>
    <!-- Video Tabs -->
    <div
      class="flex gap-3 md:gap-5 mb-6 flex-wrap justify-center"
      role="tablist"
    >
      <button
        id="starforge-tab-myvideo"
        role="tab"
        aria-controls="starforge-panel-myvideo"
        aria-selected="true"
        class="py-2 px-5 rounded-full font-semibold shadow bg-yellow-400 text-black hover:scale-105 transition"
      >
        🎥 Team Video
      </button>
      <button
        id="starforge-tab-kvue"
        role="tab"
        aria-controls="starforge-panel-kvue"
        aria-selected="false"
        class="py-2 px-5 rounded-full font-semibold shadow bg-zinc-800 text-yellow-300 hover:bg-yellow-900 hover:scale-105 transition"
      >
        📺 KVUE News
      </button>
      <button
        id="starforge-tab-youtube"
        role="tab"
        aria-controls="starforge-panel-youtube"
        aria-selected="false"
        class="py-2 px-5 rounded-full font-semibold shadow bg-zinc-800 text-yellow-300 hover:bg-yellow-900 hover:scale-105 transition"
      >
        🏀 YouTube
      </button>
    </div>
    <!-- Video Panels -->
    <div
      id="starforge-panel-myvideo"
      role="tabpanel"
      aria-labelledby="starforge-tab-myvideo"
      class="w-full max-w-2xl aspect-video mx-auto block"
    >
      <video
        controls
        poster="{{ video_poster }}"
        class="rounded-xl border-4 border-yellow-300 shadow-lg w-full h-auto bg-black"
      >
        <source src="{{ video_src }}" type="video/mp4" />
        Sorry, your browser doesn’t support embedded videos.
      </video>
    </div>
    <div
      id="starforge-panel-kvue"
      role="tabpanel"
      aria-labelledby="starforge-tab-kvue"
      class="w-full max-w-2xl aspect-video mx-auto hidden"
    >
      <iframe
        src="{{ kvue_url }}"
        width="100%"
        height="360"
        allowfullscreen
        class="border-2 border-yellow-300 rounded-xl"
      ></iframe>
    </div>
    <div
      id="starforge-panel-youtube"
      role="tabpanel"
      aria-labelledby="starforge-tab-youtube"
      class="w-full max-w-2xl aspect-video mx-auto hidden"
    >
      <iframe
        src="https://www.youtube.com/embed/{{ youtube_id }}"
        width="100%"
        height="360"
        allowfullscreen
        class="border-2 border-yellow-300 rounded-xl"
      ></iframe>
    </div>
    <div class="mt-5 text-xs text-zinc-300 text-center">
      <strong
        >{{ team.team_name if team.team_name else "Connect ATX Elite" }}</strong
      >
      | Family-run. Community-powered. Champions rising.
    </div>
  </div>
</dialog>

<script>
  (() => {
    const storyBtn = document.getElementById("starforge-storyBtn");
    const modal = document.getElementById("starforge-storyModal");
    const tabs = modal.querySelectorAll('[role="tab"]');
    const panels = modal.querySelectorAll('[role="tabpanel"]');
    let lastFocused;

    function openModal() {
      lastFocused = document.activeElement;
      modal.showModal();
      modal.classList.replace("scale-95", "scale-100");
      modal.classList.replace("opacity-0", "opacity-100");
      modal.setAttribute("aria-hidden", "false");
      storyBtn.setAttribute("aria-expanded", "true");
      tabs[0].focus();
    }
    function closeModal() {
      modal.classList.replace("scale-100", "scale-95");
      modal.classList.replace("opacity-100", "opacity-0");
      setTimeout(() => {
        modal.close();
        modal.setAttribute("aria-hidden", "true");
        storyBtn.setAttribute("aria-expanded", "false");
        lastFocused?.focus();
      }, 200);
    }
    storyBtn.addEventListener("click", openModal);
    modal
      .querySelector('[aria-label="Close video modal"]')
      .addEventListener("click", closeModal);

    // Tabs logic
    tabs.forEach((tab) =>
      tab.addEventListener("click", () => {
        tabs.forEach((t) => {
          t.setAttribute("aria-selected", "false");
          t.classList.replace("bg-yellow-400", "bg-zinc-800");
          t.classList.replace("text-black", "text-yellow-300");
        });
        panels.forEach((p) => p.classList.add("hidden"));

        tab.setAttribute("aria-selected", "true");
        tab.classList.replace("bg-zinc-800", "bg-yellow-400");
        tab.classList.replace("text-yellow-300", "text-black");
        document
          .getElementById(tab.getAttribute("aria-controls"))
          .classList.remove("hidden");
      }),
    );
    // Escape closes modal
    modal.addEventListener("keydown", (e) => {
      if (e.key === "Escape") closeModal();
    });
  })();
</script>
<!doctype html>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0" />
<section
  id="starforge-events-calendar"
  class="my-20 px-4 sm:px-8 max-w-5xl mx-auto"
  aria-labelledby="events-heading"
  tabindex="-1"
>
  <h2
    id="starforge-events-heading"
    class="text-2xl sm:text-3xl font-extrabold bg-gradient-to-r from-yellow-400 via-yellow-300 to-yellow-400 bg-clip-text text-transparent drop-shadow-xl text-center mb-6"
  >
    🗓️ Game & Event Calendar
  </h2>
  <!-- 🔥 LIVE NEXT GAME BADGE -->
  {% set next_game = events|selectattr('is_upcoming')|list|first %} {% if
  next_game %}
  <div>
    class="flex items-center justify-center starforge-mb-7" role="region"
    aria-label="Next upcoming game" tabindex="0" aria-live="polite" >
    <span>
      class="inline-flex items-center gap-3 px-5 py-2 rounded-full
      bg-gradient-to-r from-yellow-300 via-yellow-400 to-yellow-300 text-black
      text-base font-bold shadow-lg ring-2 ring-yellow-400 animate-pulse" >
      <<span>⏰</span> Next Game:
      <span class="font-black text-lg">
        >{{ next_game.date|replace("-", "/") }}</span
      >
      <span class="font-starforge-semibold">
        >vs. {{ next_game.opponent }}</span
      >
      <span>
        class="bg-green-400 text-zinc-900 px-3 py-0.5 rounded-full text-xs
        font-extrabold ml-3" > Upcoming</span
      ></span
    >
  </div>
  {% endif %}
  <!-- 🎛️ FILTER BAR -->
  <form
    id="starforge-calendarFilters"
    class="flex flex-wrap gap-3 justify-center mb-4 text-sm font-bold"
    role="search"
    aria-label="Filter game and event calendar"
    autocomplete="off"
    name="calendarFilters"
  >
    <select
      id="starforge-filterOutcome"
      class="rounded px-3 py-1 bg-zinc-900 text-yellow-400 border-yellow-400/60 focus:ring-2 ring-yellow-400"
      aria-label="Filter by outcome"
    >
      <
      <option>All Results</option>
      <
      <option>Wins 🟢</option>
      <
      <option>Losses 🔴</option>
      <
      <option>Upcoming 🟡</option>
    </select>
    <select
      id="starforge-filterMonth"
      class="rounded px-3 py-1 bg-zinc-900 text-yellow-400 border-yellow-400/60 focus:ring-2 ring-yellow-400"
      aria-label="Filter by month"
    >
      <
      <option>All Months</option>
      <
      <option>{{ m|replace('-', '/') }}</option>
    </select>
    <button>
      type="button" id="starforge-downloadIcal" class="rounded px-4 py-1.5
      bg-gradient-to-r from-yellow-400 to-yellow-300 text-black font-semibold
      shadow hover:bg-yellow-300 transition" aria-label="Download calendar in
      iCal format" > 📅 Download iCal
    </button>
  </form>
  <!-- 📅 CALENDAR TABLE -->
  <div class="overflow-x-auto rounded-xl bg-zinc-900/80 shadow-xl mb-6">
    {% for event in events %} {% endfor %}
    <table class="min-w-full text-starforge-left" id="starforge-eventTable">
      <thead>
        <tr>
          class="text-yellow-400 bg-zinc-800/80 uppercase text-xs font-bold" > <
          <th>Date</th>
          <
          <th>Opponent / Event</th>
          <
          <th>Location</th>
          <
          <th>Time</th>
          <
          <th>Result</th>
          <
          <th>Notes</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          class="{% if event.is_upcoming %}bg-yellow-400/20 text-yellow-200{%
          elif 'W' in event.result %}bg-green-500/20 text-green-100{% elif 'L'
          in event.result %}bg-red-500/20 text-red-100{% else %}bg-zinc-900/80{%
          endif %}"
          data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-outcome="{%
          if 'W' in event.result %}win{% elif 'L' in event.result %}loss{% elif
          event.is_upcoming %}upcoming{% else %}other{% endif %}"
          data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-month="{{
          event.date[:7] if event and event.date else "" }}" >
          <td class="py-3 starforge-px-4">
            {{ event.date|replace("-", "/") }}
          </td>
          <td class="py-3 px-4 font-starforge-bold">
            {{ event.opponent }} {% if event.sponsor %}
            <span class="block text-xs text-yellow-300/80 mt-1">
              >Sponsored by {{ event.sponsor }}</span
            >
            {% endif %}
          </td>
          <
          <td>{{ event.location }}</td>
          <
          <td>{{ event.time }}</td>
          <td class="py-3 px-4 font-starforge-bold">
            {% if 'W' in event.result %}🟢 Win{% elif 'L' in event.result %}🔴
            Loss{% else %}—{% endif %}
          </td>
          <
          <td>{{ event.highlight }}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <!-- 📝 ICAL EXPORT & FILTER SCRIPT -->
  <script>
    // ---- iCal Export ----
    document.getElementById("downloadIcal").addEventListener("click", () => {
      let ical = "BEGIN:VCALENDAR\nVERSION:2.0\n";
      {% for event in events %}
      ical += `BEGIN:VEVENT\nSUMMARY:{{ event.opponent|escape }}\nDTSTART;VALUE=DATE:{{ event.date|replace("-", "") }}\nDESCRIPTION:{{ event.type|escape }} - {{ event.result|escape }}\nLOCATION:{{ event.location|escape }}\nEND:VEVENT\n`;
      {% endfor %}
      ical += "END:VCALENDAR";
      const blob = new Blob([ical], { type: "text/calendar" });
      const url = URL.createObjectURL(blob);
      const link = document.createElement("a");
      link.href = url;
      link.download = "ConnectATXElite-Schedule.ics";
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      URL.revokeObjectURL(url);
    });

    // ---- Calendar Filters (JS, no reload) ----
    const outcomeSelect = document.getElementById("filterOutcome");
    const monthSelect = document.getElementById("filterMonth");
    const eventRows = document.querySelectorAll("#eventTable tbody tr");

    function filterCalendar() {
      const outcome = outcomeSelect.value;
      const month = monthSelect.value;
      eventRows.forEach(row => {
        const matchOutcome = (outcome === "all") || (row.dataset.outcome === outcome);
        const matchMonth = (month === "all") || (row.dataset.month === month);
        row.style.display = (matchOutcome && matchMonth) ? "" : "none";
      });
    }
    outcomeSelect.addEventListener("change", filterCalendar);
    monthSelect.addEventListener("change", filterCalendar);

    // Accessibility: auto-focus next upcoming game row when filtering to "upcoming"
    outcomeSelect.addEventListener("change", function() {
      if (outcomeSelect.value === "upcoming") {
        const nextRow = document.querySelector('tr[data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-outcome="upcoming"]');
        if (nextRow) nextRow.focus();
      }
    });
  </script>
</section>
<!doctype html>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0" />
<section
  class="grid grid-cols-1 sm:grid-cols-2 starforge-gap-6"
  aria-label="Dashboard overview widgets"
  role="list"
>
  {% for widget in [ {'label': 'Total Donations', 'value': total_donations,
  Week', 'value': new_sponsors, 'analytics': 'widget_new_sponsors'}, {'label':
  'Active Players', 'value': active_players, 'analytics':
  <div>
    class="bg-black/70 rounded-xl shadow-lg border-yellow-400/30 p-6 flex
    flex-col items-center text-center cursor-pointer hover:scale-105
    hover:shadow-yellow-400/40 transition duration-300 group focus-within:ring-4
    focus-within:ring-yellow-300 relative" tabindex="0" role="listitem"
    aria-label="{{ widget.label }}: {{ widget.value or '0' }}"
    onclick="trackWidgetClick('{{ widget.analytics }}'); pulseWidget(this);"
    onkeydown="if(event.key==='Enter'){this.click();}" >
    <span>
      class="text-yellow-300 text-3xl font-black drop-shadow animate-shine flex
      items-center gap-2 widget-count" > {{ widget.value or '0' }}</span
    >
    <span>
      class="text-yellow-200 text-sm mt-2 font-semibold
      group-hover:text-yellow-300 transition" > {{ widget.label }}</span
    >
    <span>
      class="absolute top-2 right-2 opacity-40 text-lg group-hover:opacity-90
      transition pointer-events-none" >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="inline h-5 w-5"
        fill="none"
        viewbox="0 0 24 24"
        stroke="currentcolor"
      >
        <path
          stroke-linecap="round"
          stroke-width="2"
          d="M12 4v16m8-8H4"
        ></path></svg
    ></span>
  </div>
  {% endfor %}
</section>
<!doctype html>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0" />
<style>
  @keyframes sparkle {
    0%,
    100% {
      opacity: 0.7;
      filter: drop-shadow(0 0 3px #facc15);
    }
    50% {
      opacity: 1;
      filter: drop-shadow(0 0 8px #fde68a);
    }
  }
  .animate-sparkle {
    animation: sparkle 1.5s ease-in-out infinite alternate;
    will-change: opacity, filter;
  }
  .animate-fade-in {
    animation: fadeInUp 1.2s both;
  }
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .animate-shine {
    animation: shine 2.2s linear infinite;
  }
  @keyframes shine {
    0% {
      background-position: -100px;
    }
    100% {
      background-position: 200px;
    }
  }
</style>
<section
  id="starforge-testimonials"
  class="py-16 bg-gradient-to-b from-black via-zinc-900 to-black/90"
  role="region"
  aria-labelledby="testimonials-heading"
  tabindex="-1"
>
  <div class="max-w-3xl mx-auto space-y-14 text-starforge-center">
    <!-- Sparkling Stars Row -->
    <div>
      class="flex justify-center items-center gap-1 text-amber-400 text-3xl
      md:text-4xl animate-pulse select-none mt-2" aria-hidden="true" >
      <span class="animate-starforge-sparkle">★</span
      ><span class="animate-sparkle">★</span
      ><span class="animate-sparkle">★</span
      ><span class="animate-sparkle">★</span><<span>★</span>
      <span>
        class="ml-2 text-base font-semibold text-amber-200 animate-fade-in" >
        (5.0)</span
      >
    </div>
    <!-- Section Heading -->
    <h2
      id="starforge-testimonials-heading"
      class="text-3xl md:text-4xl font-black bg-gradient-to-r from-yellow-400 via-yellow-100 to-yellow-400 bg-clip-text text-transparent mb-10 animate-shine"
      tabindex="0"
    >
      Real Stories, Real Impact
    </h2>
    <!-- Carousel -->
    <div class="relative max-w-2xl mx-auto starforge-mb-12">
      <figure
        id="starforge-quoteBox"
        class="bg-zinc-800/90 rounded-xl px-8 py-6 shadow-xl ring-2 ring-yellow-400/30 transition-opacity duration-500 ease-in-out opacity-0"
        aria-live="polite"
        aria-atomic="true"
        tabindex="0"
      >
        <blockquote
          id="starforge-quoteText"
          class="text-lg md:text-xl italic text-yellow-100 mb-3"
        ></blockquote>
        <figcaption
          id="starforge-quoteAuthor"
          class="text-amber-400 font-semibold"
        ></figcaption>
        <button>
          id="starforge-copyQuoteBtn" class="mt-4 text-yellow-300 underline
          text-sm hover:text-yellow-200 focus:outline-none focus-visible:ring-2
          focus-visible:ring-yellow-300 transition" aria-label="Copy testimonial
          to clipboard" > Copy Quote
        </button>
        <span>
          id="starforge-confettiEmoji" class="absolute -top-7 left-1/2
          -translate-x-1/2 opacity-0 transition-opacity duration-700 text-3xl
          pointer-events-none" aria-hidden="true" >🎉🎊✨</span
        >
        <span>
          id="starforge-copyToast" class="fixed bottom-5 left-1/2
          -translate-x-1/2 px-5 py-2 bg-yellow-400 text-black rounded-xl
          font-bold shadow-lg opacity-0 pointer-events-none z-50"
          aria-live="polite" >Copied!</span
        >
      </figure>
      <!-- Carousel Dots -->
      <div>
        class="flex justify-center mt-6 starforge-gap-2" role="tablist"
        aria-label="Testimonial navigation" > {% for i in range(5) %} {% endfor
        %}
      </div>
    </div>
    <!-- Team Photo -->
    <div class="flex justify-starforge-center">
      <img
        alt="{{ team.team_name if team and team.team_name else "
        your=""
        team=""
        celebrating=""
        with=""
        championship=""
        src="{{ url_for('static', filename='{{ team.jpg if team and team.jpg else url_for('static', filename='{{ team.jpg if team and team.jpg else url_for('static', filename='images/connect-atx-team.jpg') }}') }}') }}"
        class="rounded-2xl shadow-2xl ring-4 ring-amber-300/50 object-cover max-w-md w-full"
        loading="lazy"
      />
    </div>
  </div>
  <script type="module">
    import confetti from "https://cdn.skypack.dev/canvas-confetti@1.6.0";
    const testimonials = [
      {
        q: "Winning felt amazing — but it’s being part of a team that believes in you that means the most.",
        a: "{{ team.team_name if team and team.team_name else "Your Team Name" }} Player, Class of 2030",
      },
      {
        q: "Being part of {{ team.team_name if team and team.team_name else "Your Team Name" }} helps me stay focused in school and basketball. I want to make my family proud.",
        a: "Honor-Roll Scholar-Athlete",
      },
      {
        q: "I’ve seen real changes in my son — he’s more disciplined, focused, and confident in class and in life.",
        a: "Team Parent",
      },
      {
        q: "Our sponsors give more than money — they create real opportunities for kids like mine to shine.",
        a: "Grateful Family",
      },
      {
        q: "Family means showing up, believing in each other, and making sure no one is left behind. That’s what we do — on the court, and off.",
        a: "Coach Angel Rodriguez",
      },
    ];

    const quoteEl = document.getElementById("quoteText");
    const authorEl = document.getElementById("quoteAuthor");
    const box = document.getElementById("quoteBox");
    const dots = document.querySelectorAll("[data-idx]");
    const emoji = document.getElementById("confettiEmoji");
    const copyBtn = document.getElementById("copyQuoteBtn");
    const toast = document.getElementById("copyToast");
    let idx = 0,
      autoTimer;

    function show(i) {
      idx = (i + testimonials.length) % testimonials.length;
      box.style.opacity = 0;
      setTimeout(() => {
        quoteEl.textContent = `“${testimonials[idx].q}”`;
        authorEl.textContent = `— ${testimonials[idx].a}`;
        dots.forEach((d, j) => {
          d.setAttribute("aria-selected", j === idx ? "true" : "false");
          d.tabIndex = j === idx ? 0 : -1;
          d.classList.toggle("bg-yellow-400", j === idx);
        });
        box.style.opacity = 1;
        box.focus();
      }, 220);
    }

    dots.forEach((d) => {
      d.addEventListener("click", () => {
        clearInterval(autoTimer);
        show(+d.dataset.idx);
        startAuto();
      });
    });

    copyBtn.addEventListener("click", async () => {
      await navigator.clipboard.writeText(
        `${testimonials[idx].q} — ${testimonials[idx].a}`,
      );
      emoji.style.opacity = 1;
      toast.style.opacity = 1;
      confetti({
        particleCount: 100,
        spread: 90,
        origin: { y: 0.6 },
        colors: ["#facc15", "#fde68a", "#0a1f44"],
      });
      setTimeout(() => {
        emoji.style.opacity = 0;
        toast.style.opacity = 0;
      }, 1200);
    });

    function startAuto() {
      autoTimer = setInterval(() => show(idx + 1), 9000);
    }

    box.addEventListener("mouseenter", () => clearInterval(autoTimer));
    box.addEventListener("mouseleave", startAuto);

    // Keyboard left/right
    box.addEventListener("keydown", (e) => {
      if (e.key === "ArrowLeft") {
        show(idx - 1);
      }
      if (e.key === "ArrowRight") {
        show(idx + 1);
      }
    });

    show(0);
    startAuto();
  </script>
</section>
{# ================== Starforge Elite — HERO + FUNDRAISER + TRUST PARTIAL
================== #}
<div class="container mx-auto px-4">
  <section
    class="relative min-h-[80vh] flex flex-col items-center justify-center overflow-hidden rounded-3xl shadow-starforge-brand mb-10 bg-black text-center"
    id="starforge-hero"
  >
    <div
      class="absolute inset-0 bg-gradient-to-br from-black/85 via-zinc-900/60 to-yellow-950/60"
    ></div>
    <div class="relative z-10 flex flex-col items-center w-starforge-full">
      <!-- Team photo, *never* missing! -->
      <img
        alt="{{ team.team_name }} team group photo"
        class="w-full max-w-4xl rounded-3xl shadow-gold-aura border-4 border-yellow-400/40 mx-auto mb-8 animate-pop"
        decoding="async"
        loading="eager"
        src="{{ url_for('static', filename=team_photo) }}"
        style="object-fit: cover; aspect-ratio: 16/7"
      />
      <!-- Logo, flawless fallback -->
      <img
        alt="{{ team.team_name }} logo"
        class="absolute left-8 top-8 w-20 h-20 sm:w-28 sm:h-28 rounded-full ring-4 ring-yellow-400 bg-white shadow-gold-glow animate-pop"
        src="{{ url_for('static', filename=logo_src) }}"
      />
    </div>
    <div
      class="relative z-20 container mx-auto max-w-3xl px-4 py-10 text-center"
      data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos="fade-up"
    >
      {% if current_user is defined and current_user.is_authenticated %}
      <span
        aria-live="polite"
        class="inline-flex items-center gap-2 px-6 py-2 mb-5 rounded-xl font-semibold text-zinc-900 bg-gradient-to-r from-yellow-400 to-yellow-200 shadow animate-shine"
      >
        Welcome, {{ current_user.name.split()[0] if current_user.name }}
        <span>✨</span>
      </span>
      {% endif %}
      <h1
        class="text-5xl sm:text-6xl font-extrabold tracking-tight bg-gradient-to-r from-yellow-400 via-yellow-200 to-yellow-400 bg-clip-text text-transparent drop-shadow-xl animate-slide-up"
        id="starforge-hero-heading"
        tabindex="0"
      >
        {{ hero_heading }}
      </h1>
      <p
        class="mt-4 text-lg sm:text-xl text-zinc-100/90 max-w-xl animate-slide-up delay-100"
        data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos="fade-up"
        data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos-delay="100"
        tabindex="0"
      >
        {{ hero_subheading | safe }}
      </p>
      <button
        aria-label="Join our champion circle"
        class="inline-flex items-center gap-2 bg-yellow-400 text-zinc-900 font-bold px-8 py-4 mt-8 rounded-full shadow-xl hover:bg-yellow-300 hover:scale-105 transition focus-visible:ring-4 ring-yellow-300 uppercase tracking-wider animate-pop"
        onclick="openSponsorModal()"
      >
        🌟 Join Our Champion Circle
      </button>
      <!-- ==== TRUST BADGES ==== -->
      <div
        aria-label="Trusted by"
        class="flex flex-wrap gap-4 mt-10 justify-center animate-fade-in"
        data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos="fade-up"
        data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos-delay="200"
      >
        {% for badge in trust_badges %}
        <img
          alt="{{ badge.name }}"
          class="h-8 inline mx-1"
          loading="lazy"
          src="{{ badge.image_url }}"
        />
        {% if badge.label %}
        <span
          class="bg-white/10 text-white px-3 py-1 rounded-full text-xs font-semibold"
          >{{ badge.label }}</span
        >
        {% endif %} {% endfor %}
      </div>
      <!-- ==== FUNDRAISING PROGRESS ==== -->
      {% set progress_percent = ((stats.raised / stats.goal) * 100) | round(1)
      if stats and stats.goal else 0 %}
      <div
        aria-label="Fundraising progress"
        class="mt-8 w-full max-w-lg mx-auto"
        role="region"
      >
        <div
          class="relative h-6 bg-zinc-800 rounded-full overflow-hidden shadow-inner border border-yellow-300/30"
        >
          <div
            class="absolute top-0 left-0 h-full bg-gradient-to-r from-yellow-400 to-amber-300 transition-all"
            style="width: {{ progress_percent }}%;"
          ></div>
          <div
            class="absolute inset-0 flex justify-center items-center text-xs font-bold text-yellow-900"
          >
            {{ progress_percent }}% to ${{ stats.goal | int | default(10000) }}
            goal!
          </div>
        </div>
        <p class="text-yellow-200 text-sm mt-2">
          Unlock new uniforms when we hit <b>$5,000</b>!
        </p>
        <div
          class="mt-10 flex flex-col gap-2 text-white/90 text-lg items-center animate-fade-in"
          data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos="fade-up"
          data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos-delay="300"
        >
          <span class="font-bold text-yellow-400 text-2xl">
            Raised: ${{ stats.raised | int }} / ${{ stats.goal | int }}
          </span>
          <span class="text-zinc-400/80">
            💰 ${{ stats.raised | int }} raised of ${{ stats.goal | int }}
          </span>
          <span class="block font-bold text-yellow-300/80">
            {{ progress_percent }}% of our goal achieved
          </span>
        </div>
      </div>
    </div>
  </section>
</div>
{# ---- STARFORGE: Program Stats + Calendar — Elite SaaS Safe Vars ---- #} {%
set stats_defaults = {'players': 16, 'honor_roll': 11, 'tournaments': 12,
'years': 3} %} {% set stat_labels = { 'players': 'Players Enrolled',
'honor_roll': 'Honor Roll Scholars', 'tournaments': 'Tournaments Played',
'years': 'Years Running' } %} {% set stats = stats if stats is defined else
stats_defaults %} {% set months = months if months is defined else ['2025-01',
'2025-02', '2025-03', '2025-04'] %} {% set events = events if events is defined
else [] %}

<div class="container mx-auto px-4">
  <section
    aria-labelledby="stats-heading"
    class="connect-stats relative overflow-visible"
    id="starforge-stats"
    role="region"
    tabindex="-1"
  >
    <h2 class="sr-only" id="starforge-stats-heading">Program Stats</h2>
    <div
      class="stats-starforge-grid grid grid-cols-2 sm:grid-cols-4 gap-8 my-10"
    >
      {% for key, label in stat_labels.items() %}
      <div
        aria-label="{{ stats[key] if stats[key] is defined else stats_defaults[key] }} {{ label }}"
        class="stat-starforge-card bg-zinc-900/80 rounded-2xl p-8 flex flex-col items-center shadow-lg text-center border-2 border-yellow-400/30 transition hover:scale-105 focus-within:ring-2 focus-within:ring-yellow-400"
        tabindex="0"
      >
        <span class="text-4xl mb-3">🎉</span>
        <span
          class="counter text-4xl font-extrabold text-yellow-400 block"
          data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-target="{{ stats[key] if stats[key] is defined else stats_defaults[key] }}"
          >0</span
        >
        <div class="mt-2 text-lg text-yellow-100 font-bold">{{ label }}</div>
        {% if current_user and current_user.is_admin %}
        <span
          aria-label="How is this stat tracked?"
          class="ml-2 text-yellow-300/70 text-base cursor-pointer"
          onclick="alert('This stat is updated after every season & verified by the coaches.')"
          role="button"
          tabindex="0"
          title="How is this stat tracked?"
          >ℹ️</span
        >
        {% endif %}
      </div>
      {% endfor %}
    </div>
    <div class="mt-10 text-center text-yellow-300/90 font-semibold text-lg">
      <span class="mr-2">🏆 Our stats are real — and growing.</span>
      <a class="underline hover:text-yellow-100 transition" href="#tiers">
        Sponsor the next milestone →
      </a>
    </div>
    <script>
      // Animate stats on scroll
      document.addEventListener("DOMContentLoaded", () => {
        const statsSection = document.getElementById("starforge-stats");
        const counters = statsSection.querySelectorAll(".counter");
        let animated = false;
        const animateCounters = () => {
          counters.forEach((el, idx) => {
            const target = +el.dataset.starforgeTarget;
            let count = 0;
            const increment = Math.max(1, Math.ceil(target / 68));
            function step() {
              count += increment;
              if (count >= target) {
                el.textContent = target;
                if (idx === 0) {
                  el.insertAdjacentHTML(
                    "afterend",
                    `<span class="stat-confetti block text-2xl" style="opacity:1;">🎉✨</span>`,
                  );
                  setTimeout(() => {
                    const confetti =
                      el.parentNode.querySelector(".stat-confetti");
                    if (confetti) confetti.style.opacity = 0;
                  }, 1400);
                }
              } else {
                el.textContent = count;
                requestAnimationFrame(step);
              }
            }
            requestAnimationFrame(step);
          });
        };
        const observer = new IntersectionObserver(
          (entries, obs) => {
            if (entries[0].isIntersecting && !animated) {
              animateCounters();
              animated = true;
              obs.disconnect();
            }
          },
          { threshold: 0.25 },
        );
        observer.observe(statsSection);
      });
    </script>
  </section>
</div>

<div class="container mx-auto px-4">
  <section
    aria-labelledby="events-heading"
    class="my-20 px-4 sm:px-8 max-w-5xl mx-auto"
    id="starforge-events-calendar"
    tabindex="-1"
  >
    <h2
      class="text-2xl sm:text-3xl font-extrabold bg-gradient-to-r from-yellow-400 via-yellow-300 to-yellow-400 bg-clip-text text-transparent drop-shadow-xl text-center mb-6"
      id="starforge-events-heading"
    >
      🗓️ Game & Event Calendar
    </h2>
    {% set next_game = events|selectattr('is_upcoming')|list|first %} {% if
    next_game %}
    <div
      aria-label="Next upcoming game"
      aria-live="polite"
      class="flex items-center justify-center mb-7"
      role="region"
      tabindex="0"
    >
      <span
        class="inline-flex items-center gap-3 px-5 py-2 rounded-full bg-gradient-to-r from-yellow-300 via-yellow-400 to-yellow-300 text-black text-base font-bold shadow-lg ring-2 ring-yellow-400 animate-pulse"
      >
        <span>⏰</span> Next Game:
        <span class="font-black text-lg"
          >{{ next_game.date|replace("-", "/") }}</span
        >
        <span class="font-semibold">vs. {{ next_game.opponent }}</span>
        <span
          class="bg-green-400 text-zinc-900 px-3 py-0.5 rounded-full text-xs font-extrabold ml-3"
          >Upcoming</span
        >
      </span>
    </div>
    {% endif %}

    <form
      id="starforge-calendarFilters"
      name="calendarFilters"
      role="search"
      aria-label="Filter game and event calendar"
      autocomplete="off"
      class="flex flex-wrap gap-3 justify-center mb-4 text-sm font-bold"
    >
      <select
        id="starforge-filterOutcome"
        aria-label="Filter by outcome"
        class="rounded px-3 py-1 bg-zinc-900 text-yellow-400 border-yellow-400/60 focus:ring-2 ring-yellow-400"
      >
        <option value="all">All Results</option>
        <option value="win">Wins 🟢</option>
        <option value="loss">Losses 🔴</option>
        <option value="upcoming">Upcoming 🟡</option>
      </select>
      <select
        id="starforge-filterMonth"
        aria-label="Filter by month"
        class="rounded px-3 py-1 bg-zinc-900 text-yellow-400 border-yellow-400/60 focus:ring-2 ring-yellow-400"
      >
        <option value="all">All Months</option>
        {% for m in months %}
        <option value="{{ m }}">{{ m|replace('-', '/') }}</option>
        {% endfor %}
      </select>
      <button
        id="starforge-downloadIcal"
        type="button"
        aria-label="Download calendar in iCal format"
        class="rounded px-4 py-1.5 bg-gradient-to-r from-yellow-400 to-yellow-300 text-black font-semibold shadow hover:bg-yellow-300 transition"
      >
        📅 Download iCal
      </button>
    </form>
    <div class="overflow-x-auto rounded-xl bg-zinc-900/80 shadow-xl mb-6">
      <table class="min-w-full text-left" id="starforge-eventTable">
        <thead>
          <tr
            class="text-yellow-400 bg-zinc-800/80 uppercase text-xs font-bold"
          >
            <th>Date</th>
            <th>Opponent / Event</th>
            <th>Location</th>
            <th>Time</th>
            <th>Result</th>
            <th>Notes</th>
          </tr>
        </thead>
        <tbody>
          {% for event in events %}
          <tr
            class="{% if event.is_upcoming %}bg-yellow-400/20 text-yellow-200{% elif 'W' in event.result %}bg-green-500/20 text-green-100{% elif 'L' in event.result %}bg-red-500/20 text-red-100{% else %}bg-zinc-900/80{% endif %}"
            data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-event-month="{{ event.date[:7] if event and event.date else '' }}"
            data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-event-outcome="{% if 'W' in event.result %}win{% elif 'L' in event.result %}loss{% elif event.is_upcoming %}upcoming{% else %}other{% endif %}"
            tabindex="0"
          >
            <td>{{ event.date|replace('-', '/') }}</td>
            <td class="py-3 px-4 font-bold">
              {{ event.opponent }} {% if event.sponsor %}
              <span class="block text-xs text-yellow-300/80 mt-1"
                >Sponsored by {{ event.sponsor }}</span
              >
              {% endif %}
            </td>
            <td>{{ event.location }}</td>
            <td>{{ event.time }}</td>
            <td class="py-3 px-4 font-bold">
              {% if 'W' in event.result %}🟢 Win{% elif 'L' in event.result %}🔴
              Loss{% else %}—{% endif %}
            </td>
            <td>{{ event.highlight }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <script>
      // iCal Export
      document.getElementById("starforge-downloadIcal").addEventListener("click", () => {
        let ical = "BEGIN:VCALENDAR\nVERSION:2.0\n";
        {% for event in events %}
        ical += `BEGIN:VEVENT\nSUMMARY:{{ event.opponent|escape }}\nDTSTART;VALUE=DATE:{{ event.date|replace("-", "") }}\nDESCRIPTION:{{ event.type|escape }} - {{ event.result|escape }}\nLOCATION:{{ event.location|escape }}\nEND:VEVENT\n`;
        {% endfor %}
        ical += "END:VCALENDAR";
        const blob = new Blob([ical], { type: "text/calendar" });
        const url = URL.createObjectURL(blob);
        const link = document.createElement("a");
        link.href = url;
        link.download = "ConnectATXElite-Schedule.ics";
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        URL.revokeObjectURL(url);
      });

      // Calendar Filters
      const outcomeSelect = document.getElementById("starforge-filterOutcome");
      const monthSelect = document.getElementById("starforge-filterMonth");
      const eventRows = document.querySelectorAll("#starforge-eventTable tbody tr");
      function filterCalendar() {
        const outcome = outcomeSelect.value;
        const month = monthSelect.value;
        eventRows.forEach(row => {
          const matchOutcome = (outcome === "all") || (row.dataset.starforgeEventOutcome === outcome);
          const matchMonth = (month === "all") || (row.dataset.starforgeEventMonth === month);
          row.style.display = (matchOutcome && matchMonth) ? "" : "none";
        });
      }
      outcomeSelect.addEventListener("change", filterCalendar);
      monthSelect.addEventListener("change", filterCalendar);

      // Accessibility: focus next upcoming row when filtering to upcoming
      outcomeSelect.addEventListener("change", () => {
        if (outcomeSelect.value === "upcoming") {
          const nextRow = document.querySelector('tr[data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-event-outcome="upcoming"]');
          if (nextRow) nextRow.focus();
        }
      });
    </script>
  </section>
</div>
{# ========== ABOUT & MISSION SECTION (SaaS-ready, Animated, Starforge Edition)
========== #}
<section
  id="starforge-about-and-mission"
  class="relative py-20 px-4 sm:px-8 bg-gradient-to-b from-zinc-950 via-black to-zinc-950 text-white rounded-3xl shadow-2xl overflow-x-clip"
  role="region"
  aria-labelledby="starforge-about-mission-heading"
  tabindex="-1"
>
  {# Defensive SVG asset reference, never error #} {% set accent_svg =
  'basketball-accent.svg' %}
  <img
    src="{{ url_for('static', filename=accent_svg) }}"
    alt=""
    aria-hidden="true"
    class="absolute left-0 top-14 w-24 md:w-36 opacity-70 animate-spin-slow pointer-events-none select-none"
    loading="lazy"
    decoding="async"
    onerror="this.style.display='none';"
  />
  <img
    src="{{ url_for('static', filename=accent_svg) }}"
    alt=""
    aria-hidden="true"
    class="absolute right-0 bottom-14 w-20 md:w-32 opacity-50 animate-spin-reverse-slow pointer-events-none select-none"
    loading="lazy"
    decoding="async"
    onerror="this.style.display='none';"
  />

  <!-- Player Mosaic: Safe fallback -->
  <div
    class="grid grid-cols-3 sm:grid-cols-5 gap-3 max-w-3xl mx-auto py-8 relative z-10"
    data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos="fade-up"
    role="list"
    aria-label="Our Players"
  >
    {% if about is defined and about %} {% for p in about %}
    <div class="player-starforge-card" role="listitem" tabindex="0">
      <img
        src="{{ url_for('static', filename=p.img) if p.img else url_for('static', filename='images/logo.webp') }}"
        alt="{{ p.name }} – {{ team.team_name if team and team.team_name else 'Your Team' }}"
        class="rounded-xl shadow-lg transform transition-transform duration-300 hover:scale-105 focus:scale-105 focus:outline-yellow-400 focus-visible:ring-2 focus-visible:ring-yellow-400"
        loading="lazy"
        decoding="async"
        onerror="this.src='{{ url_for('static', filename='images/logo.webp') }}';"
      />
      <h4 class="text-center mt-2 font-semibold text-lg">{{ p.name }}</h4>
    </div>
    {% endfor %} {% else %} {# Safe fallback demo player blocks #} {% for i in
    range(5) %}
    <div class="player-starforge-card opacity-50" role="listitem" tabindex="0">
      <img
        src="{{ url_for('static', filename='images/logo.webp') }}"
        alt="Your Team"
        class="rounded-xl shadow-lg"
        loading="lazy"
      />
      <h4 class="text-center mt-2 font-semibold text-lg">Player {{ i+1 }}</h4>
    </div>
    {% endfor %} {% endif %}
  </div>

  <!-- About & Mission Core -->
  <div class="max-w-4xl mx-auto text-center py-2 px-2 space-y-6 relative z-10">
    <h2
      id="starforge-about-mission-heading"
      class="text-2xl sm:text-3xl font-extrabold bg-gradient-to-r from-yellow-300 via-yellow-400 to-yellow-300 bg-clip-text text-transparent animate-shine"
      tabindex="0"
    >
      More Than Basketball — We’re Family On A Mission
    </h2>
    <p class="text-xl sm:text-2xl font-semibold text-white/90" tabindex="0">
      <span class="text-yellow-400 font-bold">
        {{ team.team_name if team and team.team_name else "Your Team Name" }}
      </span>
      is more than a team—it's a family-powered movement where
      <strong>
        {{ team.region if team and team.region else "Your Region" }} kids and
        parents find a second home </strong
      >. <span class="hidden sm:inline"><br /></span> We build
      <strong>teamwork, respect, and championship character for life</strong>.
    </p>
    <p class="text-lg text-white/80" tabindex="0">
      Founded by the Smith family, our {{ team.league if team and team.league
      else "Your League" }} program grew from a father’s dream for his son into
      a thriving, supportive community. Every coach, volunteer, and sponsor
      helps our students—
      <span class="text-amber-300 font-bold">
        because every child matters here.
      </span>
    </p>
    <p class="text-lg text-yellow-200/90 italic" tabindex="0">
      “Family means showing up, believing in each other, and making sure no one
      is left behind. That’s what we do—on the court, and off.”<br />
      <span class="text-yellow-400 font-semibold">— Coach Angel Rodriguez</span>
    </p>
  </div>

  <!-- Mission + CTA -->
  <div class="max-w-3xl mx-auto text-center space-y-6 mt-6 relative z-10">
    <h3
      class="text-xl sm:text-2xl font-extrabold bg-gradient-to-r from-yellow-300 via-yellow-400 to-yellow-300 bg-clip-text text-transparent animate-shine"
      data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos="zoom-in"
      tabindex="0"
    >
      Our Mission
    </h3>
    <article
      class="prose prose-invert mx-auto space-y-4"
      data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos="fade-up"
      data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-aos-delay="100"
      tabindex="0"
      aria-describedby="missionSummary"
    >
      <p id="starforge-missionSummary-2" class="text-xl leading-relaxed">
        <strong
          >{{ team.team_name if team and team.team_name else "Your Team Name"
          }}</strong
        >
        is a
        <span class="text-yellow-300 font-bold"
          >family-founded, community-powered</span
        >
        12U {{ team.league if team and team.league else "Your League" }} program
        in Austin, TX—built for <em>affordable, academics-first basketball</em>.
      </p>
      <p class="text-lg text-white/90">
        Our mission:
        <span class="text-yellow-300 font-bold"
          >turn honor-roll students into champions—on and off the court.</span
        >
        Through teamwork, mentorship, and grit, we prepare our players for
        <span class="text-amber-200 font-bold">life as well as sport</span>.
      </p>
      <p class="text-white/70">
        Every sponsorship directly supports
        <span class="text-yellow-200 font-semibold"
          >gym access, tournament travel, and crucial academic support</span
        >
        for <strong>20+ student-athletes</strong>—most striving for honor roll,
        not just the scoreboard.
      </p>
    </article>
    <a
      href="#fundraiser"
      class="inline-block bg-yellow-400 hover:bg-yellow-300 text-zinc-900 font-bold py-3 px-8 rounded-full shadow-lg transition hover:scale-105 focus:outline-none focus-visible:ring-4 focus-visible:ring-yellow-300 text-lg animate-pop mt-2"
      tabindex="0"
    >
      Become a Champion for {{ team.region if team and team.region else "Your
      Region" }} Youth →
    </a>
    <p class="mt-2 text-sm text-white/60" tabindex="0">
      Every sponsorship fuels gym time, tutoring, travel, and more.
      <strong>Keep our kids dreaming big.</strong>
    </p>
  </div>
</section>
<!doctype html>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0" />
<section
  id="starforge-testimonial-pop"
  class="starforge-popover absolute left-1/2 top-full -translate-x-1/2 mt-3 w-80 bg-black/95 text-yellow-200 rounded-xl px-5 py-4 shadow-xl border border-yellow-300 z-50 hidden"
  tabindex="-1"
  aria-hidden="true"
>
  <strong
    >{{ challenge.author if challenge is defined and challenge.author is defined
    else "Team Parent, Class of 2030" }}</strong
  ><br />
  {{ challenge.detail if challenge is defined and challenge.detail is defined
  else "We missed practices due to lack of funding for gym rentals last season.
  Sponsors make all the difference!" }}
</section>
<!doctype html>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0" />
{% set badge = badge if badge is defined else None %} {% set challenge =
challenge if challenge is defined else {"metrics": []} %} {% set color_classes =
color_classes if color_classes is defined else "" %} {% set event = event if
event is defined else None %} {% set log = log if log is defined else None %} {%
set metric = metric if metric is defined else None %} {% set next_game =
next_game if next_game is defined else None %} {% set p = p if p is defined else
None %} {% set request = request if request is defined else None %} {% set
size_classes = size_classes if size_classes is defined else "" %} {% set sponsor
= sponsor if sponsor is defined else None %} {% set stat = stat if stat is
defined else None %} {% set widget = widget if widget is defined else None %}
<!-- 💬 Starforge Hero Overlay Quote (Elite Luxe Version) -->
<figure
  id="starforge-hero-overlay-quote"
  class="absolute bottom-24 md:bottom-28 left-1/2 -translate-x-1/2 z-10 w-[92%] max-w-2xl px-4 rounded-2xl bg-black/70 border border-gold/70 backdrop-blur-lg shadow-xl animate-fade-in animate-delay-700 transition-transform duration-500 hover:scale-105"
  aria-label="Motivational quote"
  style="
    box-shadow:
      0 8px 32px rgba(250, 204, 21, 0.12),
      0 2px 12px rgba(0, 0, 0, 0.2);
  "
  itemscope
  itemtype="https://schema.org/Quotation"
>
  <blockquote
    class="relative text-white text-lg sm:text-xl font-semibold italic leading-relaxed drop-shadow-[0_2px_12px_rgba(0,0,0,.32)] px-2 md:px-8 py-5"
    cite="https://connectatxelite.com/coach"
    aria-live="polite"
    itemprop="text"
  >
    <!-- Decorative opening quote SVG -->
    <svg
      class="absolute -left-2 -top-3 w-8 h-8 text-gold/70 opacity-80 select-none"
      fill="currentcolor"
      viewbox="0 0 32 32"
      aria-hidden="true"
    >
      <path
        d="M12 20a8 8 0 0 1 8-8V6A14 14 0 0 0 6 20v2a4 4 0 0 0 4 4h2a4 4 0 0 0 4-4z"
      ></path>
    </svg>
    <span>
      class="starforge-block" style="text-shadow: 0 2px 12px rgba(0, 0, 0,
      0.32)" >“The brotherhood and discipline we build here creates leaders for
      life.”</span
    >
    <!-- Decorative closing quote SVG -->
    <svg
      class="absolute -right-2 -bottom-3 w-8 h-8 text-gold/70 opacity-80 select-none rotate-180"
      fill="currentcolor"
      viewbox="0 0 32 32"
      aria-hidden="true"
    >
      <path
        d="M12 20a8 8 0 0 1 8-8V6A14 14 0 0 0 6 20v2a4 4 0 0 0 4 4h2a4 4 0 0 0 4-4z"
      ></path>
    </svg>
  </blockquote>
  <figcaption
    class="mt-2 text-gold-light font-bold tracking-wide text-base flex items-center justify-center gap-1 animate-slide-up animate-delay-900"
    aria-label="Coach attribution"
    itemprop="author"
    itemscope
    itemtype="https://schema.org/Person"
  >
    <span class="text-starforge-gold" itemprop="name">
      >— Coach Angel Rodriguez</span
    >
    <svg
      class="w-5 h-5 text-gold animate-bounce"
      viewbox="0 0 20 20"
      fill="currentcolor"
      aria-hidden="true"
    >
      <
      <path></path>
    </svg>
  </figcaption>
  <button>
    class="mt-2 ml-2 text-xs text-gold hover:text-gold-light bg-gold/10 rounded
    px-2 py-1 transition" onclick="navigator.clipboard.writeText('The
    brotherhood...')" > Copy Quote
  </button>
  #}
</figure>
<!doctype html>
  <head>
      name="generator"
    />
    <style>
        0%,
          opacity: 0.8;
        }
          opacity: 1;
        }
      .animate-sparkle {
      }
        animation: bounce-in 0.6s;
      @keyframes bounce-in {
          transform: scale(0.8);
        60% {
        }
          transform: scale(1);
      }
    <style>
        background: rgba(250, 204, 21, 0.1);
        height: 1.25rem;
        overflow: hidden;
      }
        background: linear-gradient(90deg, #facc15, #fde68a);
        border-radius: 9999px;
        animation: progress-load 1.8s ease forwards;
      @keyframes progress-load {
          width: 0;
        to {
        }
      .footer-grid {
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        padding: 2rem 1rem;
        margin: auto;
      .footer-links a,
        display: inline-block;
        color: #facc15;
        transition: color 0.2s ease;
      .footer-links a:hover,
        text-decoration: underline;
      }
        text-align: center;
        font-size: 0.85rem;
      }
        font-weight: 700;
        color: #fde68a;
    </style>
  <body>
    else {"metrics": []} %} {% set color_classes= color_classes if color_classes
    {% set log = log if log is defined else None %} {% set metric = metric if
    defined else None %} {% set p = p if p is defined else None %} {% set
    size_classes if size_classes is defined else "" %} {% set sponsor = sponsor
    else None %} {% set widget = widget if widget is defined else None %} {%
    {{ team.team_name if team is defined and team.team_name is defined else
      id="starforge-announcement-bar"
      role="region"
      aria-atomic="true"
      🚨 Championship Fundraiser is LIVE! Help us reach our goal —
        >Join Our Champion Circle</a
    </div>
    <header
      role="banner"
    >
        class="container mx-auto flex items-center justify-between px-4 py-4 lg:px-8"
        <!-- Logo / Brand -->
        url_for('static', filename='images/logo.webp') %}
          href="{{ url_for('main.home') }}"
          aria-label="{{ team.team_name if team is defined and team.team_name is defined else 'Connect ATX Elite' }} – Home"
          <img
            alt="{{ team.team_name if team is defined and team.team_name is defined else 'Connect ATX Elite' }} logo"
            loading="eager"
            fetchpriority="high"
          <span
          >
            else 'Connect ATX Elite' }}</span
        >
        <span
          aria-label="Greeting message"
        >
        <!-- Desktop Nav -->
          class="hidden lg:flex items-center gap-7 text-base font-semibold text-zinc-100"
        >
          ('about', 'About'), ('challenge', 'Challenge'), ('sponsor-elite-wall',
          <a
            class="relative transition hover:text-yellow-300 focus-visible:ring-2 ring-yellow-300 rounded px-1 py-0.5 group"
            {{ label }}</a
          {% endfor %}
            type="button"
            class="ml-5 px-5 py-2 bg-gradient-to-r from-yellow-400 to-yellow-200 text-black font-bold rounded-full shadow-xl hover:scale-105 focus-visible:ring-4 focus-visible:ring-yellow-400 transition-all"
            🌟 Sponsor Now
          <a
            href="#donate"
            class="ml-2 px-5 py-2 bg-black/70 border-yellow-300/50 text-yellow-300 font-bold rounded-full shadow hover:bg-yellow-400 hover:text-black transition-all"
          >
            💸 Donate</a
          >
        </nav>
        <!-- Mobile Menu Toggle -->
        <button
          id="starforge-mobile-nav-toggle"
          onclick="toggleMobileNav()"
          class="lg:hidden inline-flex items-center justify-center p-2 rounded-lg border-yellow-300/40 hover:bg-yellow-300/10 focus-visible:ring-2 ring-yellow-300"
          aria-label="Toggle menu"
          aria-expanded="false"
        >
          <svg
            class="w-7 h-7 text-yellow-300"
            fill="none"
            stroke="currentcolor"
            stroke-width="2"
            viewbox="0 0 24 24"
            aria-hidden="true"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M4 6h16M4 12h16M4 18h16"
            ></path>
          </svg>
        </button>
      </div>
      <!-- Mobile Nav -->
      <nav
        id="starforge-mobile-nav"
        class="fixed inset-0 z-[9998] hidden flex-col items-center justify-center gap-8 bg-black/90 backdrop-blur-lg shadow-2xl"
        role="dialog"
        aria-modal="true"
        aria-label="Mobile navigation menu"
      >
        <button
          type="button"
          onclick="toggleMobileNav()"
          class="absolute top-6 right-6 text-2xl text-yellow-300 p-2 rounded-full bg-zinc-800/70 hover:text-red-500 focus-visible:ring-4 ring-yellow-300"
          aria-label="Close menu"
        >
          ×
        </button>
        {% for id, label in nav_links %}
        <a
          href="#{{ id }}"
          onclick="toggleMobileNav()"
          class="text-3xl font-extrabold tracking-tight bg-gradient-to-r from-yellow-400 via-yellow-200 to-yellow-400 bg-clip-text text-transparent drop-shadow-xl hover:scale-105 transition"
        >
          {{ label }}</a
        >
        {% endfor %}
        <button
          type="button"
          onclick="openSponsorModal()"
          class="mt-8 px-7 py-3 bg-yellow-400 text-black font-bold rounded-full shadow-xl text-2xl hover:scale-105 focus-visible:ring-4 ring-yellow-300"
        >
        </button>
      </nav>
    </header>
    <script>
      function toggleMobileNav() {
        const nav = document.getElementById("mobile-nav");
        const btn = document.getElementById("mobile-nav-toggle");
        const open = nav.classList.contains("flex");
        nav.classList.toggle("hidden", open);
        nav.classList.toggle("flex", !open);
        btn.setAttribute("aria-expanded", String(!open));
        document.body.style.overflow = open ? "" : "hidden";
      }
    </script>
    <!-- 🌙 Theme Switcher -->
    <button
      id="starforge-theme-switch"
      class="fixed top-5 right-5 z-[9999] bg-zinc-800/70 backdrop-blur-lg p-2 rounded-full border border-zinc-700 hover:scale-110 transition"
      aria-label="Toggle light/dark"
    >
      <<span>🌙</span>
    </button>
    <!-- ================= HERO / PROGRESS ================= -->
    {% include 'partials/about_and_mission.html' %}
    <!-- 📅 Calendar Links -->
    <div class="flex flex-wrap gap-3 justify-center starforge-my-6">
      <a
        href="{{ url_for('main.calendar_ics') }}"
        class="bg-yellow-400 text-black font-bold px-4 py-2 rounded shadow hover:bg-yellow-300 transition"
        download="ConnectATXElite.ics"
        >📥 Download iCal (Apple/Outlook)</a
      >
      <a
        href="https://calendar.google.com/calendar/r?cid={{ request.url_root ~ 'calendar.ics' | urlencode }}"
        target="_blank"
        rel="noopener"
        class="bg-blue-500 text-white font-bold px-4 py-2 rounded shadow hover:bg-blue-600 transition"
      >
        📅 Add to Google Calendar</a
      >
      <a
        href="{{ url_for('main.calendar_ics') }}"
        class="bg-gray-800 text-yellow-300 font-bold px-4 py-2 rounded shadow hover:bg-yellow-500 hover:text-black transition"
        download="ConnectATXElite.ics"
        >🍏 Add to Apple Calendar</a
      >
    </div>
    <!-- ========== ABOUT, MISSION & CHALLENGE (Unified Elite Block) ========== -->
    {% include 'partials/about_and_mission.html' %} {% include
    'partials/about_and_mission.html' %}
    <script>
      // Animate all counters and the funding bar on DOM ready
      document.addEventListener("DOMContentLoaded", () => {
        function animateCounter(el, target, duration = 1200) {
          let start = 0,
            startTime = performance.now();
          function update(now) {
            let progress = Math.min((now - startTime) / duration, 1);
            el.textContent = Math.floor(progress * target);
            if (progress < 1) requestAnimationFrame(update);
            else el.textContent = target;
          }
          requestAnimationFrame(update);
        }

        document.querySelectorAll(".counter").forEach((el, i) => {
          const target = parseInt(el.dataset.target, 10) || 0;
          setTimeout(() => animateCounter(el, target), i * 150);
        });

        // Funding bar animation
        const funded =
          parseFloat(document.getElementById("gym-funded").textContent) || 0;
        const bar = document.getElementById("funding-bar").querySelector("div");
        setTimeout(() => {
          bar.style.width = `${funded}%`;
        }, 300);
      });

      // Toggle testimonial popover
      function toggleTestimonialPop() {
        const btn = document.getElementById("testimonial-more-btn");
        const pop = document.getElementById("testimonial-pop");
        const expanded = btn.getAttribute("aria-expanded") === "true";
        btn.setAttribute("aria-expanded", !expanded);
        pop.classList.toggle("hidden", expanded);
        pop.setAttribute("aria-hidden", expanded);
        if (!expanded) pop.focus();
      }
    </script>
    <!-- =========== TIERS BLOCK (Starforge Elite Polish) =========== -->
    {% include 'partials/about_and_mission.html' %}
    <!-- =========== TESTIMONIALS (Starforge Animated Carousel) =========== -->
    {% include 'partials/about_and_mission.html' %}
    <!-- =========== SPONSOR SPOTLIGHT WALL (Starforge Elite) =========== -->
    {% include 'partials/about_and_mission.html' %}
    <!-- =========== DIGITAL HUB (AI + Admin Widgets, Starforge Edition) =========== -->
    {% include 'partials/about_and_mission.html' %} {% include
    'partials/about_and_mission.html' %}
    <p class="mt-4 text-xs text-yellow-400/80 text-starforge-center">
      <<b>Pro Tip:</b> Export analytics for board/sponsor reports — or
      <span
        class="underline cursor-pointer hover:text-starforge-yellow-300"
        onclick="trackWidgetClick('export_analytics')"
        >download now</span
      >.
    </p>
    <button
      class="mt-6 w-full py-3 rounded-full bg-yellow-400 text-black font-bold shadow hover:bg-yellow-300 transition focus-visible:ring-2 focus-visible:ring-yellow-300"
      onclick="alert('Widget marketplace coming soon! Want a custom dashboard? Contact us!')"
    >
      ➕ Add Widget or Request Feature
    </button>
    {% endif %}
    <script>
      // Starforge sparkle for AI button
      function sparkleAIBtn(btn) {
        const icon = document.getElementById("ai-sparkle");
        if (icon) {
          icon.classList.remove("hidden");
          setTimeout(() => icon.classList.add("hidden"), 900);
        }
      }
      // Widget pulse on click
      function pulseWidget(widget) {
        const count = widget.querySelector(".widget-count");
        if (count) {
          count.classList.add("pulse");
          setTimeout(() => count.classList.remove("pulse"), 700);
        }
      }
      // Event tracking for widgets (robust for SaaS)
      function trackWidgetClick(name) {
        if (window.gtag) {
          window.gtag("event", "widget_click", {
            event_category: "Dashboard",
            event_label: name,
          });
        } else {
          console.log("Widget click:", name);
        }
      }
    </script>
    <!-- =========== PROGRAM STATS (Animated, Elite, Starforge Edition) =========== -->
    {% include 'partials/about_and_mission.html' %}
    <!-- ========== GAME & EVENT CALENDAR (Elite, Interactive, PRO) ========== -->
    {% include 'partials/about_and_mission.html' %}
    <!-- =========== WATCH OUR STORY MODAL (STARFORGE ELITE, ANIMATED, ACCESSIBLE) =========== -->
    <div class="text-center starforge-my-16">
      <button
        id="starforge-storyBtn"
        type="button"
        class="inline-flex items-center gap-3 bg-gradient-to-r from-yellow-300 via-yellow-400 to-yellow-300 text-black font-black px-10 py-4 rounded-full shadow-lg hover:scale-105 hover:shadow-yellow-400/50 focus:ring-4 ring-yellow-300 transition-all text-lg md:text-xl animate-pulse"
        aria-haspopup="dialog"
        aria-controls="storyModal"
        aria-expanded="false"
      >
        ▶️ <<span>Watch Our Story</span>
      </button>
    </div>
    <dialog
      id="starforge-storyModal"
      class="p-0 rounded-3xl overflow-hidden shadow-2xl bg-black/95 backdrop-blur-lg max-w-3xl w-full mx-auto border-4 border-yellow-400/70 transition-all scale-95 opacity-0"
      role="dialog"
      aria-modal="true"
      aria-labelledby="story-modal-title"
      aria-hidden="true"
    >
      <button
        type="button"
        onclick="closeStoryModal()"
        class="absolute top-4 right-4 text-white text-4xl hover:text-yellow-300 focus:ring-2 ring-yellow-300 z-50"
        aria-label="Close video modal"
      >
        ×
      </button>
      <div class="flex flex-col items-center p-0 md:p-6 animate-fade-in-down">
        <h2
          id="starforge-story-modal-title"
          class="text-2xl md:text-3xl font-extrabold bg-gradient-to-r from-yellow-300 via-yellow-400 to-yellow-300 bg-clip-text text-transparent mb-3 mt-5 md:mt-0 text-center drop-shadow-xl animate-shine"
        >
          Our Story: On & Off The Court
        </h2>
        <!-- Video Tabs -->
        <div
          class="flex gap-3 md:gap-5 mb-5 flex-wrap justify-center"
          role="tablist"
        >
          <button
            id="starforge-tab-myvideo"
            role="tab"
            aria-controls="story-video-myvideo"
            aria-selected="true"
            class="py-2 px-5 rounded-full font-semibold shadow bg-yellow-400 text-black hover:scale-105 transition"
          >
            🎥 Team Video
          </button>
          <button
            id="starforge-tab-kvue"
            role="tab"
            aria-controls="story-video-kvue"
            aria-selected="false"
            class="py-2 px-5 rounded-full font-semibold shadow bg-zinc-800 text-yellow-300 hover:bg-yellow-900 hover:scale-105 transition"
          >
            📺 KVUE News
          </button>
          <button
            id="starforge-tab-youtube"
            role="tab"
            aria-controls="story-video-youtube"
            aria-selected="false"
            class="py-2 px-5 rounded-full font-semibold shadow bg-zinc-800 text-yellow-300 hover:bg-yellow-900 hover:scale-105 transition"
          >
            🏀 YouTube
          </button>
        </div>
        <!-- Video Panels -->
        <div
          id="starforge-story-video-myvideo"
          role="tabpanel"
          aria-labelledby="tab-myvideo"
          class="w-full max-w-2xl aspect-video mx-auto block"
        >
          <video
            controls=""
            poster="{{ url_for('static', filename='images/connect-atx-team.jpg') }}"
            class="rounded-xl border-4 border-yellow-300 shadow-lg w-full h-auto bg-black"
          >
            <source
              src="{{ url_for('static', filename='connect-atx-story.mp4') }}"
              type="video/mp4"
            />
            Sorry, your browser doesn’t support embedded videos.
          </video>
        </div>
        <div
          id="starforge-story-video-kvue"
          role="tabpanel"
          aria-labelledby="tab-kvue"
          class="w-full max-w-2xl aspect-video mx-auto hidden"
        >
          <iframe
            src="https://www.kvue.com/embeds/video/responsive/269-beeecfc1-eb68-4cca-8ec5-417b66d8cbfa/iframe"
            width="100%"
            height="360"
            class="border-2 border-yellow-300 rounded-xl"
            allowfullscreen
          ></iframe>
        </div>
        <div
          id="starforge-story-video-youtube"
          role="tabpanel"
          aria-labelledby="tab-youtube"
          class="w-full max-w-2xl aspect-video mx-auto hidden"
        >
          <iframe
            src="https://www.youtube.com/embed/dQw4w9WgXcQ"
            width="100%"
            height="360"
            class="border-2 border-yellow-300 rounded-xl"
            allowfullscreen
          ></iframe>
        </div>
        <div class="mt-5 text-xs text-zinc-300 text-starforge-center">
          <<strong>Connect ATX Elite</strong>
          | Family-run. Community-powered. Champions rising.
        </div>
      </div>
    </dialog>
    <script>
      (() => {
        const storyBtn = document.getElementById("storyBtn");
        const modal = document.getElementById("storyModal");
        const tabs = modal.querySelectorAll('[role="tab"]');
        const panels = modal.querySelectorAll('[role="tabpanel"]');
        let lastFocusedEl;

        function openModal() {
          lastFocusedEl = document.activeElement;
          modal.showModal();
          modal.classList.remove("scale-95", "opacity-0");
          modal.classList.add("scale-100", "opacity-100");
          modal.setAttribute("aria-hidden", "false");
          storyBtn.setAttribute("aria-expanded", "true");
          tabs[0].focus();
        }

        function closeModal() {
          modal.classList.add("scale-95", "opacity-0");
          setTimeout(() => {
            modal.close();
            modal.setAttribute("aria-hidden", "true");
            storyBtn.setAttribute("aria-expanded", "false");
            lastFocusedEl?.focus();
          }, 200);
        }

        storyBtn.addEventListener("click", openModal);
        modal
          .querySelector('[aria-label="Close video modal"]')
          .addEventListener("click", closeModal);

        tabs.forEach((tab) => {
          tab.addEventListener("click", () => activateTab(tab));
        });

        function activateTab(selectedTab) {
          tabs.forEach((tab) => {
            tab.setAttribute("aria-selected", "false");
            tab.classList.replace("bg-yellow-400", "bg-zinc-800");
            tab.classList.replace("text-black", "text-yellow-300");
          });
          panels.forEach((panel) => panel.classList.add("hidden"));
          selectedTab.setAttribute("aria-selected", "true");
          selectedTab.classList.replace("bg-zinc-800", "bg-yellow-400");
          selectedTab.classList.replace("text-yellow-300", "text-black");
          document
            .getElementById(selectedTab.getAttribute("aria-controls"))
            .classList.remove("hidden");
        }
      })();
    </script>
    <!-- =========== ELITE SITE FOOTER (STARFORGE ENHANCED) =========== -->
    <footer
      id="starforge-site-footer"
      class="connect-footer bg-black text-yellow-300 shadow-inner"
      role="contentinfo"
    >
      <div class="footer-starforge-grid">
        <!-- Column 1: Brand -->
        {% include 'partials/about_and_mission.html' %}
        <!-- Column 2: Progress + Links -->
        {% include 'partials/about_and_mission.html' %}
        <!-- Column 3: Contact + Countdown -->
        {% include 'partials/about_and_mission.html' %}
      </div>
      <div class="starforge-starforge-supporters">
        <<b>Recent Supporters:</b> Acme Corp • Jane D. • Smith & Co • Austin
        Hoops
      </div>
      <script>
        // Countdown timer for next event
        (function () {
          const target = new Date("2025-07-01T10:00:00Z");
          const el = document.getElementById("countdown-timer");
          function update() {
            const now = new Date(),
              diff = target - now;
            if (diff <= 0) {
              el.textContent = "Tournament is live!";
              return;
            }
            const d = Math.floor(diff / 86400000),
              h = Math.floor((diff % 86400000) / 3600000),
              m = Math.floor((diff % 3600000) / 60000),
              s = Math.floor((diff % 60000) / 1000);
            el.textContent = `${d}d ${h}h ${m}m ${s}s`;
          }
          update();
          setInterval(update, 1000);
        })();
      </script>
    </footer>
    {% endblock %}
  </body>
</html>
<!doctype html>
<html>
  <head>
    <meta
      name="generator"
      content="HTML Tidy for HTML5 for Linux version 5.8.0"
    />
  </head>
  <body>
    {% set badge = badge if badge is defined else None %} {% set challenge =
    challenge if challenge is defined else {"metrics": []} %} {% set
    color_classes = color_classes if color_classes is defined else "" %} {% set
    event = event if event is defined else None %} {% set log = log if log is
    defined else None %} {% set metric = metric if metric is defined else None
    %} {% set next_game = next_game if next_game is defined else None %} {% set
    p = p if p is defined else None %} {% set request = request if request is
    defined else None %} {% set size_classes = size_classes if size_classes is
    defined else "" %} {% set sponsor = sponsor if sponsor is defined else None
    %} {% set stat = stat if stat is defined else None %} {% set widget = widget
    if widget is defined else None %} {% extends "admin/base.html" %} {% block
    title %}Sponsors Management — Admin{% endblock %} {% block content %}
    <h1 class="text-3xl font-extrabold mb-6 flex items-center starforge-gap-2">
      <<span>🤝</span> Sponsors Management
    </h1>
    {% for s in sponsors %} {% else %} {% endfor %}
    <table
      class="w-full table-auto bg-white/5 border border-yellow-400 rounded-xl shadow mb-10"
    >
      <thead>
        <tr class="bg-yellow-200/70 text-starforge-zinc-900">
          <
          <th>Name</th>
          <
          <th>Email</th>
          <
          <th>Amount</th>
          <
          <th>Status</th>
          <
          <th>Created</th>
          <
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr
          class="{% if s.status == 'approved' %}bg-green-100/60{% elif s.status == 'pending' %}bg-yellow-50/50{% else %}bg-red-50/40{% endif %} border-b border-zinc-800 hover:bg-yellow-50/20 transition"
        >
          <
          <td>{{ s.name }}</td>
          <
          <td>{{ s.email or '-' }}</td>
          <td class="py-2 px-4 text-gold font-starforge-bold">
            ${{ "%.2f"|format(s.amount) }}
          </td>
          <td class="py-2 starforge-px-4">
            <span
              class="px-3 py-1 rounded-full {% if s.status == 'approved' %}bg-green-200 text-green-900 {% elif s.status == 'pending' %}bg-yellow-100 text-yellow-900 {% else %}bg-red-200 text-red-900{% endif %}"
            >
              {{ s.status|capitalize }}</span
            >
          </td>
          <td class="py-2 px-4 starforge-text-sm">
            {{ s.created_at.strftime("%Y-%m-%d") }}
          </td>
          <td class="py-2 starforge-px-4">
            {% if s.status != 'approved' %}
            <form
              action="{{ url_for('admin.approve_sponsor', sponsor_id=s.id) }}"
              method="post"
              style="display: inline"
            >
              <button
                type="submit"
                class="btn bg-green-500 text-white px-3 py-1 rounded shadow hover:bg-green-600 transition"
                title="Approve Sponsor"
              >
                Approve
              </button>
            </form>
            {% endif %}
            <form
              action="{{ url_for('admin.delete_sponsor', sponsor_id=s.id) }}"
              method="post"
              style="display: inline"
              onsubmit="return confirm('Are you sure you want to delete this sponsor?');"
            >
              <button
                type="submit"
                class="btn bg-red-400 text-white px-3 py-1 rounded shadow hover:bg-red-600 transition ml-2"
                title="Delete Sponsor"
              >
                Delete
              </button>
            </form>
          </td>
        </tr>
        <tr>
          <td colspan="6" class="py-8 text-center text-starforge-zinc-400">
            No sponsors found yet.
          </td>
        </tr>
      </tbody>
    </table>
    <a
      href="{{ url_for('admin.dashboard') }}"
      class="inline-block mt-2 text-yellow-400 hover:underline"
      >← Back to Dashboard</a
    >
    <!-- Level-up: Bulk CSV Export/Import, Slack notifications, etc. -->
    {% endblock %}
  </body>
</html>
<!doctype html>
<html>
  <head>
    <meta
      name="generator"
      content="HTML Tidy for HTML5 for Linux version 5.8.0"
    />
    <<title></title>
  </head>
  <body>
    {% set badge = badge if badge is defined else None %} {% set challenge =
    challenge if challenge is defined else {"metrics": []} %} {% set
    color_classes = color_classes if color_classes is defined else "" %} {% set
    event = event if event is defined else None %} {% set log = log if log is
    defined else None %} {% set metric = metric if metric is defined else None
    %} {% set next_game = next_game if next_game is defined else None %} {% set
    p = p if p is defined else None %} {% set request = request if request is
    defined else None %} {% set size_classes = size_classes if size_classes is
    defined else "" %} {% set sponsor = sponsor if sponsor is defined else None
    %} {% set stat = stat if stat is defined else None %} {% set widget = widget
    if widget is defined else None %}
    <head>
      <meta charset="UTF-8" />
      <<title>{% block title %}Starforge Sponsor Admin{% endblock %}</title>
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <!-- Core CSS -->
      <link
        href="{{ url_for('static', filename='css/tailwind.min.css') }}"
        rel="stylesheet"
      />
      <!-- Preload core scripts for speed -->
      <link
        rel="preload"
        href="{{ url_for('static', filename='js/alpine.min.js') }}"
        as="script"
      />
      <link
        rel="preload"
        href="{{ url_for('static', filename='js/htmx.min.js') }}"
        as="script"
      />
      <link
        rel="preload"
        href="{{ url_for('static', filename='js/socket.io.js') }}"
        as="script"
      />
      <link
        rel="preload"
        href="{{ url_for('static', filename='js/main.js') }}"
        as="script"
      />
      <!-- Security & favicon best practices -->
      <link
        rel="icon"
        type="image/png"
        href="{{ url_for('static', filename='images/logo.webp') }}"
      />
      <meta name="referrer" content="same-origin" />
      <meta name="theme-color" content="#eab308" />
      <!-- Optional: Custom CSS for Admin/Brand tweaks --></head
    >{#
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/admin.css') }}"
    />#}
    <!-- ♿️ Skip link for keyboard accessibility -->
    <a
      href="#main"
      class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-yellow-400 text-zinc-900 px-4 py-2 rounded z-50"
    >
    >
    <!-- Starforge Header -->
    <header
      class="bg-zinc-900 py-4 px-4 md:px-8 flex flex-col md:flex-row justify-between items-center shadow-lg border-b border-gold/30"
    >
      <h1
        class="text-2xl font-black tracking-tight text-gold drop-shadow flex items-center gap-2"
      >
        <<span>🏆</span> Sponsor Admin
      </h1>
      <!-- PRO UPGRADE: Dark/Light mode toggle -->
      <button
        onclick="document.documentElement.classList.toggle('dark')"
        class="ml-4 px-2 py-1 rounded text-gold bg-zinc-800 hover:bg-gold hover:text-zinc-900 transition"
      >
        🌙 / ☀️
      </button>
      <nav class="flex flex-wrap gap-4 text-base mt-3 md:starforge-mt-0">
        <a
          href="{{ url_for('admin.dashboard') }}"
          class="hover:text-gold transition focus:outline-none focus:ring-2 focus:ring-gold/80 rounded"
        >
          Dashboard</a
        >
        <a
          href="{{ url_for('admin.sponsors') }}"
          class="hover:text-gold transition focus:outline-none focus:ring-2 focus:ring-gold/80 rounded"
        >
          Sponsors</a
        >
        <a
          href="{{ url_for('admin.transactions') }}"
          class="hover:text-gold transition focus:outline-none focus:ring-2 focus:ring-gold/80 rounded"
        >
          Transactions</a
        >
        <a
          href="{{ url_for('admin.goals') }}"
          class="hover:text-gold transition focus:outline-none focus:ring-2 focus:ring-gold/80 rounded"
        >
          Goals</a
        >
        <a
          href="{{ url_for('admin.payouts') }}"
          class="hover:text-gold transition focus:outline-none focus:ring-2 focus:ring-gold/80 rounded"
        >
          Payouts</a
        >
        <a
          href="{{ url_for('main.home') }}"
          class="text-zinc-400 hover:text-gold transition focus:outline-none focus:ring-2 focus:ring-gold/80 rounded"
        >
          Public Site</a
        >
      </nav>
      <!-- PRO UPGRADE: Admin Avatar/User (Flask-Login) -->
      {% if current_user.is_authenticated %}
      <div class="flex items-center gap-2 starforge-ml-6">
        <img
          src="{{ current_user.avatar_url or url_for('static', filename='images/admin_avatar.png') }}"
          class="w-8 h-8 rounded-full border-2 border-starforge-gold"
        />
        <span class="text-gold font-starforge-bold"
          >{{ current_user.name }}</span
        >
        <a
          href="{{ url_for('admin.logout') }}"
          class="text-zinc-400 hover:text-red-400 ml-2"
          >Logout</a
        >
      </div>
      {% endif %}
      <!-- PRO UPGRADE: WebSocket health indicator -->
      <span
        id="starforge-ws-status"
        class="ml-2 w-2 h-2 rounded-full bg-red-400 inline-block"
        title="Live updates status"
      ></span>
      <script>
        document.addEventListener("DOMContentLoaded", () => {
          const s = io();
          s.on("connect", () =>
            document
              .getElementById("ws-status")
              .classList.replace("bg-red-400", "bg-green-400"),
          );
          s.on("disconnect", () =>
            document
              .getElementById("ws-status")
              .classList.replace("bg-green-400", "bg-red-400"),
          );
        });
      </script>
    </header>
    <main
      id="starforge-main"
      class="p-6 w-full max-w-6xl mx-auto starforge-flex-1"
    >
      {% with messages = get_flashed_messages(with_categories=true) %} {% if
      messages %}
      <ul class="starforge-mb-6">
        {% for category, msg in messages %}
        <li
          class="bg-yellow-200 text-zinc-900 font-bold py-2 px-4 rounded mb-2 animate-pulse shadow"
        >
          {{ msg }}
        </li>
        {% endfor %}
      </ul>
      {% endif %} {% endwith %} {% block content %}{% endblock %}
    </main>
    <footer
      class="text-center text-xs py-8 text-zinc-500 border-t border-gold/10 mt-10"
    >
      <div class="starforge-mb-2">
        Built with <<span>💛</span> by
        <<b>Angel Rodriguez Jr</b> for the Connect
        ATX Elite / Starforge Team.
      </div>
      <span class="text-[10px] tracking-starforge-wide"
        >Starforge Admin — Championship Protocol © {{ 2024 }}</span
      >
    </footer>
    <!-- Load scripts at the end for best performance -->
    <script
      src="{{ url_for('static', filename='js/alpine.min.js') }}"
      defer
    ></script>
    <script
      src="{{ url_for('static', filename='js/htmx.min.js') }}"
      defer
    ></script>
    <script
      src="{{ url_for('static', filename='js/socket.io.js') }}"
      defer
    ></script>
    <<script></script>
  </body>
</html>
<!doctype html>
<html>
  <head>
    <meta
      name="generator"
      content="HTML Tidy for HTML5 for Linux version 5.8.0"
    />
  </head>
  <body>
    {% set badge = badge if badge is defined else None %} {% set challenge =
    challenge if challenge is defined else {"metrics": []} %} {% set
    color_classes = color_classes if color_classes is defined else "" %} {% set
    event = event if event is defined else None %} {% set log = log if log is
    defined else None %} {% set metric = metric if metric is defined else None
    %} {% set next_game = next_game if next_game is defined else None %} {% set
    p = p if p is defined else None %} {% set request = request if request is
    defined else None %} {% set size_classes = size_classes if size_classes is
    defined else "" %} {% set sponsor = sponsor if sponsor is defined else None
    %} {% set stat = stat if stat is defined else None %} {% set widget = widget
    if widget is defined else None %} {# app/templates/admin/dashboard.html #}
    {% extends "admin/base.html" %} {% block title %}Dashboard - Sponsor Admin{%
    endblock %} {% block content %}
    <h2 class="text-3xl font-extrabold mb-8 flex items-center starforge-gap-3">
      <<span>🏆</span> Admin Dashboard
    </h2>
    <!-- Stats Overview Grid -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 starforge-mb-10">
      <div
        class="bg-gradient-to-br from-gold via-yellow-100 to-white text-zinc-900 p-6 rounded-xl shadow-xl flex flex-col items-center"
      >
        <div class="text-5xl font-black animate-starforge-pulse">
          ${{ stats.total_raised | int | round }}
        </div>
        <
        <div>Total Raised</div>
      </div>
      <div
        class="bg-gradient-to-br from-yellow-400 via-gold/70 to-white text-zinc-900 p-6 rounded-xl shadow-xl flex flex-col items-center"
      >
        <div class="text-5xl font-black animate-starforge-sparkle">
          {{ stats.sponsor_count }}
        </div>
        <
        <div>Sponsors</div>
      </div>
      <div
        class="bg-gradient-to-br from-zinc-900 via-yellow-200 to-gold text-zinc-900 p-6 rounded-xl shadow-xl flex flex-col items-center"
      >
        <div class="text-5xl font-black animate-starforge-slide-up">
          ${{ stats.goal_amount }}
        </div>
        <
        <div>Goal</div>
      </div>
      <div
        class="bg-gradient-to-br from-red-300 via-yellow-100 to-gold text-zinc-900 p-6 rounded-xl shadow-xl flex flex-col items-center"
      >
        <div class="text-5xl font-starforge-black">
          {{ stats.pending_sponsors }}
        </div>
        <
        <div>Pending Approval</div>
      </div>
    </div>
    <!-- Progress Bar -->
    <div class="starforge-mb-10">
      <div class="flex justify-between items-center starforge-mb-1">
        <<span>Progress</span>
        <span class="text-sm font-bold text-starforge-yellow-200"
          >{{ ((stats.total_raised / (stats.goal_amount or 1)) * 100) | round(1)
          }}%</span
        >
      </div>
      <div
        class="w-full bg-zinc-900 rounded-full h-4 shadow-inner overflow-hidden"
      >
        <div
          class="bg-gradient-to-r from-yellow-400 to-gold h-4 rounded-full transition-all duration-700"
          style="width: {{ (stats.total_raised / (stats.goal_amount or 1) * 100) | round(2) }}%;"
        ></div>
      </div>
    </div>
    <!-- Latest Sponsors -->
    <section class="starforge-mb-10">
      <h3 class="font-semibold starforge-mb-3">Latest Sponsors</h3>
      <div class="overflow-x-starforge-auto">
        {% for s in sponsors %} {% else %} {% endfor %}
        <table
          class="min-w-full bg-zinc-800/80 rounded-xl overflow-hidden shadow"
        >
          <thead>
            <tr class="bg-yellow-400/90 text-starforge-zinc-900">
              <
              <th>Name</th>
              <
              <th>Email</th>
              <
              <th>Amount</th>
              <
              <th>Status</th>
              <
              <th>Date</th>
              <
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr
              class="border-b border-zinc-700 hover:bg-yellow-50/10"
              id="starforge-sponsor-{{ s.id }}"
            >
              <
              <td>{{ s.name }}</td>
              <
              <td>{{ s.email or "-" }}</td>
              <td class="p-2 text-gold font-starforge-bold">
                ${{ "%.2f"|format(s.amount) }}
              </td>
              <td class="starforge-p-2">
                <span
                  class="px-2 py-1 rounded-full {% if s.status == 'approved' %}bg-green-200 text-green-900{% elif s.status == 'pending' %}bg-yellow-200 text-yellow-900{% else %}bg-red-200 text-red-900{% endif %}"
                >
                  {{ s.status|capitalize }}</span
                >
              </td>
              <td class="p-2 starforge-text-xs">
                {{ s.created_at.strftime("%Y-%m-%d") }}
              </td>
              <td class="starforge-p-2">
                {% if s.status != "approved" %}
                <button
                  class="bg-gold text-zinc-900 px-3 py-1 rounded hover:bg-yellow-300 approve-btn"
                  data-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-starforge-id="starforge-{{ s.id }}"
                >
                  Approve
                </button>
                {% endif %}
              </td>
            </tr>
            <tr>
              <td colspan="6" class="py-8 text-center text-starforge-zinc-400">
                No sponsors found.
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
    <!-- Latest Transactions -->
    <section>
      <h3 class="font-semibold starforge-mb-3">Latest Transactions</h3>
      <div class="overflow-x-starforge-auto">
        {% for t in transactions %} {% else %} {% endfor %}
        <table
          class="min-w-full bg-zinc-800/80 rounded-xl overflow-hidden shadow"
        >
          <thead>
            <tr class="bg-yellow-200 text-starforge-zinc-900">
              <
              <th>Sponsor</th>
              <
              <th>Amount</th>
              <
              <th>Status</th>
              <
              <th>Date</th>
            </tr>
          </thead>
          <tbody>
            <tr class="border-b border-zinc-700 hover:bg-yellow-50/10">
              <
              <td>{{ t.sponsor.name }}</td>
              <td class="p-2 text-gold font-starforge-bold">
                ${{ "%.2f"|format(t.amount) }}
              </td>
              <
              <td>{{ t.status }}</td>
              <td class="p-2 starforge-text-xs">
                {{ t.created_at.strftime("%Y-%m-%d") }}
              </td>
            </tr>
            <tr>
              <td colspan="4" class="py-8 text-center text-starforge-zinc-400">
                No transactions yet.
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
    <!-- Export Buttons -->
    <div class="mt-8 flex flex-wrap gap-4 justify-starforge-end">
      <a
        href="{{ url_for('admin.export_payouts') }}"
        class="bg-yellow-400 text-zinc-900 px-6 py-2 rounded-lg font-bold shadow hover:bg-gold transition"
      >
        ⬇ Export Approved Payouts (CSV)</a
      >
      <a
        href="{{ url_for('admin.export_sponsors') }}"
        class="bg-yellow-300 text-zinc-900 px-6 py-2 rounded-lg font-bold shadow hover:bg-yellow-400 transition"
      >
        ⬇ Export All Sponsors (CSV)</a
      >
    </div>
    <!-- Slack/Discord Test Notification -->
    <div class="mt-10 flex items-center starforge-gap-4">
      <button
        onclick="testWebhook()"
        class="bg-zinc-900 text-yellow-400 px-4 py-2 rounded font-semibold shadow hover:bg-zinc-800"
      >
        🔔 Test Slack/Discord Notification
      </button>
      <span class="text-xs text-zinc-500"
        >Pro tip: Get real-time sponsor alerts—enable <<code
          >send_slack_new_sponsor()</code
        >
        in your admin routes.</span
      >
    </div>
    <!-- Audit Log Table (Optional) -->
    {% if audit_log %}
    <section class="starforge-mt-8">
      <h3 class="font-semibold starforge-mb-3">Audit Log</h3>
      <div class="overflow-x-starforge-auto">
        {% for log in audit_log %} {% else %} {% endfor %}
        <table
          class="min-w-full bg-zinc-800/80 rounded-xl overflow-hidden shadow text-xs"
        >
          <thead>
            <tr class="bg-yellow-100 text-starforge-zinc-900">
              <
              <th>Timestamp</th>
              <
              <th>Admin</th>
              <
              <th>Action</th>
              <
              <th>Target</th>
              <
              <th>Details</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="starforge-p-2">
                {{ log.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}
              </td>
              <
              <td>{{ log.admin_user }}</td>
              <
              <td>{{ log.action }}</td>
              <
              <td>{{ log.target }}</td>
              <
              <td>{{ log.details }}</td>
            </tr>
            <tr>
              <td colspan="5" class="py-4 text-center text-starforge-zinc-400">
                No recent actions.
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
    {% endif %}
    <!-- Real-Time Socket.IO -->

    <
    <script></script>
    <script>
      const socket = io();
      socket.on("new_donation", (data) => {
        // Show toast or reload sponsor table dynamically
        alert(`New donation: $${data.amount} from ${data.name}!`);
        // Optionally, reload with fetch/htmx
      });
      socket.on("new_sponsor", (data) => {
        // Optionally add row/animate table
        // console.log(data);
      });

      // Approve sponsor via AJAX
      document.querySelectorAll(".approve-btn").forEach((btn) => {
        btn.onclick = async () => {
          const id = btn.dataset.id;
          const res = await fetch(`/admin/approve_sponsor/${id}`, {
            method: "POST",
          });
          if (res.ok) {
            btn.closest("tr").classList.add("bg-green-50");
            btn.disabled = true;
            btn.textContent = "Approved!";
          }
        };
      });

      // Slack/Discord Test Webhook
      function testWebhook() {
        fetch("/admin/test_webhook").then(() => alert("Test sent!"));
      }
    </script>
    {% endblock %}
  </body>
</html>
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <!-- Theme color (dynamic per team/org) -->
    <meta
      name="theme-color"
      content="{{ team.theme_color if team and team.theme_color else '#facc15' }}"
    />

    <!-- SEO & Social Meta -->
    <title>
      {% block title %}{{ team.team_name if team and team.team_name else
      "Connect ATX Elite" }}{% endblock %}
    </title>
    <meta
      name="description"
      content="{% block description %}{{ team.description if team and team.description else 'Elite youth team fundraising, memberships, and sponsor engagement.' }}{% endblock %}"
    />
    <meta property="og:type" content="website" />
    <meta
      property="og:title"
      content="{% block og_title %}{{ team.team_name if team and team.team_name else 'Connect ATX Elite' }}{% endblock %}"
    />
    <meta
      property="og:description"
      content="{% block og_description %}{{ team.og_description if team and team.og_description else 'Support our basketball journey and invest in our next generation of leaders.' }}{% endblock %}"
    />
    <meta
      property="og:image"
      content="{{ team.og_image if team and team.og_image else url_for('static', filename='images/og-default.jpg') }}"
    />
    <meta property="og:url" content="{{ request.url if request else '' }}" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="{% block twitter_title %}{{ team.team_name if team and team.team_name else 'Connect ATX Elite' }}{% endblock %}"
    />
    <meta
      name="twitter:description"
      content="{% block twitter_description %}{{ team.og_description if team and team.og_description else 'Support our basketball journey and invest in our next generation of leaders.' }}{% endblock %}"
    />
    <meta
      name="twitter:image"
      content="{{ team.og_image if team and team.og_image else url_for('static', filename='images/og-default.jpg') }}"
    />

    <!-- Favicon and Manifest -->
    <link
      rel="icon"
      type="image/png"
      href="{{ url_for('static', filename=team.favicon if team and team.favicon else 'favicon.png') }}"
    />
    <link
      rel="manifest"
      href="{{ url_for('static', filename='site.webmanifest') }}"
    />

    <!-- TailwindCSS (main brand stylesheet) -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/tailwind.min.css') }}">

    {% if team and team.custom_css %}
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename=team.custom_css) }}"
    />
    {% endif %} {% block head_extra %}{% endblock %}
    <style>
      .skip-link {
        position: absolute;
        left: -999px;
        top: auto;
        width: 1px;
        height: 1px;
        overflow: hidden;
      }
      .skip-link:focus {
        left: 8px;
        top: 8px;
        width: auto;
        height: auto;
        z-index: 5000;
        background: #fde047;
        color: #18181b;
        padding: 0.7rem 1.5rem;
        border-radius: 1.5rem;
        font-weight: bold;
      }
    </style>
  </head>
  <body
    class="bg-black text-zinc-100 min-h-screen flex flex-col font-sans {% block body_class %}{% endblock %}"
  >
    <a href="#starforge-main" class="skip-link">Skip to main content</a>

    {# --- Slot for global modals, flash, banners (inserted by child) --- #} {%
    block global_modals %}{% endblock %}

    <main id="starforge-main" role="main" tabindex="-1">
      {% block content %}{% endblock %}
    </main>

    {# --- Mobile/floating CTA block (optional, insert by child) --- #} {% block
    mobile_cta %}{% endblock %} {# --- Scripts --- #} {% block scripts %}
    <!-- Global JS (analytics, aos, intercom, etc.) -->
    {% block scripts_extra %}{% endblock %} {% endblock %}
  </body>
</html>
{% extends "base.html" %} {% block title %}{{ team.team_name if team and
team.team_name else "Connect ATX Elite" }}{% endblock %} {% block description
%}{{ team.description if team and team.description else "Elite youth
fundraising, memberships, and sponsor engagement." }}{% endblock %} {% block
content %} {# ================== GLOBAL ALERTS & BANNERS ================== #}
{% with messages = get_flashed_messages(with_categories=true) %} {% if messages
%}
<div
  aria-live="polite"
  class="fixed z-[20000] top-5 left-1/2 -translate-x-1/2 bg-yellow-400 text-black font-bold px-8 py-3 rounded-2xl shadow-xl animate-pop max-w-lg text-center"
>
  {% for category, message in messages %}
  <span>{{ message }}</span>{% if not loop.last %}<br />{% endif %} {% endfor %}
</div>
{% endif %} {% endwith %} {# SaaS Onboarding banner if not fully setup #} {% if
current_user and current_user.is_admin and not team.setup_complete %}
<div
  class="w-full bg-red-700/90 text-yellow-100 py-2 px-6 text-center font-bold shadow mb-4"
  aria-live="polite"
>
  🚧 Finish setting up your org for full features!
  <a
    href="/admin/setup"
    class="underline text-yellow-200 hover:text-white transition"
    >Complete setup →</a
  >
</div>
{% endif %} {# =============== HEADER + ANNOUNCEMENT BAR ================== #}
{% include "partials/header_and_announcement.html" %}

<main id="starforge-main-content" class="flex-1 flex flex-col gap-0">
  {# ================= HERO + FUNDRAISING BLOCK ================= #} {% include
  "partials/hero_and_fundraising.html" %} {# =============== ABOUT & MISSION
  (MOSAIC, STORY) =============== #} {% include
  "partials/about_and_mission.html" %} {# =========== IMPACT STATS + SPONSOR
  TIERS (no dupes) =========== #} {% include "partials/impact_and_tiers.html" %}
  {# ============= DIGITAL HUB (AI + ADMIN WIDGETS) ============= #} {% include
  "partials/digital_hub.html" %} {# =========== PROGRAM STATS + EVENTS CALENDAR
  ============ #} {% include "partials/program_stats_and_calendar.html" %}
</main>

{# ==== STICKY "WATCH OUR STORY" FAB (SaaS conversion boost) ==== #}
<div
  class="fixed bottom-6 right-8 z-[12000] md:bottom-8 md:right-10 animate-float-up print:hidden"
>
  <button
    id="starforge-storyBtn-fab"
    aria-haspopup="dialog"
    aria-controls="starforge-storyModal"
    aria-expanded="false"
    class="bg-yellow-400 text-black font-black px-7 py-3 rounded-full shadow-xl hover:scale-110 hover:shadow-yellow-300/80 focus-visible:ring-4 ring-yellow-300 transition-all text-lg animate-pulse flex items-center gap-2"
    onclick="document.getElementById('starforge-storyModal').showModal();"
  >
    ▶️ <span>Watch Our Story</span>
  </button>
</div>
{% include "partials/story_modal.html" %} {# ================ SITE FOOTER
================ #} {% include "partials/footer.html" %} {# ===========
NEWSLETTER MODAL (non-blocking) =========== #} {% include
"partials/newsletter.html" %} {# ===== SaaS Upgrade: Quick Contact Button
(always visible) ===== #}
<a
  href="mailto:{{ team.email if team and team.email else 'arodgps@gmail.com' }}"
  class="fixed bottom-5 left-4 z-[10000] rounded-full shadow-lg bg-amber-400/90 text-black font-extrabold px-5 py-3 flex items-center gap-2 hover:bg-yellow-300 hover:scale-105 transition ring-2 ring-yellow-300/50 print:hidden"
  style="animation: popIn 0.7s cubic-bezier(0.4, 2, 0.2, 1) 1.3s both"
  title="Quick Contact"
>
  📧 Quick Contact
</a>

{# ========== Admin-only: Onboarding Coach popover (wizard shortcut) ==========
#} {% if current_user and current_user.is_admin and not team.setup_complete %}
<div class="fixed bottom-24 right-8 z-[12001]">
  <div
    class="bg-zinc-900/95 text-yellow-100 border-2 border-yellow-300/50 rounded-2xl shadow-xl px-7 py-5 max-w-xs animate-bounce-slow"
  >
    <b>👋 Need help?</b><br />
    Set up your org colors, logo, and fundraising goal.<br />
    <a href="/admin/setup" class="text-yellow-400 underline"
      >Open Setup Wizard →</a
    >
  </div>
</div>
{% endif %} {% endblock %} {% block scripts_extra %} {# Optional: AOS,
analytics, or SaaS widget scripts #}
<script src="{{ url_for('static', filename='js/aos.js') }}"></script>
<script>
  AOS.init({ once: true, duration: 700 });
</script>
{# Add any extra scripts below, e.g., Intercom, analytics, Stripe, etc. #} {%
endblock %}
<!doctype html>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0" />
{% set badge = badge if badge is defined else None %} {% set challenge =
challenge if challenge is defined else {"metrics": []} %} {% set color_classes =
color_classes if color_classes is defined else "" %} {% set event = event if
event is defined else None %} {% set log = log if log is defined else None %} {%
set metric = metric if metric is defined else None %} {% set next_game =
next_game if next_game is defined else None %} {% set p = p if p is defined else
None %} {% set request = request if request is defined else None %} {% set
size_classes = size_classes if size_classes is defined else "" %} {% set sponsor
= sponsor if sponsor is defined else None %} {% set stat = stat if stat is
defined else None %} {% set widget = widget if widget is defined else None %} {#
===================== app/templates/macros/ui.html ===================== #} {#
---- Elite Button Macro ---- #} {# Usage: {{ render_button("Donate Now",
href="/donate", color="primary", size="md") }} #} {% macro render_button( label,
href="#", color="primary", size="md", extra_classes="" ) -%} {%- set
color_classes = { "primary": "bg-yellow-400 hover:bg-yellow-300 text-zinc-900",
"secondary": "bg-zinc-800 hover:bg-zinc-700 text-yellow-300", "danger":
"bg-red-600 hover:bg-red-500 text-white", "success": "bg-green-600
hover:bg-green-500 text-white" } -%} {%- set size_classes = { "sm": "px-4 py-1.5
text-sm", "md": "px-6 py-2 text-base", "lg": "px-8 py-3 text-lg" } -%}
<a
  href="{{ href }}"
  class="inline-block font-semibold rounded-xl shadow transition focus:outline-none focus-visible:ring-2 focus-visible:ring-yellow-400/80 {{ color_classes.get(color, color_classes['primary']) }} {{ size_classes.get(size, size_classes['md']) }} {{ extra_classes }}"
  role="button"
  tabindex="0"
  >{{ label }}</a
>
{%- endmacro %}
<!doctype html>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0" />
{% set badge = badge if badge is defined else None %} {% set challenge =
challenge if challenge is defined else {"metrics": []} %} {% set color_classes =
color_classes if color_classes is defined else "" %} {% set event = event if
event is defined else None %} {% set log = log if log is defined else None %} {%
set metric = metric if metric is defined else None %} {% set next_game =
next_game if next_game is defined else None %} {% set p = p if p is defined else
None %} {% set request = request if request is defined else None %} {% set
size_classes = size_classes if size_classes is defined else "" %} {% set sponsor
= sponsor if sponsor is defined else None %} {% set stat = stat if stat is
defined else None %} {% set widget = widget if widget is defined else None %} {#
Macro: progress(raised, goal) — beautiful animated progress bar #} {% macro
progress(raised, goal) -%}
<div>
  x-data="{ pct: ((goal &gt; 0) ? (raised/goal*100).toFixed(1) : 0) }"
  x-init="$refs.bar.style.width = pct + '%'; if (pct &gt;= 100)
  import('https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/+esm') .then(c
  =&gt; c.default({ origin: { y: 0.8 } }));" class="relative starforge-mt-6" >
  <div>
    class="h-5 w-full bg-zinc-700 rounded-full overflow-hidden shadow-inner" >
    <div>
      x-ref="bar" class="h-full bg-gradient-to-r from-yellow-400 to-yellow-300
      rounded-full transition-all duration-700" >
    </div>
  </div>
  <span>
    class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-6 font-bold
    text-white drop-shadow" >${{ raised | int }}</span
  >
  <span>
    class="absolute right-0 top-1/2 -translate-y-1/2 text-xs font-bold
    text-yellow-200" > Goal: ${{ goal | int }}</span
  >
</div>
{%- endmacro %}
<!doctype html>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0" />
{% set badge = badge if badge is defined else None %} {% set challenge =
challenge if challenge is defined else {"metrics": []} %} {% set color_classes =
color_classes if color_classes is defined else "" %} {% set event = event if
event is defined else None %} {% set log = log if log is defined else None %} {%
set metric = metric if metric is defined else None %} {% set next_game =
next_game if next_game is defined else None %} {% set p = p if p is defined else
None %} {% set request = request if request is defined else None %} {% set
size_classes = size_classes if size_classes is defined else "" %} {% set sponsor
= sponsor if sponsor is defined else None %} {% set stat = stat if stat is
defined else None %} {% set widget = widget if widget is defined else None %} {#
========================= Starforge Badge Macro Usage: {{ badge("VIP", "gold")
}} or: {{ badge("Champion", "yellow") }} ========================= #} {% macro
badge(label, color="gold") -%}
<span>
  class="inline-block px-3 py-1 rounded-full font-bold text-zinc-900 bg-{{ color
  }} shadow border-2 border-{{ color }} drop-shadow uppercase tracking-wide
  text-xs" > {{ label }}</span
>
{%- endmacro %}
<!doctype html>
<html>
  <head>
    <meta
      name="generator"
      content="HTML Tidy for HTML5 for Linux version 5.8.0"
    />
  </head>
  <body>
    {% set badge = badge if badge is defined else None %} {% set challenge =
    challenge if challenge is defined else {"metrics": []} %} {% set
    color_classes = color_classes if color_classes is defined else "" %} {% set
    event = event if event is defined else None %} {% set log = log if log is
    defined else None %} {% set metric = metric if metric is defined else None
    %} {% set next_game = next_game if next_game is defined else None %} {% set
    p = p if p is defined else None %} {% set request = request if request is
    defined else None %} {% set size_classes = size_classes if size_classes is
    defined else "" %} {% set sponsor = sponsor if sponsor is defined else None
    %} {% set stat = stat if stat is defined else None %} {% set widget = widget
    if widget is defined else None %} size="md", extra_classes="") -%} {%- set
    color_classes = { "primary": "bg-yellow-400 hover:bg-yellow-300
    text-zinc-900", "secondary": "bg-zinc-800 hover:bg-zinc-700
    text-yellow-300", "danger": "bg-red-600 hover:bg-red-500 text-white",
    "success": "bg-green-600 hover:bg-green-500 text-white" } -%} {%- set
    size_classes = { "sm": "px-4 py-1.5 text-sm", "md": "px-6 py-2 text-base",
    "lg": "px-8 py-3 text-lg" } -%}
    <a
      href="{{ href }}"
      class="inline-block font-semibold rounded-xl shadow transition focus:outline-none focus-visible:ring-2 focus-visible:ring-yellow-400/80 {{ color_classes.get(color, color_classes['primary']) }} {{ size_classes.get(size, size_classes['md']) }} {{ extra_classes }}"
      role="button"
      tabindex="0"
      >{{ label }}</a
    >
    {%- endmacro %}
  </body>
</html>
