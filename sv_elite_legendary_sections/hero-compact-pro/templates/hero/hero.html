{# Wrapper hero that includes partials and keeps CSP-safe by avoiding inline styles/scripts #}
{% set THEME_HEX    = theme_hex|default('#facc15') %}
{% set TEAM_NAME    = (team.name if team and team.name else team.team_name if team and team.team_name else 'Connect ATX Elite') %}
{% set hero_alt        = (hero_alt if hero_alt is defined and hero_alt) or (TEAM_NAME ~ ' team photo') %}

{% set _hero_src = (
  (hero_image_url if hero_image_url is defined and hero_image_url) or
  (team.hero_bg if team and team.hero_bg) or
  (team.hero_image if team and team.hero_image) or
  (team.team_photo if team and team.team_photo) or
  (team.photo_url if team and team.photo_url) or
  'images/hero/hero-1920.avif'
) %}
{% set _hero_mobile = (hero_image_mobile_url if hero_image_mobile_url is defined and hero_image_mobile_url else _hero_src) %}
{% set hero_src        = (_hero_src if '://' in _hero_src else (url_for('static', filename=_hero_src.lstrip('/')) if url_for is defined else '/static/' ~ _hero_src.lstrip('/'))) %}
{% set hero_src_mobile = (_hero_mobile if '://' in _hero_mobile else (url_for('static', filename=_hero_mobile.lstrip('/')) if url_for is defined else '/static/' ~ _hero_mobile.lstrip('/'))) %}

<section id="fc-hero"
         class="fc-hero v7 compact-pro fullbleed dashboard"
         aria-label="Fundraiser hero"
         data-focal-x="50%" data-focal-y="28%"
         data-accent="{{ THEME_HEX }}"
         data-test="hero">

  <i class="hero-vignette" aria-hidden="true"></i>

  <div class="hero-shell tilt-3d" data-tilt-max="8" data-tilt-perspective="1000" data-tilt-glare="1">
    <!-- Media -->
    <picture class="hero-media tilt-layer z20">
      <source srcset="{{ hero_src_mobile }}" media="(max-width: 640px)">
      <img id="fc-hero-img" src="{{ hero_src }}" alt="{{ hero_alt }}"
           width="1920" height="1080" sizes="100vw"
           class="hero-img" decoding="async" fetchpriority="high" loading="eager" draggable="false">
    </picture>

    <!-- Readability overlays -->
    <div class="face-belt" aria-hidden="true"></div>
    <div class="bottom-fade" aria-hidden="true"></div>

    <!-- Grid -->
    <div class="hero-grid tilt-layer z36">
      {% include "hero/_left.html" %}
      {% include "hero/_rail.html" %}
    </div>

    <div class="holo-glare" aria-hidden="true"></div>
    <button id="hero-cue" class="scroll-cue" type="button" aria-label="Scroll to content">
      <span class="dot" aria-hidden="true"></span> Scroll
    </button>

    <!-- Mobile sticky donate (shows under 640px) -->
    <a class="mobile-sticky-cta" href="{{ HREF_DONATE }}" data-payment-link data-test="mobile-sticky">Donate Now</a>
  </div>
</section>
