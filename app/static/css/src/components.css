@layer components {
  .glass {
    background: var(--team-glass);
    background: linear-gradient(180deg, rgb(20 20 20 / 70%), rgb(20 20 20 / 86%)),
                linear-gradient(125deg, var(--brand-soft), rgb(255 255 255 / 3%));

    @apply backdrop-blur-xl border rounded-2xl border-zinc-700/40 shadow-[0_18px_60px_rgba(212,175,55,0.16),inset_0_0_40px_rgba(212,175,55,0.07)];
  }

  .card { @apply rounded-2xl border border-zinc-700/40 bg-zinc-900/70 shadow-xl; transition: transform .18s var(--easing), box-shadow .18s var(--easing), border-color .18s var(--easing); }
  .card:hover { border-color: color-mix(in oklab, var(--team-gold) 30%, transparent); box-shadow: 0 16px 46px rgb(212 175 55 / 18%); transform: translateY(-2px); }

  .btn { @apply inline-flex items-center justify-center gap-2 rounded-xl px-4 py-2 font-bold transition; transition-duration: .15s; transition-property: transform, box-shadow, background, color, border-color; }
  .btn:active { transform: translateY(1px); }
  .btn-primary { background: var(--btn-primary-bg); box-shadow: var(--btn-glow); color: var(--btn-primary-text); }
  .btn-primary:hover { background: var(--btn-primary-hover-bg); color: var(--btn-primary-hover-text); }
  .btn-outline { background: var(--btn-outline-bg); border: 2px solid var(--btn-outline-border); color: var(--btn-outline-text); }
  .btn-outline:hover { background: var(--btn-outline-hover-bg); color: var(--btn-outline-hover-text); }
  .btn-ghost { @apply bg-transparent text-yellow-200 hover:bg-yellow-400/10; }
  .btn-danger { @apply bg-red-600 text-white hover:bg-red-500; }
  .btn-loading { opacity: .8; pointer-events: none; position: relative; }
  .btn-loading::after { animation: spin 1s linear infinite; border: 2.6px solid #fff; border-radius: 9999px; border-top-color: transparent; content: ""; height: 1.1em; position: absolute; right: 1rem; top: 50%; transform: translateY(-50%); width: 1.1em; }

  .chip { @apply inline-flex items-center gap-1 rounded-full px-3 py-1 text-sm font-bold;

    background: color-mix(in oklab, var(--team-gold) 14%, transparent);
    border: 1px solid color-mix(in oklab, var(--team-gold) 40%, transparent);
  }

  .badge { @apply inline-flex items-center gap-1 rounded-full px-2.5 py-0.5 text-xs font-extrabold;

    background: color-mix(in oklab, var(--team-gold) 22%, transparent);
    border: 1px solid color-mix(in oklab, var(--team-gold) 50%, transparent);
    box-shadow: var(--badge-glow);
  }

  .toast { @apply fixed z-[1050] bottom-6 right-6 rounded-xl px-4 py-3 text-sm font-semibold shadow-2xl;

    background: linear-gradient(180deg, rgb(20 20 20 / 90%), rgb(20 20 20 / 84%));
    border: 1px solid var(--brand-soft-2);
  }
  .modal-backdrop { @apply fixed inset-0 bg-black/70 backdrop-blur-sm; }

  .modal { @apply fixed inset-x-0 top-[10vh] mx-auto w-[92vw] max-w-lg rounded-2xl p-5;

    background: linear-gradient(180deg, rgb(15 15 15 / 92%), rgb(15 15 15 / 86%));
    border: 1px solid var(--brand-soft-2);
  }

  .input-group { @apply relative mb-8; }
  input:disabled, textarea:disabled, select:disabled { @apply cursor-not-allowed bg-zinc-800 opacity-60; }

  /* Put autofill before focus to satisfy stylelint specificity rule */
  input:-webkit-autofill, textarea:-webkit-autofill, select:-webkit-autofill {
    box-shadow: 0 0 0 1000px var(--input-bg) inset !important;
    -webkit-text-fill-color: var(--input-text) !important;
  }

  .input-group input, .input-group textarea, .input-group select {
    background-color: var(--input-bg);
    border: 2px solid var(--input-border);
    color: var(--input-text);
    font-size: 1rem; line-height: 1.4;
    padding-top: 1.45rem;

    @apply w-full rounded-xl p-3 font-medium shadow-inner transition-colors duration-200 ease-in-out;
  }
  .input-group textarea { @apply min-h-[44px] max-h-[300px] resize-none overflow-y-hidden; }

  .input-group input:focus, .input-group textarea:focus, .input-group select:focus {
    background-color: #1a1617;
    border-color: var(--focus-ring);
    box-shadow: 0 0 0 3px rgb(220 38 38 / 18%);
    outline: none;
    transition: border-color .3s ease;
  }

  .input-group input:focus-visible, .input-group textarea:focus-visible, .input-group select:focus-visible {
    animation: red-breathe 1.6s infinite alternate;
    box-shadow: 0 0 0 3px #dc262620, 0 0 15px 2px #dc262650, 0 0 30px 8px #d4af3720;
    outline: 3px solid var(--focus-ring); outline-offset: 3px;
  }

  .input-group label {
    background: transparent; color: var(--input-text);
    font-size: 1rem; font-weight: 600; left: 1rem; letter-spacing: .01em; padding: 0 .3em;
    pointer-events: none;
    position: absolute; top: 1.25rem;
    transition: all .21s cubic-bezier(.4,0,.2,1), color .16s, background .28s; user-select: none; z-index: 10;
  }

  .input-group input:focus + label,
  .input-group input:not(:placeholder-shown) + label,
  .input-group textarea:focus + label,
  .input-group textarea:not(:placeholder-shown) + label,
  .input-group select:focus + label,
  .input-group select:not([value=""]) + label {
    background: var(--input-bg);
    border-radius: .55rem;
    box-shadow: 0 2px 12px #dc262640;
    color: var(--focus-ring);
    font-size: .76rem; font-weight: 700; letter-spacing: .06em;
    opacity: .97; padding: 0 .5em; top: .28rem;
  }

  .input-prefix, .input-suffix { @apply absolute top-1/2 -translate-y-1/2 text-sm text-zinc-300; }
  .input-prefix { left: .9rem; } .input-suffix { right: .9rem; }

  input::placeholder, textarea::placeholder { color: #ffdada; font-weight: 600; letter-spacing: .04em; opacity: .89; }

  .input-progress-bar {
    background: linear-gradient(90deg, #dc2626 40%, #d4af37 100%);
    border-radius: 0 0 1rem 1rem;
    bottom: 0; height: 3px; left: 0; pointer-events: none; position: absolute; right: 0; transition: width .24s cubic-bezier(.4,0,.2,1); z-index: 10;
  }

  .input-group input:invalid, .input-group textarea:invalid, .input-group select:invalid {
    background-color: var(--team-black);
    border-color: var(--input-error);
    box-shadow: 0 0 0 3px rgb(220 38 38 / 30%);
  }
  .input-group [data-valid="true"] { border-color: var(--input-success) !important; box-shadow: 0 0 0 3px rgb(22 163 74 / 50%) !important; }
  .input-group input[data-valid="true"]:focus, .input-group textarea[data-valid="true"]:focus { animation: pulse-success .7s; }

  .input-helper { color: var(--input-helper); display: block; font-size: .83rem; margin-left: .12rem; margin-top: .28rem; user-select: none; }
  .input-helper.error { color: var(--input-helper-error); font-weight: 700; }

  .input-clear {
    @apply pointer-events-none absolute right-3 top-1/2 z-10 -translate-y-1/2 cursor-pointer rounded border-0 bg-transparent text-current opacity-0 transition-opacity duration-200;

    font-size: 1.125rem; transition: opacity .2s, box-shadow .23s;
  }

  .input-group input[type="text"]:focus ~ .input-clear,
  .input-group input[type="text"]:hover ~ .input-clear,
  .input-group input[type="email"]:focus ~ .input-clear,
  .input-group input[type="email"]:hover ~ .input-clear,
  .input-group input[type="search"]:focus ~ .input-clear,
  .input-group input[type="search"]:hover ~ .input-clear {
    background: #fff6f6; box-shadow: 0 0 9px 2px var(--team-red);
    color: var(--team-red); opacity: 1 !important; pointer-events: auto;
  }

  input[type="file"]::file-selector-button {
    @apply mr-3 rounded-lg border border-red-600 bg-red-600 px-3 py-1 text-sm font-semibold text-white hover:bg-red-500 transition;
  }

  .input-stack { @apply flex flex-col gap-2 sm:gap-3; }
  .skeleton-input { @apply mb-5 h-10 min-h-[44px] w-full animate-pulse rounded-xl bg-zinc-700; }
}

