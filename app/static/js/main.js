(()=>{(()=>{"use strict";let s={throttle(e,t=120){let o=0,i=null;return(...r)=>{let l=Date.now(),a=t-(l-o);a<=0?(o=l,e(...r)):i||(i=setTimeout(()=>{i=null,o=Date.now(),e(...r)},a))}},sanitize(e=""){return String(e).replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[t])},toNumber(e="0"){return parseFloat(String(e).replace(/[^0-9.]/g,""))||0}},n={io:null,dom:{},cacheDom(){this.dom={backToTop:document.getElementById("backToTop"),hamburger:document.getElementById("hamburger"),mobileMenu:document.getElementById("mobile-menu"),progressBar:document.querySelector("#hero-meter-bar > div, .progress-bar"),progressPercent:document.getElementById("hero-meter-percent"),emojiMilestone:document.getElementById("emoji-milestone"),fundsRaised:document.getElementById("funds-raised")||document.getElementById("funds-raised-meter"),fundsGoal:document.getElementById("funds-goal")||document.getElementById("funds-goal-meter"),vipToast:document.getElementById("vip-toast"),sponsorModal:document.getElementById("sponsor-spotlight-modal")||document.getElementById("sponsor-spotlight-modal-footer"),sponsorNameEl:document.getElementById("sponsor-name")||document.getElementById("sponsor-name-footer"),amountEl:document.getElementById("donation-amount")||document.getElementById("hero-donation-amount"),impactEl:document.getElementById("impact-message")||document.getElementById("hero-impact-message"),heroHeading:document.getElementById("hero-heading")}},init(){this.cacheDom(),this.fixHeroHeadingVisibility(),this.initSocket(),this.bindEvents(),this.initScrollAnimations(),this.updateProgressMeter(),this.initVIPToast(),this.initHeroQuotes(),this.initLiveImpactPreview()},fixHeroHeadingVisibility(){let e=this.dom.heroHeading;e&&(e.style.opacity="1",e.style.visibility="visible",e.style.transition="none",e.style.animation="none",e.style.color="#facc15",e.style.textShadow="0 0 8px #facc15cc, 0 4px 12px rgba(250, 204, 21, 0.5)")},initSocket(){try{let e=window.io;if(!e){console.warn("\u26A0\uFE0F  Socket.IO not available \u2013 real-time features disabled.");return}this.io=e()}catch{console.warn("\u26A0\uFE0F  Socket.IO not available \u2013 real-time features disabled.");return}this.io.on("new_donation",e=>{if(!e)return;let t=Number(e.amount||0),o=s.sanitize(String(e.name||"Anonymous"));this.showDonationTicker(`\u{1F389} <b>$${t.toLocaleString()}</b> from <b>${o}</b> \u2013 Thank you!`),(window.launchConfetti||this.launchConfetti).call(this),this.updateProgressMeter()}),this.io.on("new_sponsor",e=>{if(!e)return;let t=s.sanitize(String(e.name||"A Generous Donor"));this.sponsorAlert(t,"Champion Sponsor"),this.openSpotlight(t)})},bindEvents(){this.dom.backToTop?.addEventListener("click",()=>window.scrollTo({top:0,behavior:"smooth"})),this.dom.hamburger?.addEventListener("click",()=>this.toggleMobileNav()),document.addEventListener("click",e=>{let t=e.target.closest(".copy-quote");t&&this.copyQuote(t)}),window.addEventListener("scroll",s.throttle(()=>this.revealHeadings()),{passive:!0}),this.revealHeadings(),this.dom.heroHeading?.addEventListener("focus",()=>{this.fixHeroHeadingVisibility()})},toggleMobileNav(){let{mobileMenu:e,hamburger:t}=this.dom;if(!e||!t)return;let o=e.classList.toggle("open");t.setAttribute("aria-expanded",String(o)),document.body.style.overflow=o?"hidden":"",o&&e.querySelector('a,button,input,select,textarea,[tabindex]:not([tabindex="-1"])')?.focus()},copyQuote(e){let t=e.dataset.quote||"";if(!navigator.clipboard){alert("Copy not supported on this browser.");return}navigator.clipboard.writeText(t).then(()=>{let o=e.closest("figure,div,section")?.querySelector("#quote-status");o&&(o.textContent="Quote copied to clipboard");let i=e.textContent;e.textContent="Copied!",e.classList.add("bg-yellow-300","text-black","font-bold"),setTimeout(()=>{o&&(o.textContent=""),e.textContent=i||"Copy Quote",e.classList.remove("bg-yellow-300","text-black","font-bold")},1400)}).catch(()=>alert("Copy failed"))},revealHeadings(){document.querySelectorAll("h1, h2").forEach(e=>{!e.classList.contains("in-view")&&e.getBoundingClientRect().top<window.innerHeight-60&&(e.style.opacity=1,e.classList.add("in-view"))})},initScrollAnimations(){if(document.querySelectorAll("h1, h2").forEach(e=>{e.style.opacity=0,e.style.transition="opacity 0.7s cubic-bezier(.4,0,.2,1)"}),"IntersectionObserver"in window){let e=new IntersectionObserver((t,o)=>{t.forEach(i=>{i.isIntersecting&&(i.target.classList.add("in-view","animate-sparkle"),o.unobserve(i.target))})},{threshold:.4});document.querySelectorAll(".badge-glass, .prestige-badge").forEach(t=>e.observe(t))}},updateProgressMeter(){let{progressBar:e,progressPercent:t,emojiMilestone:o,fundsRaised:i,fundsGoal:r}=this.dom;if(!e||!i||!r)return;let l=s.toNumber(i.textContent),a=Math.max(s.toNumber(r.textContent),1),d=Math.min(l/a*100,100),c=d.toFixed(1);setTimeout(()=>{e.style.width=`${c}%`,e.setAttribute("aria-valuenow",String(l)),e.setAttribute("aria-valuemin","0"),e.setAttribute("aria-valuemax",String(a)),t&&(t.textContent=`${c}%`),o&&(o.textContent=d>=100?"\u{1F3C6}":d>=75?"\u{1F680}":d>=50?"\u{1F525}":d>=25?"\u{1F680}":"\u{1F4A4}")},300)},initVIPToast(){let{vipToast:e}=this.dom;!e||sessionStorage.getItem("vipToastShown")||(e.textContent="\u{1F389} Welcome! New sponsors will be spotlighted here \u2014 you could be next!",e.classList.remove("hidden"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),setTimeout(()=>e.classList.add("hidden"),6500),sessionStorage.setItem("vipToastShown","1"))},initHeroQuotes(){if(!Array.isArray(window.heroQuotes)||window.heroQuotes.length===0)return;let e=window.heroQuotes,t=document.getElementById("hero-quote-text"),o=document.getElementById("hero-quote-author"),i=document.getElementById("hero-quote-title"),r=document.getElementById("hero-quote-avatar");(l=>{let a=e[l];a&&(t&&(t.innerText=a.text||""),o&&(o.innerText=a.author||""),i&&(i.innerText=a.title||""),r&&a.avatar&&(r.src=a.avatar))})(0)},initLiveImpactPreview(){let{amountEl:e,impactEl:t}=this.dom;if(!e||!t)return;t.setAttribute("role","status"),t.setAttribute("aria-live","polite");let o=()=>{let i=parseFloat(e.value)||0,r="";i>=150?r=`\u{1F393} Your $${i} \u2192 one week of gym time for all players!`:i>=100?r=`\u{1F3C0} Your $${i} \u2192 a full scholarship for a player!`:i>=50?r=`\u{1F455} Your $${i} \u2192 a new team jersey.`:r="\u{1F44F} Every dollar counts \u2014 thank you!",t.textContent=r,t.classList.remove("hidden")};o(),e.addEventListener("input",o,{passive:!0})},showDonationTicker(e){let t=this.dom.donationTicker;t||(t=document.createElement("div"),t.id="donation-ticker",t.className="fixed bottom-8 left-1/2 -translate-x-1/2 bg-yellow-400/95 text-black font-bold px-7 py-3 rounded-2xl shadow-xl z-[9999] text-lg animate-bounce-in",t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),document.body.appendChild(t),this.dom.donationTicker=t),t.innerHTML=e,t.classList.add("show"),setTimeout(()=>t.classList.remove("show"),4e3)},openSpotlight(e="A Generous Donor"){let{sponsorModal:t,sponsorNameEl:o}=this.dom;!t||!o||(o.innerHTML=`<span class="text-red-400 font-bold">${s.sanitize(e)}</span>`,t.classList.add("show"),t.setAttribute("aria-modal","true"),(window.launchConfetti||this.launchConfetti).call(this),setTimeout(()=>this.closeSpotlight(),4e3))},closeSpotlight(){this.dom.sponsorModal?.classList.remove("show")},renderSponsorLeaderboard(e=[]){let t=document.getElementById("sponsor-leaderboard-main");if(t){if(e.length===0){t.innerHTML='<div class="col-span-2 text-center text-lg text-gold/80 font-semibold">Be our first sponsor! \u{1F3C6}</div>';return}t.innerHTML=e.map((o,i)=>`
          <div class="rounded-2xl border-4 ${i===0?"border-gold bg-gradient-to-r from-gold/20 via-red-700/10 to-white/10 scale-105 shadow-inner-gold animate-pulse":"border-white/20 bg-black/40"} shadow-elevated p-5 flex flex-col items-center text-center">
            <span class="text-2xl font-extrabold ${i===0?"text-gold drop-shadow":"text-white/80"}">
              ${s.sanitize(o.name)}
            </span>
            <span class="text-xl font-bold mt-2 ${i===0?"text-red-400":"text-white/60"}">
              $${Number(o.amount||0).toLocaleString()}
            </span>
            ${i===0?'<div class="prestige-badge mt-3">\u{1F3C6} Top Champion</div>':""}
          </div>
        `).join("")}},sponsorAlert(e,t="Champion Sponsor"){document.querySelectorAll(".starforge-sponsor-alert")?.forEach(i=>i.remove());let o=document.createElement("div");o.className="starforge-sponsor-alert fixed bottom-4 right-4 z-[9999] flex flex-col items-end animate-bounce-in",o.setAttribute("role","status"),o.setAttribute("aria-live","polite"),o.innerHTML=`
        <div class="bg-black border-4 border-gold rounded-2xl px-7 py-4 shadow-elevated flex flex-col items-center text-center">
          <img src="/static/images/logo.webp" class="w-12 h-12 mb-2 rounded-full border-2 border-gold shadow-gold-glow" alt="Logo" />
          <span class="text-lg font-bold text-gold mb-2">\u{1F525} NEW SPONSOR ALERT! \u{1F525}</span>
          <span class="text-white font-semibold mb-2">Thank you <b>${s.sanitize(e)}</b> for supporting the team!</span>
          <span class="prestige-badge">${s.sanitize(t)} \u{1F3C6}</span>
        </div>`,document.body.appendChild(o),setTimeout(()=>o.remove(),4800)},launchConfetti(){let e=["#facc15","#dc2626","#fff","#18181b"];for(let t=0;t<64;t+=1){let o=document.createElement("div");o.className="confetti",o.style.background=e[Math.floor(Math.random()*e.length)],o.style.left=`${Math.random()*100}vw`,o.style.animationDelay=`${Math.random()*1.5}s`,document.body.appendChild(o),setTimeout(()=>o.remove(),1800)}navigator.vibrate?.([22,16,6])}};document.addEventListener("DOMContentLoaded",()=>n.init()),window.FC={showDonationTicker:n.showDonationTicker.bind(n),openSpotlight:n.openSpotlight.bind(n),closeSpotlight:n.closeSpotlight.bind(n),renderSponsorLeaderboard:n.renderSponsorLeaderboard.bind(n),sponsorAlert:n.sponsorAlert.bind(n),launchConfetti:n.launchConfetti.bind(n)}})();function u(s){let n=s.querySelectorAll('a[href], button, input, textarea, select, [tabindex]:not([tabindex="-1"])'),e=n[0],t=n[n.length-1];s.addEventListener("keydown",o=>{o.key==="Tab"&&(o.shiftKey?document.activeElement===e&&(o.preventDefault(),t.focus()):document.activeElement===t&&(o.preventDefault(),e.focus()))})}if(document.addEventListener("DOMContentLoaded",()=>{let s=document.getElementById("story-modal");s&&u(s)}),typeof io<"u"){let s=io();s.on("fundraising_update",n=>{let e=document.querySelector(".fundraising-meter .progress-bar");if(e){let o=Math.min(100,n.raised/n.goal*100);e.style.width=o+"%"}let t=document.querySelector(".recent-donors");if(t&&n.new_donor){let o=document.createElement("span");o.textContent=n.new_donor,o.className="donor-badge animate-popIn",t.prepend(o),setTimeout(()=>o.remove(),8e3)}}),s.on("donation_thanks",n=>{let e=document.createElement("div");e.className="toast-notification",e.textContent=`Thank you, ${n}, for supporting the team!`,document.body.appendChild(e),setTimeout(()=>e.remove(),3500)})}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".tier-card").forEach(s=>{let n=s.querySelector(".tier-popover");if(!n)return;function e(){n.classList.remove("sr-only"),n.style.pointerEvents="auto",n.style.opacity="1";let o=s.getBoundingClientRect();n.style.top=window.scrollY+o.top-n.offsetHeight-8+"px",n.style.left=window.scrollX+o.left+o.width/2-n.offsetWidth/2+"px"}function t(){n.classList.add("sr-only"),n.style.pointerEvents="none",n.style.opacity="0"}s.addEventListener("mouseenter",e),s.addEventListener("focus",e),s.addEventListener("mouseleave",t),s.addEventListener("blur",t)})})})();document.querySelectorAll(".countup").forEach(u=>{new window.CountUp.CountUp(u,u.dataset.count).start()});
//# sourceMappingURL=main.js.map
