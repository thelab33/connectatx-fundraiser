/* FundChamps bundle | production | 33111dc9 | 2025-09-08T19:05:43.968Z */
(()=>{var Se=Object.create;var Q=Object.defineProperty;var ke=Object.getOwnPropertyDescriptor;var Te=Object.getOwnPropertyNames;var Le=Object.getPrototypeOf,Oe=Object.prototype.hasOwnProperty;var Y=(o=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(o,{get:(a,c)=>(typeof require<"u"?require:a)[c]}):o)(function(o){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+o+'" is not supported')});var _e=(o,a)=>()=>(o&&(a=o(o=0)),a);var Ce=(o,a,c,m)=>{if(a&&typeof a=="object"||typeof a=="function")for(let f of Te(a))!Oe.call(o,f)&&f!==c&&Q(o,f,{get:()=>a[f],enumerable:!(m=ke(a,f))||m.enumerable});return o};var z=(o,a,c)=>(c=o!=null?Se(Le(o)):{},Ce(a||!o||!o.__esModule?Q(c,"default",{value:o,enumerable:!0}):c,o));var xe={};async function Ae(){if(!Z||!window.Stripe)return null;if(E)return E;E=window.Stripe(Z),x=E.elements({appearance:{theme:"night"}});let o=h("#stripe-payment-element");return o&&(ee=x.create("payment",{fields:{billingDetails:"never"}}),ee.mount(o)),E}var h,je,Pe,Z,E,x,ee,O,te,ne=_e(()=>{h=(o,a=document)=>a.querySelector(o),je=(o,a,c)=>(window.addEventListener(o,a,c),()=>window.removeEventListener(o,a,c)),Pe=o=>{let a=!1;return(...c)=>{a||(a=!0,o(...c))}},Z=document.querySelector('meta[name="stripe-pk"]')?.content||window.__STRIPE_PK||"";je("fc:donate:open",o=>{let a=o?.detail?.amount,c=h("#donation-amount");c&&Number.isFinite(+a)&&(c.value=String(a),c.dispatchEvent(new Event("input",{bubbles:!0}))),h("#donation-modal")?.showModal?.()},{passive:!0});O=h("#sponsor-donation-form");O&&O.addEventListener("submit",async o=>{if((O.querySelector('input[name="payment_method"]:checked')?.value||"stripe")!=="stripe")return;o.preventDefault();let c=parseFloat(h("#donation-amount")?.value||"0")||0,m=h("#donor-name")?.value||"Supporter",f=h("#donor-email")?.value||"";if(!(c<=0))try{await Ae();let w=await fetch("/api/payments/stripe/intent",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"same-origin",body:JSON.stringify({amount:c,name:m,email:f,frequency:O.querySelector('input[name="frequency"]:checked')?.value||"once"})}),{client_secret:y}=await w.json(),{error:b}=await E.confirmPayment({elements:x,clientSecret:y,confirmParams:{return_url:window.location.href}});if(b)throw b}catch(w){alert("Payment error: "+(w?.message||"Please try again."))}});document.addEventListener("click",o=>{let a=o.target.closest("[data-open-donate-modal][data-amount]");if(!a)return;let c=parseInt(a.getAttribute("data-amount")||"0",10)||0,m=Math.max(10,Math.round(c*.1));window.dispatchEvent(new CustomEvent("fc:donate:open",{detail:{amount:m}}))},{passive:!0});(async()=>{if(!h("#paypal-buttons")||!window.paypal)return;let a=h("#donation-amount"),c=()=>Math.max(1,parseInt(a?.value||"0",10)||0);try{await window.paypal.Buttons({createOrder:async()=>(await(await fetch("/api/payments/paypal/order",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"same-origin",body:JSON.stringify({amount:c()})})).json()).id,onApprove:async m=>{await fetch(`/api/payments/paypal/capture/${m.orderID}`,{method:"POST",credentials:"same-origin"});try{window.confetti?.({particleCount:120,spread:70,origin:{y:.7}})}catch{}alert("âœ… Thank you! Your sponsorship was captured.")}}).render("#paypal-buttons")}catch{}})();te=h("#sponsors-hub");if(te&&"IntersectionObserver"in window){let o=Pe(()=>fetch("/api/metrics/impression",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({key:"sponsors_hub"})}).catch(()=>{}));new IntersectionObserver(a=>a.forEach(c=>{c.isIntersecting&&o()}),{threshold:.2}).observe(te)}document.addEventListener("click",o=>{let a=o.target.closest('a[rel~="sponsored"], a[data-sponsor]');a&&fetch("/api/metrics/click",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({key:a.getAttribute("href")||"sponsor",name:a.dataset.sponsorName||""})}).catch(()=>{})},{passive:!0})});(()=>{"use strict";if(window.__FC_APP_INIT__)return;window.__FC_APP_INIT__=!0;let o=document.documentElement;o.classList.add("js"),o.classList.remove("no-js"),o.setAttribute("data-fc-app","true");let a=o.getAttribute("data-env")||window.APP_ENV||"production",c=/dev|local/.test(String(a).toLowerCase()),m=e=>!!(window.matchMedia&&window.matchMedia(e).matches),f={reducedMotion:m("(prefers-reduced-motion: reduce)"),reducedData:!!(navigator.connection&&(navigator.connection.saveData||String(navigator.connection.effectiveType||"").includes("2g"))),highContrast:m("(prefers-contrast: more)")};(f.reducedMotion||f.reducedData)&&o.classList.add("fc-reduced");let w=(e,t=document)=>t.querySelector(e),y=(e,t=document)=>Array.from(t.querySelectorAll(e)),b=(e,t,n)=>{let r=s=>{try{t(s)}finally{window.removeEventListener(e,r,n)}};window.addEventListener(e,r,n)},k=(e,t=1200)=>"requestIdleCallback"in window?window.requestIdleCallback(e,{timeout:t}):setTimeout(e,0),N=e=>requestAnimationFrame(e),re=e=>k(()=>N(e)),T=w('meta[name="csp-nonce"]')?.content||"";if(!T)try{T=document.currentScript?.nonce||""}catch{}let I=e=>(T&&e.setAttribute("nonce",T),e),oe=e=>{try{let t=document.cookie.match(new RegExp("(^|;\\s*)"+e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+"=([^;]*)"));return t?decodeURIComponent(t[2]):""}catch{return""}},_=()=>w('meta[name="csrf-token"]')?.content||oe("csrf_token")||"",S=null;try{S=new BroadcastChannel("fc_ui"),S.onmessage=e=>{let t=e?.data;t&&t.t&&p(t.t,t)}}catch{}let p=(e,t)=>window.dispatchEvent(new CustomEvent(e,{detail:t})),ae=(e,t,n)=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),se=e=>{try{let t=typeof e=="string"?new URL(e,location.href):e instanceof Request?new URL(e.url,location.href):e?.url?new URL(e.url,location.href):null;return!t||t.origin===location.origin}catch{return!1}},q=(e=location.href)=>Object.fromEntries(new URL(e).searchParams.entries()),R=e=>{let t=new URLSearchParams;return Object.entries(e||{}).forEach(([n,r])=>{r==null||r===""||(Array.isArray(r)?r.forEach(s=>t.append(n,s)):t.set(n,String(r)))}),t.toString()},L={get(e,t=null){try{let n=localStorage.getItem(e);return n?JSON.parse(n):t}catch{return t}},set(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch{}},del(e){try{localStorage.removeItem(e)}catch{}}},U=(e,t=null)=>{let n=L.get(e);return n?n.t&&Date.now()>n.t?(L.del(e),t):n.v??t:t},D=(e,t,n)=>L.set(e,{v:t,t:n?Date.now()+n:0}),C=window.fetch?window.fetch.bind(window):null,ce=(e,t)=>{let n=new AbortController,r=setTimeout(()=>n.abort(new DOMException("Timeout","AbortError")),e);return t?.addEventListener?.("abort",()=>{try{clearTimeout(r),n.abort(t.reason)}catch{}},{once:!0}),{signal:n.signal,cancel:()=>clearTimeout(r)}};async function j(e,t={},{timeout:n=12e3,retries:r=0,backoff:s=300}={}){if(!C)throw new Error("fetch not available");let i=String(t.method||"GET").toUpperCase(),d=se(e),u=new Headers(t.headers||{});u.has("Accept")||u.set("Accept","application/json, text/html;q=0.9, */*;q=0.8"),d&&!u.has("X-Requested-With")&&u.set("X-Requested-With","XMLHttpRequest");let l=!["GET","HEAD","OPTIONS","TRACE"].includes(i);if(d&&l&&!u.has("X-CSRFToken")){let v=_();v&&u.set("X-CSRFToken",v)}let A=t.signal,{signal:ge,cancel:ve}=ce(n,A),G=0;for(;;)try{let v=await C(e,{credentials:d?"same-origin":"omit",...t,headers:u,signal:ge});return ve(),v}catch(v){if(!(!l&&d&&(v?.name==="AbortError"||/NetworkError|load failed|Failed to fetch/i.test(String(v?.message||"")))&&G<r))throw v;let Ee=s*Math.pow(2,G++)+Math.random()*120;await new Promise(be=>setTimeout(be,Ee))}}async function M(e,t={},n={}){let r=await j(e,t,n);if(!r.ok){let i=await r.text().catch(()=>""),d=new Error(`HTTP ${r.status} ${r.statusText}`);throw d.status=r.status,d.body=i,d}return r.status===204?null:(r.headers.get("content-type")||"").includes("application/json")?r.json():r.text()}async function ie(e,t,n={},r={}){let s=t instanceof FormData?t:JSON.stringify(t??{}),i=new Headers(n.headers||{});return!(t instanceof FormData)&&!i.has("Content-Type")&&i.set("Content-Type","application/json"),M(e,{method:"POST",body:s,headers:i,...n},r)}let F={money(e,{currency:t=w("[data-currency]")?.dataset.currency||"USD",locale:n=w("[data-locale]")?.dataset.locale||navigator.language||"en-US",maximumFractionDigits:r=0,notation:s="standard"}={}){try{return new Intl.NumberFormat(n,{style:"currency",currency:t,maximumFractionDigits:r,notation:s}).format(e)}catch{return`$${Math.round(+e||0).toLocaleString()}`}},pct(e){return`${Math.round(+e||0)}%`}};window.fc=Object.assign(window.fc||{},{env:a,dev:c,prefs:f,bus:S,csrf:_,on:ae,emit:p,$:w,$$:y,idle:k,raf:N,defer:re,fetchJSON:M,postJSON:ie,fetchSafe:j,fmt:F,util:{parseQS:q,toQS:R,storage:L,ttlGet:U,ttlSet:D}}),Object.assign(window.fc,{trapFocus(e){if(!e)return()=>{};let t='a,button,input,select,textarea,[tabindex]:not([tabindex="-1"])',n=()=>y(t,e).filter(d=>!d.hasAttribute("disabled")),r=()=>n()[0],s=()=>n().slice(-1)[0],i=d=>{if(d.key!=="Tab")return;let u=r(),l=s();!u||!l||(d.shiftKey&&document.activeElement===u?(d.preventDefault(),l.focus()):!d.shiftKey&&document.activeElement===l&&(d.preventDefault(),u.focus()))};return e.addEventListener("keydown",i,!0),()=>e.removeEventListener("keydown",i,!0)},decorateLinks(e=document){y('a[href][data-p2p-propagate="1"]',e).forEach(t=>{t.href=(window.fc&&typeof window.fc.makeTrackedUrl=="function"?window.fc.makeTrackedUrl:(n=>n))(t.href)})},async handleShare(e="ui",t={}){try{let n=(window.fc&&typeof window.fc.makeTrackedUrl=="function"?window.fc.makeTrackedUrl:(s=>s))(t.url||location.href,{from:e}),r={title:t.title||document.title,text:t.text||"Fuel the Season. Fund the Future.",url:n};return navigator.share?(await navigator.share(r),!0):(await navigator.clipboard.writeText(n),p("fc:copied",{url:n,where:e}),!0)}catch{return!1}}}),window.FC=window.fc,C&&(window.fetch=(e,t={})=>j(e,t));let $=(e=document)=>{y("a[href]",e).forEach(t=>{try{let n=t.getAttribute("href")||"";if(/^(mailto:|tel:|sms:|#)/i.test(n))return;new URL(t.href,location.href).origin!==location.origin&&(t.rel=(t.rel||"").split(/\s+/).filter(Boolean).concat(["noopener","noreferrer"]).join(" "),t.target||(t.target="_blank"))}catch{}})},B="fc_ref_ctx",de=1e3*60*60*24*7,ue=()=>{let e=q(),t={ref:e.ref||e.player||e.captain||e.athlete||"",team:e.team||e.squad||"",camp:e.campaign||e.camp||"",utm_source:e.utm_source||(e.ref?"p2p-ref":""),utm_medium:e.utm_medium||(e.player?"player":e.team?"team":"site"),utm_campaign:e.utm_campaign||e.campaign||"fundchamps"};return Object.fromEntries(Object.entries(t).filter(([,n])=>n))},g=Object.assign({},U(B,{}),ue());Object.keys(g).length&&D(B,g,de);let le=(e,t={})=>{try{let n=new URL(e,location.href),r=Object.fromEntries(n.searchParams.entries()),s={...g,...r,...t},i=R(s);return n.search=i?`?${i}`:"",n.toString()}catch{return e}},J=(e=document)=>{Object.keys(g).length>0&&(y('a[href][data-donate], a[href*="donate"], a[href*="payments"], a[data-cta="donate"], a[data-p2p-propagate="1"]',e).forEach(n=>{n.href=(window.fc&&typeof window.fc.makeTrackedUrl=="function"?window.fc.makeTrackedUrl:(r=>r))(n.href)}),y('form[action*="donate"], form[action*="payments"], form[data-donate]',e).forEach(n=>{let r=(s,i)=>{if(!i)return;let d=n.querySelector(`input[name="${s}"]`);d||(d=document.createElement("input"),d.type="hidden",d.name=s,n.appendChild(d)),d.value=i};Object.entries(g).forEach(([s,i])=>r(s,i))}))},me=new MutationObserver(e=>{for(let t of e)t.addedNodes&&t.addedNodes.length&&t.addedNodes.forEach(n=>{n.nodeType===1&&(J(n),$(n),K(n),window.fc.decorateLinks(n))})}),Ne=!!navigator.share,H=async(e={})=>window.fc.handleShare("generic",e),K=(e=document)=>{y("[data-share]",e).forEach(t=>{t.__wiredShare||(t.__wiredShare=!0,t.addEventListener("click",async()=>{try{let n=t.getAttribute("data-share"),r=n?JSON.parse(n):{};if(r.url||(r.url=location.href),await H(r)){let i=t.textContent;t.textContent="Copied!",setTimeout(()=>t.textContent=i,900)}}catch{H({})}},{passive:!0}))})},fe=()=>{let e=document.querySelector('[data-cta="donate"], .fc-hero-cta, a[href*="donate"]');if(!e)return;let t=new IntersectionObserver(n=>{n.forEach(r=>{if(r.isIntersecting){try{e.setAttribute("tabindex","0"),setTimeout(()=>e.focus({preventScroll:!0}),250)}catch{}t.disconnect()}})},{rootMargin:"0px 0px -60% 0px",threshold:.4});t.observe(e)},pe=()=>{addEventListener("keydown",e=>{if((e.key==="d"||e.key==="D")&&!/input|textarea|select/i.test(e.target.tagName)){let t=document.querySelector('[data-cta="donate"], .fc-hero-cta, a[href*="donate"]');if(t)try{t.click()}catch{}}},{passive:!0})},we=()=>{if(!("io"in window||!(document.getElementById("donor-ticker")||document.getElementById("sponsor-leaderboard"))))try{let t=new EventSource("/sse/donations");t.addEventListener("donation",n=>{try{let r=JSON.parse(n.data);p("fc:donation",r);let s=w("#donor-ticker .dt-track");if(s){let i=document.createElement("span");i.className="dt-item";let d=document.createElement("strong");d.textContent=r.name||"Anonymous";let u=document.createElement("i");u.textContent=r.amount?` â€” ${F.money(r.amount)}`:"",i.append(d,u),s.prepend(i)}}catch{}}),b("pagehide",()=>{try{t.close()}catch{}})}catch{}},P=()=>p("fc:network",{online:navigator.onLine});window.addEventListener("online",P,{passive:!0}),window.addEventListener("offline",P,{passive:!0}),b("DOMContentLoaded",P),window.addEventListener("visibilitychange",()=>p("fc:visibility",{hidden:document.hidden}),{passive:!0}),window.addEventListener("pagehide",()=>p("fc:pagehide"),{passive:!0});try{if("PerformanceObserver"in window){let e=new PerformanceObserver(t=>{for(let n of t.getEntries()){(window.dataLayer=window.dataLayer||[]).push({event:"fc_lcp_seen"}),e.disconnect();break}});e.observe({type:"largest-contentful-paint",buffered:!0})}}catch{}let W=0,X=e=>{let t=Date.now();return t-W<e?!1:(W=t,!0)};window.addEventListener("error",e=>{X(1500)&&p("fc:error",{type:"error",error:e.error||e.message})}),window.addEventListener("unhandledrejection",e=>{X(1500)&&p("fc:error",{type:"rejection",error:e.reason})});let he=(e,{type:t="module",async:n=!0,deferAttr:r=!0,crossOrigin:s,integrity:i}={})=>new Promise((d,u)=>{let l=I(document.createElement("script"));l.src=e,l.type=t,n&&(l.async=!0),r&&(l.defer=!0),s&&(l.crossOrigin=s),i&&(l.integrity=i),l.onload=()=>d(),l.onerror=A=>u(A),document.head.appendChild(l)}),ye=(e,{media:t="all"}={})=>new Promise((n,r)=>{let s=I(document.createElement("link"));s.rel="stylesheet",s.href=e,s.media=t,s.onload=()=>n(),s.onerror=i=>r(i),document.head.appendChild(s)});Object.assign(window.fc,{loadScript:he,loadStyle:ye,makeTrackedUrl:le});let V=async()=>{let e=(n,r)=>import(n).then(s=>typeof s.default=="function"?s.default():void 0).catch(s=>{});if(await Promise.allSettled([e("./site.js","site.js"),e("./sponsor.js","sponsor.js"),e("./fundraiser.js","fundraiser.js")]),!!(document.getElementById("sponsor-donation-form")||document.getElementById("stripe-payment-element")||document.getElementById("paypal-buttons"))&&await Promise.resolve().then(()=>(ne(),xe)).catch(n=>{}),!("io"in window)&&document.getElementById("sponsor-leaderboard"))try{await import("./vendor/socketio.mjs")}catch{}try{let{default:n}=await import("alpinejs");window.Alpine=n,n.store?.("fc",{env:a,dev:c,csrf:_(),ref:g}),k(()=>n.start())}catch{}if(k(async()=>{try{let n=o.hasAttribute("data-pwa")||/prod/i.test(a);"serviceWorker"in navigator&&n&&((await navigator.serviceWorker.register("/static/js/elite-sw.js",{scope:"/"})).update?.(),p("fc:sw:ready"))}catch{}}),J(document),$(document),K(document),window.fc.decorateLinks(document),fe(),pe(),we(),me.observe(document.body,{subtree:!0,childList:!0}),p("fc:ready",{env:a,dev:c,prefs:f,ref:g}),S)try{S.postMessage({t:"fc:ready",env:a,ref:g})}catch{}if(c){let n=performance.getEntriesByType?.("navigation")?.[0]}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",V,{once:!0}):V()})();})();
