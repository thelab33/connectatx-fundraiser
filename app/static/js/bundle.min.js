(()=>{document.addEventListener("DOMContentLoaded",()=>{console.log("\u26A1 Starforge JS initializing\u2026");let o;try{o=io()}catch{console.warn("\u26A0\uFE0F Socket.IO not available! Real-time features disabled.")}o&&(o.on("new_donation",t=>{showDonationTicker(`\u{1F389} <b>$${t.amount.toLocaleString()}</b> from <b>${c(t.name)}</b> \u2013 Thank you!`),typeof window.launchConfetti=="function"&&window.launchConfetti()}),o.on("new_sponsor",t=>{window.sponsorAlert(t.name,"Champion Sponsor"),window.openSpotlight(t.name)}),o.on("vip_update",t=>{}));let e=document.getElementById("backToTop");e&&e.addEventListener("click",()=>window.scrollTo({top:0,behavior:"smooth"}));let n=!1;function s(){n||(window.requestAnimationFrame(()=>{document.querySelectorAll("h1, h2").forEach(t=>{!t.classList.contains("in-view")&&t.getBoundingClientRect().top<window.innerHeight-60&&(t.style.opacity=1,t.classList.add("in-view"))}),n=!1}),n=!0)}if(document.querySelectorAll("h1, h2").forEach(t=>{t.style.opacity=0,t.style.transition="opacity 0.7s cubic-bezier(.4,0,.2,1)"}),window.addEventListener("scroll",s,{passive:!0}),s(),"IntersectionObserver"in window){let t=new IntersectionObserver((r,l)=>{r.forEach(i=>{i.isIntersecting&&(i.target.classList.add("in-view"),i.target.classList.add("animate-sparkle"),l.unobserve(i.target))})},{threshold:.4});document.querySelectorAll(".badge-glass, .prestige-badge").forEach(r=>t.observe(r))}function f(){let t=document.querySelector("#hero-meter-bar > div, .progress-bar"),r=document.getElementById("hero-meter-percent"),l=document.getElementById("emoji-milestone"),i=document.getElementById("funds-raised")||document.getElementById("funds-raised-meter"),p=document.getElementById("funds-goal")||document.getElementById("funds-goal-meter");if(!t||!i||!p)return;let g=parseFloat(i.textContent.replace(/[^0-9.]/g,"")||"0"),b=parseFloat(p.textContent.replace(/[^0-9.]/g,"")||"1"),d=Math.min(g/b*100,100).toFixed(1);setTimeout(()=>{t.style.width=`${d}%`,r&&(r.textContent=`${d}%`),l&&(l.textContent=d>=100?"\u{1F3C6}":d>=75?"\u{1F4AA}":d>=50?"\u{1F525}":d>=25?"\u{1F680}":"\u{1F4A4}"),t.setAttribute("aria-valuenow",g)},350)}f();let a=document.getElementById("vip-toast");a&&!sessionStorage.getItem("vipToastShown")&&(a.textContent="\u{1F389} Welcome! New sponsors will be spotlighted here \u2014 you could be next!",a.classList.remove("hidden"),a.setAttribute("role","status"),a.setAttribute("aria-live","polite"),setTimeout(()=>a.classList.add("hidden"),6500),sessionStorage.setItem("vipToastShown","1"));let m=document.getElementById("hamburger"),u=document.getElementById("mobile-menu");m&&u&&m.addEventListener("click",()=>{let t=u.classList.toggle("open");m.setAttribute("aria-expanded",t?"true":"false"),t?(u.querySelector("a,button,input")?.focus(),document.body.style.overflow="hidden"):document.body.style.overflow=""}),window.launchConfetti=function(){window.navigator.vibrate&&window.navigator.vibrate([22,16,6])},document.addEventListener("alpine:init",()=>{}),console.log("\u2705 Connect ATX Elite JavaScript loaded.")});window.showDonationTicker=function(o){let e=document.getElementById("donation-ticker");e||(e=document.createElement("div"),e.id="donation-ticker",e.className="fixed bottom-8 left-1/2 -translate-x-1/2 bg-yellow-400/95 text-black font-bold px-7 py-3 rounded-2xl shadow-xl z-[9999] animate-bounce-in text-lg",e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),document.body.appendChild(e)),e.innerHTML=o,e.classList.add("show"),setTimeout(()=>e.classList.remove("show"),4e3)};window.openSpotlight=function(o="A Generous Donor"){let e=document.getElementById("sponsor-spotlight-modal")||document.getElementById("sponsor-spotlight-modal-footer"),n=document.getElementById("sponsor-name")||document.getElementById("sponsor-name-footer");!e||!n||(n.innerHTML=`<span class="text-red-400 font-bold">${c(o)}</span>`,e.classList.add("show"),e.setAttribute("aria-modal","true"),typeof window.launchConfetti=="function"&&window.launchConfetti(),setTimeout(window.closeSpotlight,4e3))};window.closeSpotlight=function(){let o=document.getElementById("sponsor-spotlight-modal")||document.getElementById("sponsor-spotlight-modal-footer");o&&o.classList.remove("show")};window.renderSponsorLeaderboard=function(o=[]){let e=document.getElementById("sponsor-leaderboard-main");if(e){if(o.length===0){e.innerHTML='<div class="col-span-2 text-center text-lg text-gold/80 font-semibold">Be our first sponsor! \u{1F3C5}</div>';return}e.innerHTML=o.map((n,s)=>`
      <div class="rounded-2xl border-4 ${s===0?"border-gold bg-gradient-to-r from-gold/20 via-red-700/10 to-white/10 scale-105 shadow-inner-gold animate-pulse":"border-white/20 bg-black/40"} shadow-elevated p-5 flex flex-col items-center text-center">
        <span class="text-2xl font-extrabold ${s===0?"text-gold drop-shadow":"text-white/80"}">${c(n.name)}</span>
        <span class="text-xl font-bold mt-2 ${s===0?"text-red-400":"text-white/60"}">$${n.amount.toLocaleString()}</span>
        ${s===0?'<div class="prestige-badge mt-3">\u{1F3C6} Top Champion</div>':""}
      </div>
    `).join("")}};window.sponsorAlert=function(o,e="Champion Sponsor"){document.querySelectorAll(".starforge-sponsor-alert").forEach(s=>s.remove());let n=document.createElement("div");n.className="starforge-sponsor-alert fixed bottom-4 right-4 z-[9999] flex flex-col items-end animate-bounce-in",n.setAttribute("role","status"),n.setAttribute("aria-live","polite"),n.innerHTML=`
    <div class="bg-black border-4 border-gold rounded-2xl px-7 py-4 shadow-elevated flex flex-col items-center text-center">
      <img src="/static/images/logo.webp" class="w-12 h-12 mb-2 rounded-full border-2 border-gold shadow-gold-glow" alt="Logo" />
      <span class="text-lg font-bold text-gold mb-2">\u{1F525} NEW SPONSOR ALERT! \u{1F525}</span>
      <span class="text-white font-semibold mb-2">Thank you <b>${c(o)}</b> for supporting the team!</span>
      <span class="prestige-badge">${e} \u{1F3C6}</span>
    </div>
  `,document.body.appendChild(n),setTimeout(()=>n.remove(),4800)};function c(o){return(o+"").replace(/[&<>"']/g,function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[e]||e})}})();
