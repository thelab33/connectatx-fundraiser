(()=>{(()=>{"use strict";let a={throttle(e,t=120){let o=0,n=null;return(...s)=>{let i=Date.now(),l=t-(i-o);l<=0?(o=i,e(...s)):n||(n=setTimeout(()=>{n=null,o=Date.now(),e(...s)},l))}},sanitize(e=""){return String(e).replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[t])},toNumber(e="0"){return parseFloat(String(e).replace(/[^0-9.]/g,""))||0},focusFirst(e){if(!e)return;e.querySelector('a,button,input,select,textarea,[tabindex]:not([tabindex="-1"])')?.focus()}},r={io:null,dom:{},tickerIndex:0},c={backToTop:"#backToTop",hamburger:"#hamburger",mobileMenu:"#mobile-menu",progressBar:"#hero-meter-bar > div, .progress-bar",progressPercent:"#hero-meter-percent",emojiMilestone:"#emoji-milestone",fundsRaised:"#funds-raised, #funds-raised-meter",fundsGoal:"#funds-goal, #funds-goal-meter",vipToast:"#vip-toast",sponsorModal:"#sponsor-spotlight-modal, #sponsor-spotlight-modal-footer",sponsorNameEl:"#sponsor-name, #sponsor-name-footer",amountEl:"#donation-amount, #hero-donation-amount",impactEl:"#impact-message, #hero-impact-message",heroHeading:"#hero-heading",sponsorLeaderboard:"#sponsor-leaderboard-main",fomoTicker:"#fomo-ticker-text"};function u(){Object.keys(c).forEach(e=>{let t=c[e];r.dom[e]=document.querySelector(t)}),r.dom.donationTicker=null}let m={init(){u(),this.setupHeroHeading(),this.setupSocket(),this.bindEvents(),this.setupScrollAnimations(),this.updateProgressMeter(),this.setupVIPToast(),this.setupHeroQuotes(),this.setupLiveImpactPreview()},setupHeroHeading(){let e=r.dom.heroHeading;e&&Object.assign(e.style,{opacity:"1",visibility:"visible",transition:"none",animation:"none",color:"#d4af37",textShadow:"0 0 8px #d4af37cc, 0 4px 12px rgba(212, 175, 55, 0.35)"})},setupSocket(){try{if(!window.io)throw new Error("No Socket.IO");r.io=window.io(),r.io.on("new_donation",this.handleNewDonation.bind(this)),r.io.on("new_sponsor",this.handleNewSponsor.bind(this))}catch{console.warn("\u26A0\uFE0F Socket.IO not available \u2013 real-time features disabled.")}},bindEvents(){let{backToTop:e,hamburger:t,heroHeading:o}=r.dom;e?.addEventListener("click",()=>window.scrollTo({top:0,behavior:"smooth"})),t?.addEventListener("click",this.toggleMobileNav.bind(this)),document.addEventListener("click",n=>{let s=n.target.closest(".copy-quote");s&&this.copyQuote(s)}),window.addEventListener("scroll",a.throttle(this.revealHeadings.bind(this)),{passive:!0}),this.revealHeadings(),o?.addEventListener("focus",this.setupHeroHeading.bind(this))},setupScrollAnimations(){if(!("IntersectionObserver"in window))return;let e=new window.IntersectionObserver((t,o)=>{t.forEach(n=>{n.isIntersecting&&(n.target.classList.add("in-view","animate-sparkle"),o.unobserve(n.target))})},{threshold:.4});document.querySelectorAll(".badge-glass, .prestige-badge").forEach(t=>e.observe(t))},setupVIPToast(){let{vipToast:e}=r.dom;!e||sessionStorage.getItem("vipToastShown")||(e.textContent="\u{1F389} Welcome! New sponsors will be spotlighted here \u2014 you could be next!",e.classList.remove("hidden"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),setTimeout(()=>e.classList.add("hidden"),6500),sessionStorage.setItem("vipToastShown","1"))},setupHeroQuotes(){if(!Array.isArray(window.heroQuotes)||!window.heroQuotes.length)return;let[e]=window.heroQuotes;["hero-quote-text","hero-quote-author","hero-quote-title"].forEach(t=>{let o=document.getElementById(t);o&&e[t.replace("hero-quote-","")]&&(o.innerText=e[t.replace("hero-quote-","")]||"")}),e.avatar&&document.getElementById("hero-quote-avatar")?.setAttribute("src",e.avatar)},setupLiveImpactPreview(){let{amountEl:e,impactEl:t}=r.dom;if(!e||!t)return;t.setAttribute("role","status"),t.setAttribute("aria-live","polite");let o=()=>{let n=parseFloat(e.value)||0,s="";n>=150?s=`\u{1F393} Your $${n} \u2192 one week of gym time for all players!`:n>=100?s=`\u{1F3C0} Your $${n} \u2192 a full scholarship for a player!`:n>=50?s=`\u{1F455} Your $${n} \u2192 a new team jersey.`:s="\u{1F44D} Every dollar counts \u2014 thank you!",t.textContent=s,t.classList.remove("hidden")};o(),e.addEventListener("input",o,{passive:!0})},handleNewDonation(e){if(!e)return;let t=Number(e.amount||0),o=a.sanitize(String(e.name||"Anonymous"));this.showDonationTicker(`\u{1F389} <b>$${t.toLocaleString()}</b> from <b>${o}</b> \u2013 Thank you!`),(window.launchConfetti||this.launchConfetti).call(this),this.updateProgressMeter()},handleNewSponsor(e){if(!e)return;let t=a.sanitize(String(e.name||"A Generous Donor"));this.sponsorAlert(t,"Champion Sponsor"),this.openSpotlight(t)},toggleMobileNav(){let{mobileMenu:e,hamburger:t}=r.dom;if(!e||!t)return;let o=e.classList.toggle("open");t.setAttribute("aria-expanded",String(o)),document.body.style.overflow=o?"hidden":"",o&&a.focusFirst(e)},copyQuote(e){let t=e.dataset.quote||"";if(!navigator.clipboard){alert("Copy not supported on this browser.");return}navigator.clipboard.writeText(t).then(()=>{let o=e.closest("figure,div,section")?.querySelector("#quote-status");o&&(o.textContent="Quote copied to clipboard");let n=e.textContent;e.textContent="Copied!",e.classList.add("bg-yellow-300","text-black","font-bold"),setTimeout(()=>{o&&(o.textContent=""),e.textContent=n,e.classList.remove("bg-yellow-300","text-black","font-bold")},1400)}).catch(()=>alert("Copy failed"))},revealHeadings(){document.querySelectorAll("h1, h2").forEach(e=>{!e.classList.contains("in-view")&&e.getBoundingClientRect().top<window.innerHeight-60&&(e.style.opacity="1",e.classList.add("in-view"))})},updateProgressMeter(){let{progressBar:e,progressPercent:t,emojiMilestone:o,fundsRaised:n,fundsGoal:s}=r.dom;if(!e||!n||!s)return;let i=a.toNumber(n.textContent),l=Math.max(a.toNumber(s.textContent),1),d=Math.min(i/l*100,100).toFixed(1);setTimeout(()=>{e.style.width=`${d}%`,e.setAttribute("aria-valuenow",String(i)),e.setAttribute("aria-valuemin","0"),e.setAttribute("aria-valuemax",String(l)),t&&(t.textContent=`${d}%`),o&&(o.textContent=this.getMilestoneEmoji(d))},300)},getMilestoneEmoji(e){return e=parseFloat(e),e>=100?"\u{1F3C6}":e>=75?"\u{1F680}":e>=50?"\u{1F525}":e>=25?"\u{1F680}":"\u{1F4A4}"},showDonationTicker(e){let t=r.dom.donationTicker;t||(t=document.createElement("div"),t.id="donation-ticker",t.className="fixed bottom-8 left-1/2 -translate-x-1/2 bg-yellow-400/95 text-black font-bold px-7 py-3 rounded-2xl shadow-xl z-[9999] text-lg animate-bounce-in",t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),document.body.appendChild(t),r.dom.donationTicker=t),t.innerHTML=e,t.classList.add("show"),setTimeout(()=>t.classList.remove("show"),4e3)},openSpotlight(e="A Generous Donor"){let{sponsorModal:t,sponsorNameEl:o}=r.dom;!t||!o||(o.innerHTML=`<span class="text-red-400 font-bold">${a.sanitize(e)}</span>`,t.classList.add("show"),t.setAttribute("aria-modal","true"),(window.launchConfetti||this.launchConfetti).call(this),setTimeout(()=>this.closeSpotlight(),4e3))},closeSpotlight(){let{sponsorModal:e}=r.dom;e?.classList.remove("show")},renderSponsorLeaderboard(e=[]){let t=r.dom.sponsorLeaderboard;if(t){if(!e.length){t.innerHTML='<div class="col-span-2 text-center text-lg text-gold/80 font-semibold">Be our first sponsor! \u{1F3C6}</div>';return}t.innerHTML=e.map((o,n)=>{let s=n===0;return`
          <div class="rounded-2xl border-4 ${s?"border-gold bg-gradient-to-r from-gold/20 via-red-700/10 to-white/10 scale-105 shadow-inner-gold animate-pulse":"border-white/20 bg-black/40"} shadow-elevated p-5 flex flex-col items-center text-center">
            <span class="text-2xl font-extrabold ${s?"text-gold drop-shadow":"text-white/80"}">${a.sanitize(o.name)}</span>
            <span class="text-xl font-bold mt-2 ${s?"text-red-400":"text-white/60"}">$${Number(o.amount||0).toLocaleString()}</span>
            ${s?'<div class="prestige-badge mt-3">\u{1F3C6} Top Champion</div>':""}
          </div>
        `}).join("")}},sponsorAlert(e,t="Champion Sponsor"){document.querySelectorAll(".fundchamps-sponsor-alert")?.forEach(n=>n.remove());let o=document.createElement("div");o.className="fundchamps-sponsor-alert fixed bottom-4 right-4 z-[9999] flex flex-col items-end animate-bounce-in",o.setAttribute("role","status"),o.setAttribute("aria-live","polite"),o.innerHTML=`
        <div class="bg-black border-4 border-gold rounded-2xl px-7 py-4 shadow-elevated flex flex-col items-center text-center">
          <img src="/static/images/logo.webp" class="w-12 h-12 mb-2 rounded-full border-2 border-gold shadow-gold-glow" alt="Logo" />
          <span class="text-lg font-bold text-gold mb-2">\u{1F525} NEW SPONSOR ALERT! \u{1F525}</span>
          <span class="text-white font-semibold mb-2">Thank you <b>${a.sanitize(e)}</b> for supporting the team!</span>
          <span class="prestige-badge">${a.sanitize(t)} \u{1F3C6}</span>
        </div>
      `,document.body.appendChild(o),setTimeout(()=>o.remove(),4800)},launchConfetti(){let e=["#facc15","#dc2626","#fff","#18181b"];for(let t=0;t<64;t++){let o=document.createElement("div");o.className="confetti",o.style.background=e[Math.floor(Math.random()*e.length)],o.style.left=`${Math.random()*100}vw`,o.style.animationDelay=`${Math.random()*1.5}s`,document.body.appendChild(o),setTimeout(()=>o.remove(),1800)}navigator.vibrate&&navigator.vibrate([22,16,6])}};(function(){let e=document.getElementById("header-countdown");if(!e)return;let t;try{t=new Date(JSON.parse(e.dataset.deadline))}catch{return}if(isNaN(t))return;function o(i){let l=Math.max(0,Math.floor(i/1e3)),d=Math.floor(l/86400),f=Math.floor(l%86400/3600),g=Math.floor(l%3600/60),b=l%60;return`${d}d ${f}h ${g}m ${b}s`}function n(){let i=t-Date.now();e.textContent=o(i),i<=0&&clearInterval(s)}n();let s=setInterval(n,1e3)})(),function(){let e=document.querySelector('#site-header img[alt$=" logo"]');e&&e.addEventListener("error",()=>{e.src="/static/images/logo.webp"},{once:!0})}();let h=["Jessica J. donated $25!","Austin Bikes became a Gold Sponsor!","Coach Smith matched donations for 1 hour!","Only 3 VIP slots left for August!","Welcome to our newest sponsor: TechPros!"];function p(){let e=r.dom.fomoTicker;e&&(e.textContent=h[r.tickerIndex%h.length],r.tickerIndex++)}setInterval(p,3800),window.FundChampsApp=m,document.addEventListener("DOMContentLoaded",()=>{m.init(),u(),p()})})();})();
