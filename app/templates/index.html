{% extends "base.html" %}

{% block title %}
  {{ _("Home") }} Â· {{ team.team_name | default("Connect ATX Elite", true) }}
{% endblock %}

{# ---- HERO SECTION ---- #}
{% block hero %}
  {% include "partials/hero_and_fundraiser.html" ignore missing %}
{% endblock %}

{% block content %}
  <main class="flex flex-col gap-20 max-w-6xl mx-auto w-full px-4 sm:px-8" role="main" tabindex="-1">
    {# ---- Dynamic Page Sections ---- #}
    {% set page_sections = [
      {"id": "mission", "label": _("Our Mission"), "partial": "partials/mission_section.html"},
      {"id": "tiers", "label": _("Sponsorship Tiers"), "partial": "partials/tiers.html"},
      {"id": "digital-hub", "label": _("Digital Hub"), "partial": "partials/digital_hub.html"},
      {"id": "about", "label": _("About Connect ATX Elite"), "partial": "partials/about_section.html"},
      {"id": "sponsor-spotlight", "label": _("Sponsor Spotlight"), "partial": "partials/sponsor_spotlight.html"},
      {"id": "program-stats-calendar", "label": _("Program Stats & Schedule"), "partial": "partials/program_stats_and_calendar.html"},
      {"id": "testimonial-popover", "label": _("What Families Say"), "partial": "partials/testimonial_popover.html"},
      {"id": "back-to-top", "label": _("Back to Top"), "partial": "partials/back_to_top.html"},
      {"id": "flash-and-onboarding", "label": _("Flash & Onboarding"), "partial": "partials/flash_and_onboarding.html"},
      {"id": "sponsor-wall", "label": _("Sponsor Wall"), "partial": "partials/sponsor_wall.html"}
    ] %}

    {% for section in page_sections %}
      <section
        id="{{ section.id }}"
        aria-labelledby="{{ section.id }}-heading"
        class="pb-8 scroll-mt-20"
        role="region"
        tabindex="-1"
      >
        <h2 id="{{ section.id }}-heading" class="sr-only">{{ section.label }}</h2>
        {% include section.partial ignore missing %}
      </section>
    {% endfor %}

    {# ---- Optional CTA Block ---- #}
    {% block extra_cta %}
      {# Place sticky banners, promos, or A/B messages here #}
    {% endblock %}

    {# ---- Admin-Only Onboarding Popover ---- #}
    {% if current_user and current_user.is_authenticated and current_user.is_admin %}
      <div id="admin-onboarding" class="relative z-40">
        {% include "partials/admin_onboarding_popover.html" ignore missing %}
      </div>
    {% endif %}
  </main>
{% endblock %}

