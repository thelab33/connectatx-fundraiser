<footer id="fundchamps-site-footer"
        role="contentinfo"
        class="mt-16 py-8 px-2 sm:px-8 text-center text-sm text-zinc-400 relative border-t border-yellow-300/30 opacity-90 bg-gradient-to-t from-black via-zinc-900 to-transparent overflow-hidden">
  <!-- Watermark logo -->
  <div class="absolute inset-0 opacity-5 pointer-events-none bg-center bg-no-repeat bg-contain"
       style="background-image: url('{{ url_for('static', filename='images/logo.webp') }}');"></div>
  <a href="#main-content" class="sr-only focus:not-sr-only absolute left-2 top-2 bg-yellow-300 text-black px-3 py-1 rounded">Skip to main content</a>

  <div class="container mx-auto grid grid-cols-1 md:grid-cols-3 gap-10">
    <!-- Brand/Social -->
    <section class="flex flex-col items-center space-y-2">
      <div class="text-2xl font-black bg-gradient-to-r from-yellow-400 via-yellow-200 to-yellow-400 bg-clip-text text-transparent animate-shine">
        {{ team.team_name if team and team.team_name else "FundChamps" }}
      </div>
      <div class="text-sm">{{ team.division if team and team.division else "AAU 12U" }} | {{ team.location if team and team.location else "Austin, TX" }}</div>
      <div>¬© {{ now().year }}</div>
      <div class="flex gap-2 mt-1">
        {% if team and team.instagram %} ... {% endif %}
        {% if team and team.facebook %} ... {% endif %}
        {% if team and team.twitter %} ... {% endif %}
        {# Social SVGs as in your version #}
      </div>
    </section>

    <!-- Fundraising Progress -->
    <section class="flex flex-col items-center space-y-3">
      {% set raised = stats.raised if stats is defined and stats.raised is defined else 0 %}
      {% set goal = stats.goal if stats is defined and stats.goal is defined else 10000 %}
      <div role="progressbar" aria-valuenow="{{ ((raised / goal) * 100) | round(1) if goal else 0 }}" aria-valuemin="0" aria-valuemax="100"
           class="w-full bg-zinc-800 rounded-full overflow-hidden h-5 shadow-inner border border-yellow-300/30 max-w-xs mx-auto">
        <div class="h-full bg-gradient-to-r from-yellow-400 to-amber-300 transition-all duration-700 ease-in-out" id="footer-fund-bar"
             style="width: {{ ((raised / goal) * 100) | round(1) if goal else 0 }}%;"></div>
      </div>
      <div class="font-semibold text-yellow-400" id="footer-fund-status">
        ${{ raised }} of ${{ goal }} raised
        {% if goal and raised >= goal %}
          <span class="ml-2 animate-pop text-xl">üéâ Goal Met!</span>
        {% endif %}
      </div>
      <nav class="space-x-4 text-yellow-200">
        <a href="mailto:{{ team.email if team and team.email else 'arodgps@gmail.com' }}">üìß Email</a>
        <a href="{{ team.website if team and team.website else 'https://www.connectatxelite.com' }}" target="_blank" rel="noopener">üåê Website</a>
        <a href="{{ team.paypal if team and team.paypal else 'https://www.paypal.com/donate/your-link' }}" target="_blank" rel="noopener" class="font-bold">üí∏ Donate</a>
      </nav>
    </section>

    <!-- Contact and Countdown -->
    <section class="flex flex-col items-center space-y-2">
      <div><strong>Contact:</strong> <a href="mailto:{{ team.email if team and team.email else 'arodgps@gmail.com' }}">{{ team.email if team and team.email else 'arodgps@gmail.com' }}</a></div>
      <div><strong>Phone:</strong> <a href="tel:{{ team.phone if team and team.phone else '(512) 820-0475' }}">{{ team.phone if team and team.phone else '(512) 820-0475' }}</a></div>
      <div id="fundchamps-next-game-countdown" >
        Next Tournament: <span id="fundchamps-next-tournament">Loading‚Ä¶</span>
      </div>
      <button type="button" onclick="openSupportersModal()" class="mt-2 text-yellow-400 text-xs underline hover:text-yellow-200 transition">
        View All Supporters
      </button>
    </section>
  </div>

  <!-- Recent Supporters Marquee -->
  <div class="mt-6 text-center text-sm text-yellow-200 max-w-2xl mx-auto overflow-x-auto whitespace-nowrap" id="footer-supporters-scroll">
    <b>Recent Supporters:</b>
    {% if recent_supporters is defined and recent_supporters %}
      <marquee behavior="scroll" direction="left" scrollamount="5" onmouseover="this.stop();" onmouseout="this.start();" class="inline-block">
        {% for supporter in recent_supporters %}
          {{ supporter }}{% if not loop.last %} &bull; {% endif %}
        {% endfor %}
      </marquee>
    {% else %}
      Acme Corp ‚Ä¢ Jane D. ‚Ä¢ Smith &amp; Co ‚Ä¢ Austin Hoops
    {% endif %}
  </div>
  <div class="mt-4 text-center text-yellow-400/80">
    Built with üíõ by Angel Rodriguez Jr for FundChamps.
    <span class="block text-xs text-zinc-400/60 mt-1">SaaS platform, all rights reserved.</span>
  </div>
  <!-- Supporters Modal -->
  <div id="supporters-modal" class="fixed inset-0 bg-black/80 z-[99999] flex items-center justify-center hidden">
    <div class="bg-zinc-950 rounded-xl shadow-xl border-2 border-yellow-400/30 max-w-lg w-full p-8 relative">
      <button onclick="closeSupportersModal()" class="absolute top-2 right-2 text-xl text-yellow-300 hover:text-red-500 focus:outline-none">&times;</button>
      <h3 class="text-2xl font-extrabold text-yellow-400 mb-4">üèÜ All Supporters</h3>
      <ul class="space-y-2 text-yellow-100 text-base max-h-80 overflow-y-auto">
        {% for supporter in all_supporters if all_supporters is defined %}
          <li>{{ supporter }}</li>
        {% else %}
          <li>No supporters found yet.</li>
        {% endfor %}
      </ul>
      <div class="mt-4 text-xs text-yellow-300/60">Thank you for supporting our mission!</div>
    </div>
  </div>
</footer>
<script>
  // Next Tournament Countdown (safe, no recursion)
  document.addEventListener("DOMContentLoaded", () => {
    {% set next_event = next_event if next_event is defined and next_event else None %}
    {% set event_date = next_event.date if next_event and next_event.date is defined else None %}
    {% if event_date %}
      const targetDate = new Date("{{ event_date }}T00:00:00");
      const el = document.getElementById("fundchamps-next-tournament");
      function updateCountdown() {
        const now = new Date();
        const diff = targetDate - now;
        if (diff > 0) {
          const days = Math.floor(diff / (1000 * 60 * 60 * 24));
          el.textContent = days === 0 ? "Today!" : `In ${days} day${days !== 1 ? 's' : ''}`;
        } else {
          el.textContent = "Happening now!";
        }
      }
      updateCountdown();
      setInterval(updateCountdown, 3600000);
    {% else %}
      document.getElementById("fundchamps-next-tournament").textContent = "See calendar for next event!";
    {% endif %}
  });
  // Supporters Modal
  function openSupportersModal() {
    document.getElementById('supporters-modal').classList.remove('hidden');
    document.body.style.overflow = "hidden";
  }
  function closeSupportersModal() {
    document.getElementById('supporters-modal').classList.add('hidden');
    document.body.style.overflow = "";
  }
</script>

