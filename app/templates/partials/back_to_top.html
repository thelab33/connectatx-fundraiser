<!-- back_to_top.html — Elite SaaS Polish -->
<a id="back-to-top"
   href="#top"
   aria-label="Back to top"
   class="fixed left-4 md:left-6 z-[55] hidden md:inline-flex items-center gap-2 rounded-full bg-black/70 px-3 py-2 text-sm font-semibold text-yellow-200
          border border-white/15 shadow-2xl transition-opacity duration-200"
   style="bottom: calc(env(safe-area-inset-bottom, 0px) + 1rem);"
   data-sticky-cta>
  ⬆️ <span class="sr-only">Back to top</span>
</a>

<script nonce="{{ csp_nonce() if csp_nonce is defined else '' }}">
(() => {
  const btn = document.getElementById('back-to-top'); if (!btn || btn.__init) return; btn.__init = true;
  const showAt = 320;
  const sync = () => { const on = (scrollY || document.documentElement.scrollTop || 0) > showAt; btn.style.display = on ? 'inline-flex' : 'none'; };
  addEventListener('scroll', sync, { passive:true }); sync();
})();
</script>

<style>
  #back-to-top { will-change: opacity, transform; }
  #back-to-top:active { transform: scale(.97); }
  @media (prefers-reduced-motion: reduce){ #back-to-top{ transition: none !important; } }
</style>

