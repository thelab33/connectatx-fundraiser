{% from "macros/ui.html" import render_button %}
{% from "macros/confetti.html" import launch_confetti %}

{% set team_name = team.team_name | default('Connect ATX Elite', true) %}
{% set region = team.region | default('Austin, TX', true) %}
{% set badges = [
  {"txt": team_name, "bg": "bg-black/80", "txtc": "text-yellow-200", "tooltip": "The heart of our team — building champions with purpose."},
  {"txt": "Family‑Founded", "bg": "bg-yellow-300", "txtc": "text-yellow-900", "tooltip": "Founded by local families dedicated to growth and leadership."},
  {"txt": "Community‑Powered", "bg": "bg-amber-100", "txtc": "text-yellow-900", "tooltip": "Driven by supporters who care about our kids and their future."},
  {"txt": "Academics‑First", "bg": "bg-indigo-900", "txtc": "text-yellow-200", "tooltip": "Prioritizing education alongside athletics for lifelong success."}
] %}
{% set impact = [
  {"v": "20+",  "lbl": "Student‑Athletes"},
  {"v": "3.5+","lbl": "GPA Average"},
  {"v": "100%","lbl": "Funds to Access & Education"}
] %}

<section
  id="elite-mission"
  class="relative w-full py-20 px-4 sm:px-10 bg-gradient-to-br from-zinc-950 via-black to-zinc-900/90 text-white rounded-3xl shadow-xl-gold border border-yellow-400/10 flex flex-col items-center"
  aria-labelledby="mission-heading"
>
  <div class="max-w-3xl mx-auto space-y-12">
    <!-- Animated Heading -->
    <h2
      id="mission-heading"
      class="text-4xl sm:text-5xl font-black bg-gradient-to-r from-yellow-300 via-yellow-100 to-yellow-400 bg-clip-text text-transparent animate-shine drop-shadow-xl outline-none focus-visible:ring-4 ring-yellow-300 mb-4 tracking-tight"
      tabindex="0"
      aria-label="Our Mission"
    >
      Our Mission
    </h2>
    <!-- Badges: Core Values with Tooltips -->
    <ul
      class="flex flex-wrap justify-center gap-3 sm:gap-4"
      role="list"
      aria-label="Core values"
    >
      {% for b in badges %}
      <li
        role="listitem"
        tabindex="0"
        class="inline-flex items-center px-5 py-1.5 rounded-full {{ b.bg }} {{ b.txtc }} font-semibold text-xs uppercase shadow-inner ring-1 ring-yellow-400/30 focus-visible:ring-2 focus-visible:ring-yellow-300 transition relative cursor-pointer"
        data-tooltip="{{ b.tooltip }}"
        aria-describedby="badge-tip-{{ loop.index }}"
        onmouseover="showBadgeTip(this)" onmouseout="hideBadgeTip(this)"
        onfocus="showBadgeTip(this)" onblur="hideBadgeTip(this)"
      >
        {{ b.txt }}
        <span id="badge-tip-{{ loop.index }}" class="badge-tooltip absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1 rounded bg-yellow-400/95 text-black text-xs font-bold shadow-lg opacity-0 pointer-events-none transition-opacity duration-200 z-50"></span>
      </li>
      {% endfor %}
    </ul>
    <!-- Mission Statement: Glassy Card -->
    <div class="glassy-card rounded-3xl p-8 shadow-xl-gold ring-1 ring-yellow-400/20 space-y-5 animate-pop-in border border-yellow-400/10">
      <p class="text-lg font-semibold text-yellow-200 leading-relaxed">
        <span class="text-yellow-300 font-bold">Our Purpose:</span>
        Turn <span class="text-amber-300 font-bold">honor‑roll students into champions</span> — on&nbsp;and&nbsp;off&nbsp;the court.
      </p>
      <p class="text-base text-white/90 max-w-lg mx-auto leading-relaxed">
        Through rigorous teamwork, mentorship, and unyielding grit, we equip every player for life’s challenges as well as sport.
      </p>
    </div>
    <!-- Impact Stats: Animated Glass Cards -->
    <div
      class="flex flex-wrap justify-center gap-6 max-w-xl mx-auto"
      role="list"
      aria-label="Team impact stats"
    >
      {% for s in impact %}
      <div
        role="listitem"
        tabindex="0"
        class="flex flex-col items-center glassy-card bg-black/80 rounded-2xl p-6 shadow-xl-gold focus-within:ring-2 ring-yellow-400 animate-pop-in transition hover:scale-105"
      >
        <span class="text-3xl sm:text-4xl font-extrabold text-yellow-300 animate-shine">{{ s.v }}</span>
        <span class="mt-2 text-sm text-yellow-100 uppercase tracking-wide">{{ s.lbl }}</span>
      </div>
      {% endfor %}
    </div>
    <!-- FOMO Callout Bar -->
    <div
      class="mt-8 bg-gold-gradient text-black font-bold rounded-2xl py-4 px-6 shadow-2xl animate-bounce-in text-base sm:text-lg w-full max-w-xl mx-auto border border-yellow-400/10"
      aria-live="polite"
      aria-atomic="true"
      role="alert"
      tabindex="0"
    >
      Every sponsorship powers
      <span class="text-yellow-900 font-semibold">gym access, travel, and academic support</span> for our youth.
    </div>
    <!-- Elite CTA Button -->
    <div class="flex justify-center">
      {{ render_button(label='Become a Champion for ' ~ region ~ ' Youth →', href='#fundraiser', color='primary', extra_classes='mt-6 text-lg font-bold py-3 px-8 rounded-full shadow-xl animate-fade-in hover:scale-105 transition', type='button') }}
    </div>
    <!-- Supporting Text -->
    <p class="mt-3 text-sm text-white/70 max-w-md mx-auto text-center">
      Your support fuels gym time, academic tutoring, tournament travel, and life-changing opportunities.
      <strong>Keep our kids striving toward greatness.</strong>
    </p>
  </div>
</section>

<style>
  @keyframes subtle-shine {
    0%, 100% { background-position: 0%; }
    50% { background-position: 100%; }
  }
  .animate-shine {
    background: linear-gradient(270deg, #fbbf24, #fde68a, #fbbf24);
    background-size: 400% 400%;
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: subtle-shine 6s ease infinite;
  }
  @keyframes pop-in {
    0% { opacity: 0; transform: scale(0.85);}
    100% { opacity: 1; transform: scale(1);}
  }
  .animate-pop-in {
    animation: pop-in 0.7s cubic-bezier(0.4, 0, 0.2, 1) both;
  }
  @keyframes bounce-in {
    0%,100% { transform: translateY(-8px);}
    50% { transform: translateY(0);}
  }
  .animate-bounce-in {
    animation: bounce-in 1s cubic-bezier(.43,2,.45,.87) both;
  }
  @keyframes fade-in {
    from { opacity: 0;}
    to { opacity: 1;}
  }
  .animate-fade-in {
    animation: fade-in 1.2s cubic-bezier(.47,1.64,.41,.8) both;
  }
  .glassy-card {
    backdrop-filter: blur(16px) saturate(120%);
    -webkit-backdrop-filter: blur(16px) saturate(120%);
    background: linear-gradient(120deg, rgba(255, 255, 255, 0.08) 0%, rgba(250, 220, 100, 0.13) 100%);
    border-radius: 2rem;
    border: 1.5px solid rgba(255,255,255,0.11);
    box-shadow: 0 8px 32px 0 #facc1530, 0 1.5px 10px #fff2;
  }
  .badge-tooltip {
    min-width: 170px; max-width: 240px; text-align: center;
    opacity: 0; pointer-events: none; z-index: 60;
  }
  .badge-tooltip.active {
    opacity: 1 !important; pointer-events: auto; transition: opacity 0.2s;
  }
</style>
<script>
  // Tooltip a11y/UX logic
  function showBadgeTip(el) {
    const tip = el.querySelector('.badge-tooltip');
    if (tip && el.dataset.tooltip) {
      tip.textContent = el.dataset.tooltip;
      tip.classList.add('active');
    }
  }
  function hideBadgeTip(el) {
    const tip = el.querySelector('.badge-tooltip');
    if (tip) tip.classList.remove('active');
  }
  // Focus on heading for a11y wow on load
  document.addEventListener('DOMContentLoaded', () => {
    const missionHeading = document.getElementById('mission-heading');
    if (missionHeading) missionHeading.focus();
  });
</script>

