{% extends "base.html" %}

{# ============================================================
   FundChamps â€¢ Fundraiser Home (SV-Elite Clean, refined stack)
   - Hero is edge-to-edge (no extra container)
   - One visible H1 lives inside the hero partial
   - Seam fix: no gap under sticky header
   - Same partial filenames; no new includes
   ============================================================ #}

{# ---------- Query Flags ---------- #}
{% set _q   = request.args if request is defined else {} %}
{% set _OFF = ['0','false','off','no','disable'] %}
{% set SHOW_TIERS      = (show_tiers      if show_tiers      is defined else (_q.get('tiers','1')     |lower not in _OFF)) %}
{% set SHOW_IMPACT     = (show_impact     if show_impact     is defined else (_q.get('impact','1')    |lower not in _OFF)) %}
{% set SHOW_ABOUT      = (show_about      if show_about      is defined else (_q.get('about','1')     |lower not in _OFF)) %}
{% set SHOW_CONCIERGE  = (show_concierge  if show_concierge  is defined else (_q.get('concierge','1') |lower not in _OFF)) %}

{# ---------- Make hero the only visible H1 ---------- #}
{% block h1 %}{% endblock %}

{# ---------- Scoped Head (layout helpers + seam fix) ---------- #}
{% block head %}
  {{ super() }}
  <style {{ nonce_attr() }}>
    :root { --scene-dark:#0b0b0c; --scene-dim:#0f0f10; --scene-line:#ffffff22; }
    .scene        { padding-block: var(--fc-space-y); }
    .scene--flush { padding-block: 0; }
    .scene--dark  { background: var(--scene-dark); }
    .scene--dim   { background: var(--scene-dim); }
    .scene-break  { height:1px; background:linear-gradient(90deg,transparent,var(--scene-line),transparent); }
    .fc-container { width:min(88rem,96vw); margin-inline:auto; padding-inline:clamp(.75rem,2vw,1.25rem); }

    /* Seam: pull hero up under sticky header without overlap */
    #fc-hero{
      margin-top: calc(-1 * var(--fc-sticky-offset));
      padding-top: var(--fc-sticky-offset);
    }

    /* If you keep a wrapper section around the hero, ensure it adds no padding */
    #fundraiser-hero.scene--flush{ padding-block: 0; }
  </style>
{% endblock %}

{# ---------- (Ticker intentionally removed) ---------- #}
{% block section_ticker %}{% endblock %}

{# ---------- 1) HERO (edge-to-edge; no extra container) ---------- #}
{% block section_hero %}
<section id="fundraiser-hero" class="fc-section scene scene--flush" aria-labelledby="hero-title" role="region">
  <h2 class="sr-only" id="hero-title">Fundraiser hero</h2>
  {# hero partial renders its own full-bleed layout and the visible H1 #}
  {% include "partials/hero_and_fundraiser.html" ignore missing with context %}
</section>
{% endblock %}

{# ---------- 2) TIERS + PROGRAM STATS ---------- #}
{% block section_tiers %}
{% if SHOW_TIERS %}
<div class="scene-break" aria-hidden="true"></div>
<section id="tiers" class="fc-section scene scene--dim" aria-labelledby="tiers-title" role="region">
  <h2 class="sr-only" id="tiers-title">Sponsorship tiers</h2>
  <div class="fc-container">
    {% include "partials/tiers.html" ignore missing with context %}
    {% include "partials/program_stats_and_calendar.html" ignore missing with context %}
  </div>
</section>
{% endif %}
{% endblock %}

{# ---------- 3) IMPACT BUCKETS ---------- #}
{% block section_impact %}
{% if SHOW_IMPACT %}
<div class="scene-break" aria-hidden="true"></div>
<section id="impact" class="fc-section scene scene--dim" aria-labelledby="impact-title" role="region">
  <h2 class="sr-only" id="impact-title">Impact buckets</h2>
  <div class="fc-container">
    {% include "partials/impact_lockers_premium.html" ignore missing with context %}
  </div>
</section>
{% endif %}
{% endblock %}

{# ---------- 4) ABOUT ---------- #}
{% block section_about %}
{% if SHOW_ABOUT %}
<div class="scene-break" aria-hidden="true"></div>
<section id="mission" class="fc-section scene scene--dim" aria-labelledby="about-title" role="region">
  <h2 class="sr-only" id="about-title">About our program</h2>
  <div class="fc-container">
    {% include "partials/about_section.html" ignore missing with context %}
  </div>
</section>
{% endif %}
{% endblock %}

{# ---------- 5) CONCIERGE ---------- #}
{% block section_concierge %}
{% if SHOW_CONCIERGE %}
<section id="concierge" class="fc-section scene scene--dark" aria-labelledby="concierge-title" role="region">
  <h2 class="sr-only" id="concierge-title">AI concierge</h2>
  <div class="fc-container">
    {% include "partials/ai_concierge.html" ignore missing with context %}
  </div>
</section>
{% endif %}
{% endblock %}

