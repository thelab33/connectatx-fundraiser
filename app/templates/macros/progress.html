{% macro progress(raised, goal, confetti="yes", bar_color="from-yellow-400 to-yellow-300") -%}
<div
  x-data="{ pct: (goal === 0 ? 0 : (raised / goal) * 100).toFixed(1) }"
  x-init="
    $refs.bar.style.width = pct + '%';
    if (pct >= 100 && '{{ confetti }}' === 'yes') {
      import('https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/+esm').then(c => c.default({ origin: { y: 0.8 } }));
    }
  "
  class="relative mt-6"
>
  <!-- Progress Bar -->
  <div class="h-5 w-full bg-zinc-700 rounded-full overflow-hidden shadow-inner">
    <div
      x-ref="bar"
      class="h-full bg-gradient-to-r {{ bar_color }} rounded-full transition-all duration-500 ease-out"
      style="min-width: 6px"
    ></div>
  </div>

  <!-- Progress Text -->
  <span
    class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-6 font-bold text-white"
  >
    ${{ raised|int }} / ${{ goal|int }}
  </span>

  <!-- Percentage Display -->
  <span
    class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-12 font-bold text-white"
    x-text="pct + '%'"></span>
</div>
{%- endmacro %}

